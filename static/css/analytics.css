/* Analytics, graphs, and health pages */
.analytics-page,
.energy-analytics-page,
.plant-health-page,
.disease-monitoring-page,
.sensor-analytics-page,
.ml-dashboard-page,
.system-overview-page {
  background: var(--color-bg);
  display: flex;
  flex-direction: column;
  gap: var(--section-gap);
}
.management-section { background: var(--card-bg); border: 1px solid var(--card-border); border-radius: var(--radius-lg); padding: var(--space-3); box-shadow: var(--card-shadow); margin-bottom: var(--section-gap); }
.quick-access-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--space-3); }
.quick-access-card { background: var(--card-bg); border: 1px solid var(--card-border); border-radius: var(--radius-lg); padding: var(--space-3); box-shadow: var(--card-shadow); position: relative; transition: transform var(--motion-normal), box-shadow var(--motion-normal); }
.quick-access-card:hover { transform: translateY(-2px); box-shadow: var(--shadow-md); }
.quick-access-card h3 { margin: 0 0 var(--space-1); }
.quick-access-card p { margin: 0; color: var(--color-text-muted); }
.card-arrow { position: absolute; right: var(--space-2); bottom: var(--space-2); color: var(--color-text-muted); }
.analytics-quick-links { margin-bottom: var(--section-gap); }
.ml-dashboard { max-width: var(--content-compact); margin: 0 auto; padding: var(--page-gutter); display: flex; flex-direction: column; gap: var(--space-3); }
.dashboard-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: var(--space-3); margin-bottom: var(--space-3); }

.header-actions { display: flex; gap: var(--space-3); align-items: center; flex-wrap: wrap; }
.card-actions { display: flex; gap: var(--space-2); align-items: center; }

.stat-card.danger .stat-icon { background: color-mix(in srgb, var(--danger-600) 12%, transparent); color: var(--danger-600); }

.health-badge {
  display: inline-flex;
  align-items: center;
  gap: var(--space-2);
  padding: 6px 10px;
  border-radius: var(--radius-md);
  font-weight: 600;
}
.health-badge.badge-healthy { background: var(--success-100); color: var(--success-600); }
.health-badge.badge-stressed { background: var(--warning-100); color: var(--warning-600); }
.health-badge.badge-diseased { background: var(--danger-100); color: var(--danger-600); }
.health-badge.badge-unknown { background: var(--card-bg-muted); color: var(--color-text); }

.table-responsive { margin-top: var(--space-2); }
.actions-column { text-align: right; }

.chart-container, .chart-panel {
  background: var(--card-bg);
  border: 1px solid var(--card-border);
  border-radius: var(--radius-lg);
  padding: var(--space-3);
  box-shadow: var(--card-shadow);
}
.chart-controls { display: flex; gap: var(--space-2); align-items: center; flex-wrap: wrap; margin-bottom: var(--space-2); }
.chart-lg { min-height: 350px; }
.chart-xl { min-height: 450px; }

.saved-alerts-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: var(--space-3); margin-top: var(--space-2); }
.alert-helper-row { display: grid; grid-template-columns: 1fr auto; gap: var(--space-2); }
.alert-builder { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: var(--space-2); align-items: center; }
.alert-list { margin-top: var(--space-2); color: var(--color-text-muted); }
.saved-view-row { display: grid; grid-template-columns: 1fr auto; gap: var(--space-2); margin-bottom: var(--space-2); }
.saved-view-actions { display: grid; grid-template-columns: 1fr auto auto; gap: var(--space-2); }

.table-actions { margin-top: var(--space-2); }

.empty-state .fa-3x { color: var(--brand-700); }

.device-stat-card { background: var(--card-bg); border: 1px solid var(--card-border); border-radius: var(--radius-lg); padding: var(--space-3); box-shadow: var(--card-shadow); }

.metric-card { background: var(--card-bg); border: 1px solid var(--card-border); border-radius: var(--radius-lg); padding: var(--space-3); box-shadow: var(--card-shadow); display: flex; flex-direction: column; gap: var(--space-2); }
.metric-row { display: flex; align-items: center; justify-content: space-between; }

.badge.soft { background: var(--surface-muted-translucent); color: var(--color-text); border: 1px solid var(--card-border); }

.badge.tag { padding: 4px 10px; border-radius: 999px; background: var(--surface-muted-translucent); border: 1px solid var(--card-border); color: var(--color-text-muted); }

.card-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: var(--space-3); }

.device-grid, .health-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--space-2); }
.plant-guide-page { display: flex; flex-direction: column; gap: var(--section-gap); }
.plant-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: var(--space-3); }
.plant-card { background: var(--card-bg); border: 1px solid var(--card-border); border-radius: var(--radius-lg); padding: var(--space-3); text-align: center; cursor: pointer; transition: transform var(--motion-normal), box-shadow var(--motion-normal); }
.plant-card:hover { transform: translateY(-2px); box-shadow: var(--shadow-md); }
.plant-details-hidden { display: none; }
.plant-info-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--space-3); margin-bottom: var(--space-3); }
.info-card { background: var(--card-bg); border: 1px solid var(--card-border); border-radius: var(--radius-md); padding: var(--space-3); box-shadow: var(--shadow-sm); }
.conditions-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--space-2); }
.condition-item { display: flex; align-items: center; gap: var(--space-2); padding: var(--space-2); border: 1px solid var(--card-border); border-radius: var(--radius-md); background: var(--card-bg); }
.condition-icon { width: 36px; height: 36px; display: grid; place-items: center; border-radius: var(--radius-md); background: var(--surface-muted-translucent); }
.card-icon { width: 44px; height: 44px; border-radius: var(--radius-md); display: grid; place-items: center; background: var(--surface-muted-translucent); color: var(--brand-700); }
.card-icon.success { background: color-mix(in srgb, var(--success-600) 18%, transparent); color: var(--success-600); }
.card-icon.warning { background: color-mix(in srgb, var(--warning-600) 18%, transparent); color: var(--warning-600); }
.card-icon.danger { background: color-mix(in srgb, var(--danger-600) 18%, transparent); color: var(--danger-600); }
.card-icon.info { background: color-mix(in srgb, var(--info-600) 18%, transparent); color: var(--info-600); }
.card-icon.accent { background: color-mix(in srgb, var(--brand-600) 18%, transparent); color: var(--brand-700); }

.health-indicator { display: flex; align-items: center; gap: var(--space-2); padding: var(--space-2) var(--space-3); background: var(--surface-muted-translucent); border-radius: var(--radius-md); }
.health-dot, .ws-status-dot { width: 12px; height: 12px; border-radius: 50%; }
.health-dot.healthy, .ws-status-dot.connected { background: var(--success-600); animation: pulse 2s infinite; }
.health-dot.warning { background: var(--warning-600); }
.health-dot.error { background: var(--danger-600); }
.ws-status-dot.disconnected { background: var(--warning-600); }

.training-progress-container { margin-top: var(--space-2); padding: var(--space-3); background: var(--surface-muted-translucent); border-radius: var(--radius-md); }
.progress-bar-wrapper { width: 100%; height: 8px; background: var(--surface-muted-translucent); border-radius: 999px; overflow: hidden; margin-bottom: var(--space-1); }
.progress-text { font-size: 0.9rem; color: var(--color-text-muted); }

.card-badge { padding: 4px 12px; border-radius: 12px; font-size: 0.8rem; font-weight: 700; text-transform: uppercase; }
.badge-success { background: color-mix(in srgb, var(--success-600) 18%, transparent); color: var(--success-600); }
.badge-warning { background: color-mix(in srgb, var(--warning-600) 18%, transparent); color: var(--warning-600); }
.badge-error { background: color-mix(in srgb, var(--danger-600) 18%, transparent); color: var(--danger-600); }
.badge-info { background: color-mix(in srgb, var(--info-600) 20%, transparent); color: var(--info-600); }

.metric-row { display: flex; justify-content: space-between; align-items: center; padding: var(--space-2) 0; border-bottom: 1px solid var(--border-200); }
.metric-row:last-child { border-bottom: none; }
.metric-label { color: var(--color-text-muted); font-size: 0.95rem; }
.metric-value { font-weight: 700; color: var(--color-text-strong); font-size: 1.05rem; }

.btn-group { display: flex; gap: var(--space-2); flex-wrap: wrap; margin-top: var(--space-2); }

.model-badge { padding: 4px 8px; border-radius: 12px; font-size: 0.85rem; font-weight: 600; }
.model-good { background: color-mix(in srgb, var(--success-600) 16%, transparent); color: var(--success-600); }
.model-average { background: color-mix(in srgb, var(--warning-600) 16%, transparent); color: var(--warning-600); }
.model-poor { background: color-mix(in srgb, var(--danger-600) 16%, transparent); color: var(--danger-600); }

.drift-summary { background: var(--surface-muted-translucent); border-radius: var(--radius-lg); padding: var(--space-3); }
.drift-list { list-style: none; padding: 0; margin: 0; display: grid; gap: var(--space-2); }
.drift-list li { padding-bottom: var(--space-2); border-bottom: 1px solid var(--border-200); }
.drift-list li:last-child { border-bottom: none; }

.metric-chip { display: inline-flex; align-items: center; padding: 4px 10px; border-radius: 999px; background: color-mix(in srgb, var(--brand-600) 14%, transparent); color: var(--brand-700); font-weight: 600; }
.plant-search-hint { color: var(--color-text-muted); }

.risk-badge { padding: 0.25rem 0.75rem; border-radius: 1rem; font-size: 0.875rem; font-weight: 600; text-transform: uppercase; display: inline-flex; align-items: center; gap: var(--space-1); }
.risk-low { background: color-mix(in srgb, var(--success-600) 18%, transparent); color: var(--success-600); }
.risk-moderate { background: color-mix(in srgb, var(--warning-600) 20%, transparent); color: var(--warning-600); }
.risk-high { background: color-mix(in srgb, var(--danger-600) 18%, transparent); color: var(--danger-600); }
.risk-critical { background: color-mix(in srgb, var(--danger-600) 30%, transparent); color: var(--danger-600); animation: pulse 2s infinite; }

.unit-card { border: 1px solid var(--card-border); border-radius: var(--radius-md); padding: var(--space-3); margin-bottom: var(--space-3); background: var(--card-bg); transition: box-shadow var(--motion-normal), border-color var(--motion-normal); box-shadow: var(--shadow-sm); }
.unit-card:hover { box-shadow: var(--shadow-md); }
.unit-card.has-critical { border-left: 4px solid var(--danger-600); }
.unit-card.has-high { border-left: 4px solid var(--warning-600); }

.risk-item { background: var(--surface-muted-translucent); border-radius: var(--radius-md); padding: var(--space-3); margin-bottom: var(--space-2); }
.recommendation { padding: var(--space-2) var(--space-3); background: color-mix(in srgb, var(--info-600) 12%, transparent); border-left: 3px solid var(--info-600); margin-bottom: var(--space-2); border-radius: var(--radius-md); }

.modal { display: none; position: fixed; inset: 0; align-items: center; justify-content: center; background: color-mix(in srgb, var(--color-bg) 65%, transparent); padding: var(--space-4); z-index: 1100; }
.modal.show, .modal.is-open, .modal.visible { display: flex; }
.modal-dialog { background: var(--card-bg); border: 1px solid var(--card-border); border-radius: var(--radius-lg); padding: var(--space-4); width: min(900px, 100%); box-shadow: var(--shadow-lg); }
.modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-2); }
.modal-body { display: grid; gap: var(--space-3); }

.progress-bar { height: 10px; border-radius: 999px; background: var(--surface-muted-translucent); overflow: hidden; }
.progress-bar .progress-fill { background: linear-gradient(90deg, var(--brand-600), var(--brand-700)); height: 100%; width: 0; }

/* Disease monitoring cards */
.risk-card { position: relative; overflow: hidden; color: var(--color-text); }
.risk-card::after { content: ''; position: absolute; inset: 0; background: linear-gradient(135deg, color-mix(in srgb, var(--danger-600) 28%, transparent), color-mix(in srgb, var(--warning-600) 24%, transparent)); opacity: 0.12; }
.risk-card .stat-icon { background: color-mix(in srgb, var(--danger-600) 14%, transparent); color: var(--danger-600); }

/* System overview progress */
.progress-track { width: 100%; height: 8px; border-radius: 999px; background: var(--surface-muted-translucent); overflow: hidden; }
.progress-track .progress-fill { height: 100%; background: linear-gradient(90deg, var(--brand-600), var(--brand-700)); border-radius: inherit; }

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}

@media (max-width: 768px) {
  .header-actions { justify-content: flex-start; }
}
