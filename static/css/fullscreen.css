:root{
  --bar-bg: color-mix(in srgb, var(--color-bg) 75%, transparent);
  --chip-bg: color-mix(in srgb, var(--card-bg) 70%, transparent);
  --chip-text: var(--color-text-strong);
  --accent: var(--brand-600);
  --success: var(--success-600);
  --warning: var(--warning-600);
  --danger:  var(--danger-600);
}

* { box-sizing: border-box; }

html, body {
  margin: 0;
  height: 100%;
  background: var(--color-bg);
  color: var(--color-text-strong);
  font-family: var(--font-sans);
}

/* Top sensor/status bar */
.topbar {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  display: flex;
  gap: .5rem;
  align-items: center;
  padding: .5rem .75rem;
  background: var(--bar-bg);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  z-index: 10;
  border-bottom: 1px solid color-mix(in srgb, var(--color-text-muted) 18%, transparent);
}

.brand { display: flex; align-items: center; gap: .5rem; font-weight: 700; letter-spacing: .2px; margin-right: .5rem; }

.pulse {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: var(--danger);
  box-shadow: 0 0 0 0 color-mix(in srgb, var(--danger) 70%, transparent);
  animation: pulse 2s infinite;
}
.pulse.connected { background: var(--success); box-shadow: 0 0 0 0 color-mix(in srgb, var(--success) 60%, transparent); }

@keyframes pulse {
  0% { box-shadow: 0 0 0 0 color-mix(in srgb, var(--color-text-strong) 50%, transparent); }
  70% { box-shadow: 0 0 0 10px color-mix(in srgb, var(--color-text-strong) 0%, transparent); }
  100% { box-shadow: 0 0 0 0 color-mix(in srgb, var(--color-text-strong) 0%, transparent); }
}

.chips { display: flex; flex-wrap: wrap; gap: .5rem; margin-left: auto; }

.chip {
  display: inline-flex;
  align-items: center;
  gap: .35rem;
  padding: .35rem .6rem;
  border-radius: 999px;
  background: var(--chip-bg);
  color: var(--chip-text);
  font-size: .85rem;
  font-weight: 600;
  border: 1px solid color-mix(in srgb, var(--color-text-muted) 18%, transparent);
  white-space: nowrap;
}
.chip small { opacity: .8; font-weight: 500; }
.chip.status-ok    { border-color: color-mix(in srgb, var(--success) 45%, transparent); }
.chip.status-warn  { border-color: color-mix(in srgb, var(--warning) 45%, transparent); }
.chip.status-bad   { border-color: color-mix(in srgb, var(--danger) 45%, transparent); }

.updated { margin-left: .5rem; font-size: .8rem; opacity: .8; }

/* Video fills available viewport under the topbar */
.stage { position: fixed; inset: 0; display: grid; place-items: center; padding-top: 48px; }
.stage img, .stage video { max-width: 100%; max-height: 100%; object-fit: contain; display: block; background: var(--color-bg); }

/* Floating take-photo button */
.fab {
  position: fixed;
  right: 16px;
  bottom: 16px;
  width: 56px;
  height: 56px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--brand-600), var(--brand-700));
  color: var(--color-on-brand);
  display: grid;
  place-items: center;
  border: none;
  cursor: pointer;
  box-shadow: 0 10px 20px color-mix(in srgb, var(--color-bg) 65%, transparent);
  z-index: 20;
  transition: transform .15s ease, box-shadow .15s ease, opacity .2s ease;
}
.fab:hover { transform: translateY(-1px); box-shadow: 0 12px 24px color-mix(in srgb, var(--color-bg) 70%, transparent); }
.fab:active { transform: translateY(0); }
.fab[disabled] { opacity: .6; cursor: not-allowed; }
.fab i { font-style: normal; font-size: 20px; }

/* Toasts */
.toast {
  position: fixed;
  right: 16px;
  bottom: 84px;
  background: color-mix(in srgb, var(--color-bg) 95%, transparent);
  color: var(--color-text);
  border: 1px solid color-mix(in srgb, var(--color-text-muted) 18%, transparent);
  border-left: 4px solid var(--success);
  padding: .75rem 1rem;
  border-radius: 10px;
  box-shadow: 0 10px 30px color-mix(in srgb, var(--color-bg) 65%, transparent);
  opacity: 0;
  transform: translateY(8px);
  transition: all .2s ease;
  z-index: 30;
  max-width: min(90vw, 360px);
  font-size: .95rem;
}
.toast.show { opacity: 1; transform: translateY(0); }
.toast.error { border-left-color: var(--danger); }

/* Compact on small screens */
@media (max-width: 640px) {
  .chips { gap: .35rem; }
  .chip { font-size: .78rem; padding: .28rem .5rem; }
}
