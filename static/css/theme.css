/* --- SYSGrow Design Tokens (Light + Dark) --- */

/*
 * Standard Breakpoints (use these values in @media queries):
 *   xs  480px   — small phones
 *   sm  640px   — large phones / small tablets
 *   md  768px   — tablets
 *   lg  1024px  — laptops / landscape tablets
 *   xl  1280px  — desktops
 */

:root {
  /* Typography */
  --font-sans:    "Source Sans 3", system-ui, -apple-system, "Segoe UI", sans-serif;
  --font-heading: "Outfit", system-ui, -apple-system, "Segoe UI", sans-serif;
  --font-mono:    ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;

  /* Brand greens */
  --brand-950: #0a2a1f;   /* deep forest */
  --brand-800: #14532d;   /* evergreen */
  --brand-700: #166534;   /* leaf (primary hover) */
  --brand-600: #4E7400;   /* leaf (primary) */
  --brand-500: #22c55e;   /* lime accent */
  --brand-300: #e3ffaa;

  /* Supporting accents */
  --sky-500:   #06b6d4;   /* irrigation/telemetry accent */
  --earth-600: #92400e;   /* warm earth for highlights */
  --earth-400: #d97706;
  --earth-300: #fbbf24;
  --accent-growth: #10b981;
  --accent-soil: #92400e;
  --accent-water: #0ea5e9;
  --accent-sun: #f59e0b;
  --accent-harvest: #dc2626;
  
  /* Enhanced gradients */
  --gradient-primary: linear-gradient(135deg, var(--brand-500) 0%, var(--brand-600) 100%);
  --gradient-card: linear-gradient(180deg, var(--card-bg) 0%, color-mix(in srgb, var(--card-bg) 96%, var(--brand-500)) 100%);
  --gradient-success: linear-gradient(135deg, var(--success-500) 0%, var(--success-600) 100%);
  
  
  /* Core surfaces + text (light) */
  --bg-0: #f0f2f5;        /* page background - slightly darker for contrast */
  --bg-1: #ffffff;        /* cards, panels - pure white */
  --bg-2: #f8fafc;        /* subtler surfaces / tables */
  --bg-3: #ffffff;        /* elevated surfaces */
  --bg-4: #e2e8f0;        /* highlights */
  --bg-5: #64748b;        /* accents */

  --text-strong: #111827; /* titles */
  --text-strong-alt: #0f172a;
  --text:        #334155; /* body - softer black */
  --text-muted:  #64748b; /* subtitles, hints */

  /* Borders + radii + shadows */
  --border:     #e2e8f0;
  --radius-2:   var(--radius-md); /* @deprecated — use --radius-md (8px)  */
  --radius-3:   var(--radius-lg); /* @deprecated — use --radius-lg (12px) */
  --shadow-sm:  0 1px 3px rgba(0,0,0,0.1);
  --shadow-md:  0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06);
  --shadow-lg:  0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05);
  --content-compact: 1200px;
  --page-gutter: 18px;
  /* --section-gap intentionally NOT overridden here; use tokens.css value (var(--space-6)) */

  /* Semantic */
  --success-600: #15803d;  --success-500: #10b981; --success-300: #57dd8896; --success-100: #dcfce7;
  --warning-600: #b45309;  --warning-500: #f59e0b; --warning-300: #fbbf2480; --warning-100: #fff7ed;
  --danger-600:  #b91c1c;  --danger-500:  #ef4444; --danger-300:  #fee2e280; --danger-100:  #fee2e2;
  --error-600:   #b91c1c;  --error-500:   #ef4444; --error-300:   #fee2e280; --error-100:   #fee2e2;
  --info-600:    #075985;  --info-500:    #0ea5e9; --info-300: #7dd3fc;      --info-100:    #e0f2fe;

  /* --- App-level aliases (preferred in components) --- */
  /* Surfaces */
  --color-bg:        var(--bg-0);
  --color-surface:   var(--bg-1);
  --color-surface-soft: #f8fafc;
  --color-elevated:  var(--bg-1);
  --surface-accent-subtle: color-mix(in srgb, var(--brand-500) 3%, var(--card-bg));
  --surface-success-subtle: color-mix(in srgb, var(--success-500) 3%, var(--card-bg));
  --surface-warning-subtle: color-mix(in srgb, var(--warning-500) 3%, var(--card-bg));
  --surface-translucent: color-mix(in srgb, var(--color-surface) 92%, transparent);
  --surface-strong-translucent: color-mix(in srgb, var(--color-surface) 96%, transparent);
  --surface-muted-translucent: color-mix(in srgb, var(--bg-2) 92%, transparent);
  --card-bg: var(--color-surface);
  --card-bg-muted: var(--color-surface-soft);
  --card-border: var(--border);
  --card-shadow: var(--shadow-sm);

  --brand-translucent-light: color-mix(in srgb, var(--brand-500) 92%, transparent);
  --brand-translucent: color-mix(in srgb, var(--brand-600) 92%, transparent);
  --brand-translucent-strong: color-mix(in srgb, var(--brand-600) 96%, transparent);
  --brand-translucent-hover: color-mix(in srgb, var(--brand-700) 92%, transparent);

  /* Text */
  --color-text:       var(--text);
  --color-text-strong:var(--text-strong);
  --color-text-strong-alt: var(--text-strong-alt);
  --color-text-muted: var(--text-muted);
  --color-on-brand:   #ffffff;
  --chip-bg: var(--color-surface);
  --chip-border: var(--border);
  --pill-bg: var(--color-surface-alt);
  --pill-border: var(--border);
  --muted-text: var(--color-text-muted);
  --heading-text: var(--color-text-strong);

  /* Legacy/bridge aliases for feature pages */
  --primary-text-color:   var(--color-text);
  --secondary-text-color: var(--color-text-muted);
  --text-primary:         var(--color-text-strong);
  --text-secondary:       var(--color-text);
  --text-muted:           var(--color-text-muted);
  --border-color:         var(--border);
  --bg-primary:           var(--color-bg);
  --bg-secondary:         var(--color-surface);
  --bg-tertiary:          var(--bg-2);
  --brand-primary:        var(--brand-600);
  
  --button-color:         var(--brand-600);
  --button-hover-color:   var(--brand-700);
  --button-secondary-color: var(--earth-600);

  /* Borders */
  --border-200: var(--border);
  --border-300: #cbd5e1;
  --border-strong: #1f2937;

  /* Radii */
  --radius-sm: 6px;
  --radius-md: 8px;
  --radius-lg: 12px;

  /* Spacing scale */
  --space-1: 0.25rem;
  --space-2: 0.5rem;
  --space-3: 0.75rem;
  --space-4: 1rem;
  --space-5: 1.25rem;
  --space-6: 1.5rem;
  --space-7: 2rem;
  --space-8: 2.5rem;

  /* Motion & Transitions */
  --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
  --transition-normal: 250ms cubic-bezier(0.4, 0, 0.2, 1);
  --transition-slow: 350ms cubic-bezier(0.4, 0, 0.2, 1);
  --motion-fast: var(--transition-fast);
  --motion-normal: var(--transition-normal);

  /* Focus & Accessibility */
  --focus-ring-color: rgba(34, 197, 94, 0.4); /* brand-500 with opacity */
  --focus-ring: 0 0 0 3px var(--focus-ring-color);

  /* Chart / sensor-visualization tokens
     Read at runtime via SYSGrow.cssVar() in dashboard/main.js.
     Solid colours are for dataset borders; *-bg variants for fill areas. */
  --chart-temperature:    #ef4444;
  --chart-temperature-bg: color-mix(in srgb, #ef4444 12%, transparent);
  --chart-humidity:       #4dabf7;
  --chart-humidity-bg:    color-mix(in srgb, #4dabf7 12%, transparent);
  --chart-soil:           #8b5a2b;
  --chart-soil-bg:        color-mix(in srgb, #8b5a2b 12%, transparent);
  --chart-grid:           rgba(0,0,0,0.05);
}

@media (prefers-color-scheme: dark) {
  :root {
    /* System dark mode: slate-inspired, high-contrast surfaces */
    --bg-0: #0f172a;  /* page background */
    --bg-1: #1e293b;  /* shell background */
    --bg-2: #111827;  /* subtle surfaces / tables */
    --bg-3: #1e293b;  /* cards / panels */
    --bg-4: #334155;  /* elevated surfaces */
    --bg-5: #6b88b1;  /* accents */

    --text-strong: #f9fafb;
    --text:        #e2e8f0;
    --text-muted:  #94a3b8;

    --border: #334155;
    --shadow: 0 20px 60px rgba(0,0,0,.5);

    --chip-bg: #1e293b;
    --chip-border: #334155;
    --pill-bg: var(--color-surface-alt);
    --pill-border: var(--border);
    --card-bg: var(--bg-3);
    --card-bg-muted: var(--bg-2);
    --card-border: var(--border);
    --card-shadow: none;

    /* keep aliases in sync */
    --color-bg:        var(--bg-0);
    --color-surface:   var(--bg-3);
    --color-surface-alt: var(--bg-4);
    --color-surface-hover: color-mix(in srgb, var(--bg-3) 90%, var(--bg-4) 10%);
    --color-accent:    var(--bg-5);
    --color-elevated:  var(--bg-2);

    --color-text:        var(--text);
    --color-text-strong: var(--text-strong);
    --color-text-muted:  var(--text-muted);

    /* dial down shadows in dark */
    --shadow-sm: none;
    --shadow-md: none;
    --shadow-lg: none;
    
    --focus-ring-color: rgba(34, 197, 94, 0.6);
    --chart-grid: rgba(255,255,255,0.07);
  }
}

/* Explicit theme overrides (manual toggle wins over system preference) */

:root[data-theme="dark"] {
  /* Match prefers-color-scheme: dark overrides */
  --bg-0: #0f172a;
  --bg-1: #1e293b;
  --bg-2: #111827;
  --bg-3: #1e293b;
  --bg-4: #334155;
  --bg-5: #6b88b1;  /* accents */

  --text-strong: #f9fafb;
  --text:        #e2e8f0;
  --text-muted:  #94a3b8;

  --border: #334155;

  --color-bg:        var(--bg-0);
  --color-surface:   var(--bg-3);
  --color-surface-alt: var(--bg-4);
  --color-surface-hover: color-mix(in srgb, var(--bg-3) 90%, var(--bg-4) 10%);
  --color-elevated:  var(--bg-2);
  --color-accent:    var(--bg-5);
  --card-bg: var(--bg-3);
  --card-bg-muted: var(--bg-2);
  --card-border: var(--border);
  --card-shadow: none;

  --color-text:        var(--text);
  --color-text-strong: var(--text-strong);
  --color-text-muted:  var(--text-muted);

  --shadow-sm: none;
  --shadow-md: none;
  --shadow-lg: none;
  
  --focus-ring-color: rgba(34, 197, 94, 0.6);
  --chart-grid: rgba(255,255,255,0.07);
}

:root[data-theme="light"] {
  /* Re-assert light theme tokens when user forces light mode
     even if system prefers dark. */
  --bg-0: #f5f7fa;
  --bg-1: #ffffff;
  --bg-2: #f1f5f9;
  --bg-3: #ffffff;
  --bg-4: #e2e8f0;
  --bg-5: #6b88b1;  /* accents */

  --text-strong: #111827;
  --text:        #334155;
  --text-muted:  #64748b;

  --border: #e2e8f0;

  --color-bg:        var(--bg-0);
  --color-surface:   var(--bg-1);
  --color-surface-hover: color-mix(in srgb, var(--bg-1) 95%, var(--bg-2) 5%);
  --color-elevated:  var(--bg-1);
  --color-surface-alt: var(--bg-4);
  --color-accent:    var(--bg-5);
  --card-bg: var(--bg-1);
  --card-bg-muted: var(--bg-2);
  --card-border: var(--border);
  --card-shadow: var(--shadow-lg);

  --color-text:       var(--text);
  --color-text-strong:var(--text-strong);
  --color-text-muted: var(--text-muted);

  --shadow-sm:  0 1px 2px rgba(0,0,0,.05);
  --shadow-md:  0 4px 6px -1px rgba(0,0,0,.1), 0 2px 4px -1px rgba(0,0,0,.06);
  --shadow-lg:  0 10px 15px -3px rgba(0,0,0,.1), 0 4px 6px -2px rgba(0,0,0,.05);
  
  --focus-ring-color: rgba(34, 197, 94, 0.4);
}

/* Quick utilities shared by base.css */
:root {
  --ring: var(--focus-ring);
}
