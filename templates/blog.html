{% extends 'base.html' %}

{% block title %}Blog - SYSGrow{% endblock %}

{% block body_class %}blog-page{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/blog.css') }}">
{% endblock %}

{% block content %}
<div class="page-shell">
    <header class="blog-header">
        <div class="blog-header-content">
            <h1><i class="fas fa-newspaper"></i> SYSGrow Blog</h1>
            <p>Tips, guides, and insights for smart growing</p>
        </div>
        <div class="blog-search-container">
            <div class="search-box">
                <i class="fas fa-search" aria-hidden="true"></i>
                <input type="text"
                       id="blog-search"
                       placeholder="Search posts..."
                       aria-label="Search blog posts"
                       autocomplete="off">
            </div>
        </div>
    </header>

    <!-- Featured Post -->
    <section class="featured-section" id="featured-section">
        <div class="featured-post" id="featured-post">
            <div class="loading-state">
                <i class="fas fa-spinner fa-spin" aria-hidden="true"></i>
                <p>Loading featured post...</p>
            </div>
        </div>
    </section>

    <!-- Profiles Callout -->
    <section class="profiles-callout">
        <div class="profiles-callout-card">
            <div class="profiles-callout-icon">
                <i class="fas fa-layer-group" aria-hidden="true"></i>
            </div>
            <div class="profiles-callout-body">
                <h2>Condition Profiles</h2>
                <p>Save and reuse plant-stage thresholds, then share the setups that worked best.</p>
                <a class="btn btn-outline btn-sm" href="{{ url_for('ui.blog_post', slug='condition-profiles') }}">
                    Read the guide
                </a>
            </div>
        </div>
    </section>

    <!-- Category Filters -->
    <section class="categories-section">
        <div class="category-filters" id="category-filters">
            <button class="category-btn active" data-category="all">
                <i class="fas fa-th-large"></i> All
            </button>
            <!-- Categories loaded dynamically -->
        </div>
    </section>

    <!-- Posts Grid -->
    <section class="posts-section">
        <div class="posts-header">
            <h2 id="posts-title">Latest Posts</h2>
            <span class="posts-count" id="posts-count">Loading...</span>
        </div>
        <div class="posts-grid" id="posts-grid">
            <div class="loading-state">
                <i class="fas fa-spinner fa-spin" aria-hidden="true"></i>
                <p>Loading posts...</p>
            </div>
        </div>

        <!-- Load More -->
        <div class="load-more-container hidden" id="load-more-container">
            <button class="btn btn-outline" id="load-more-btn">
                <i class="fas fa-plus"></i> Load More Posts
            </button>
        </div>
    </section>

    <!-- Empty State (hidden by default) -->
    <section class="empty-state hidden" id="empty-state">
        <i class="fas fa-newspaper"></i>
        <h3>No posts found</h3>
        <p>Try adjusting your search or category filter</p>
        <button class="btn btn-outline" id="clear-filters-btn">
            <i class="fas fa-times"></i> Clear Filters
        </button>
    </section>
</div>

<script type="module">
    import { initBlogPage } from "{{ url_for('static', filename='js/blog.js') }}";
    initBlogPage();
</script>
{% endblock %}
