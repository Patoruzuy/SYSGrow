{% extends 'base.html' %}
{% import "macros.html" as ui %}

{% block body_class %}auth-page{% endblock %}

{% block content %}
<div class="main-content login-container">
  <div class="login-wrapper">
    <img src="{{ url_for('static', filename='images/logo.jpg') }}" class="logo-image" alt="SYSGrow logo">
    <h2 class="auth-title">Forgot Password</h2>
    <p class="auth-subtitle">Choose how you'd like to reset your password:</p>

    {# Option 1: Email Recovery #}
    <div class="recovery-option">
      <h3 class="recovery-option-title"><i class="fas fa-envelope"></i> Reset via Email</h3>
      <p class="recovery-option-desc">We'll send you a link to reset your password.</p>
      <form method="POST" action="{{ url_for('auth.forgot_password') }}" novalidate>
        <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
        {{ ui.form_field('identifier', 'Username or Email', required=True, placeholder='Enter your username or email') }}
        <button type="submit" class="auth-submit">Send Reset Link</button>
      </form>
    </div>

    {# Divider #}
    <div class="recovery-divider">
      <span>or</span>
    </div>

    {# Option 2: Recovery Code #}
    <div class="recovery-option">
      <h3 class="recovery-option-title"><i class="fas fa-key"></i> Use Recovery Code</h3>
      <p class="recovery-option-desc">Use one of your pre-generated recovery codes (works offline).</p>
      <a href="{{ url_for('auth.recover') }}" class="auth-submit auth-submit--secondary">
        <i class="fas fa-shield-alt"></i> Use Recovery Code
      </a>
    </div>

    <div class="auth-footer">
      <p>Remember your password?</p>
      <a href="{{ url_for('auth.login') }}" class="btn-register-link">
        <i class="fas fa-sign-in-alt"></i> Back to Login
      </a>
    </div>
  </div>
</div>
{% endblock %}
