{% extends "base.html" %}
{% import "macros.html" as ui %}

{% block title %}Notifications - SYSGrow{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/components/notifications.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/notifications-page.css') }}">
{% endblock %}

{% block content %}
<div class="page-shell">
  {{ ui.page_header(
    title="Notifications",
    icon="bell",
    subtitle="Manage your alerts and system messages",
    actions='<button class="btn btn-secondary me-2" id="mark-all-read" title="Mark all as read"><i class="fas fa-check-double me-1"></i> Mark All Read</button><button class="btn btn-secondary" id="refresh-notifications" title="Refresh"><i class="fas fa-sync-alt"></i></button>'
  ) }}

  <div class="notifications-filters mb-4">
    <button class="filter-btn active" data-filter="all">All</button>
    <button class="filter-btn" data-filter="unread">Unread</button>
    <button class="filter-btn" data-filter="irrigation">Irrigation</button>
    <button class="filter-btn" data-filter="alerts">Alerts</button>
    <button class="filter-btn" data-filter="system">System</button>
  </div>

  {% call ui.content_card(title="Messages", icon="envelope") %}
    <div class="notifications-list-header d-flex justify-content-between align-items-center mb-3">
      <span id="notifications-count">Loading...</span>
      <button class="btn btn-link text-danger p-0" id="clear-all" title="Clear all notifications">
        <i class="fas fa-trash-alt me-1"></i> Clear All
      </button>
    </div>

    <div class="notifications-list" id="notifications-list">
      <div class="notifications-loading text-center py-5">
        <i class="fas fa-spinner fa-spin fa-2x"></i>
      </div>
    </div>

    <div class="pagination d-flex align-items-center justify-content-center mt-4" id="pagination" style="display: none;">
      <button class="btn btn-outline-secondary me-2" id="prev-page" disabled>
        <i class="fas fa-chevron-left"></i> Previous
      </button>
      <span class="pagination-info mx-3" id="pagination-info">Page 1</span>
      <button class="btn btn-outline-secondary ms-2" id="next-page">
        Next <i class="fas fa-chevron-right"></i>
      </button>
    </div>
  {% endcall %}
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/notifications-page.js') }}"></script>
{% endblock %}
