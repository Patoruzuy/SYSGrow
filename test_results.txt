============================= test session starts =============================
platform win32 -- Python 3.13.2, pytest-9.0.2, pluggy-1.6.0
rootdir: E:\Work\SYSGrow\backend
configfile: pyproject.toml
plugins: anyio-4.12.1, asyncio-1.3.0, cov-7.0.0, flask-1.3.0, timeout-2.4.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
timeout: 30.0s
timeout method: thread
timeout func_only: False
collected 419 items

tests\test_alert_integration.py .                                        [  0%]
tests\test_alert_service_dedupe.py .                                     [  0%]
tests\test_api.py FFF                                                    [  1%]
tests\test_api_devices_v2.py FFFF                                        [  2%]
tests\test_api_thresholds_recommended.py ..                              [  2%]
tests\test_api_updates.py ....                                           [  3%]
tests\test_architecture_refactor.py ....                                 [  4%]
tests\test_auth_security_routes.py ............                          [  7%]
tests\test_comprehensive_devices.py .                                    [  7%]
tests\test_connectivity_history.py ..                                    [  8%]
tests\test_connectivity_seeded.py ..                                     [  8%]
tests\test_consolidated_apis.py .                                        [  8%]
tests\test_dashboard_summary_regressions.py EE                           [  9%]
tests\test_device_health_service.py .                                    [  9%]
tests\test_efficiency_score_api.py .                                     [  9%]
tests\test_enhanced_dataset.py .                                         [ 10%]
tests\test_enhanced_handler.py ........                                  [ 11%]
tests\test_event_bus.py ..                                               [ 12%]
tests\test_growth_unit_apis.py .                                         [ 12%]
tests\test_harvest_cleanup.py .                                          [ 12%]
tests\test_harvest_complete.py .                                         [ 13%]
tests\test_irrigation_calculator.py .................................... [ 21%]
...........                                                              [ 24%]
tests\test_manual_irrigation_service.py ..                               [ 24%]
tests\test_ml_phase3_features.py ...........                             [ 27%]
tests\test_mqtt_client_factory.py .                                      [ 27%]
tests\test_mqtt_wrapper_callbacks.py ..                                  [ 28%]
tests\test_plant_grow_task.py ..                                         [ 28%]
tests\test_plant_irrigation_model_service.py .                           [ 28%]
tests\test_plant_journal_watering_endpoint.py F                          [ 29%]
tests\test_plant_thresholds.py ..........                                [ 31%]
tests\test_plants_data.py .                                              [ 31%]
tests\test_pump_calibration.py ......................................... [ 41%]
...                                                                      [ 42%]
tests\test_refactored_architecture.py ...                                [ 42%]
tests\test_run_server_regressions.py ..                                  [ 43%]
tests\test_sensor_polling_service.py ...                                 [ 44%]
tests\test_service_integration.py ..                                     [ 44%]
tests\test_settings_api.py .FFFF                                         [ 45%]
tests\test_startup_regressions.py ....F                                  [ 47%]
tests\test_state_history_csv.py ..                                       [ 47%]
tests\test_units_camera_api_contract.py .                                [ 47%]
tests\unit\domain\test_plant_journal_entity_regressions.py ...           [ 48%]
tests\unit\hardware\sensors\processors\test_priority_processor.py ...... [ 49%]
......                                                                   [ 51%]
tests\unit\irrigation\test_irrigation_reliability.py ......              [ 52%]
tests\unit\services\application\test_plant_sensor_controller.py ..       [ 53%]
tests\unit\services\hardware\test_climate_controller.py .....            [ 54%]
tests\unit\services\hardware\test_mqtt_sensor_service.py .........       [ 56%]
tests\unit\services\test_ai_smoke.py ................................... [ 64%]
.........                                                                [ 67%]
tests\unit\services\test_analytics_service.py .......................... [ 73%]
........                                                                 [ 75%]
tests\unit\services\test_analytics_service_sprint3.py ...........        [ 77%]
tests\unit\services\test_analytics_service_v2.py ......                  [ 79%]
tests\unit\services\test_auth_service_regressions.py ...                 [ 79%]
tests\unit\services\test_growth_service_sprint3.py .........             [ 82%]
tests\unit\services\test_hardware_services_sprint3.py ..............     [ 85%]
tests\unit\services\test_harvest_service.py .........                    [ 87%]
tests\unit\services\test_irrigation_ml_gating_no_fallback.py ....        [ 88%]
tests\unit\services\test_irrigation_workflow_sprint3.py ..............   [ 91%]
tests\unit\services\test_personalized_learning_condition_profiles.py ..  [ 92%]
tests\unit\services\test_plant_journal_watering.py ..                    [ 92%]
tests\unit\services\test_threshold_service_profiles.py ..                [ 93%]
tests\unit\test_ai_health_repository_recent_observations.py ...          [ 94%]
tests\unit\test_device_repository_friendly_name.py .                     [ 94%]
tests\unit\test_emitter_service.py .                                     [ 94%]
tests\unit\test_psychrometrics.py .................sss                   [ 99%]
tests\unit\utils\test_time_utils.py ...                                  [100%]

=================================== ERRORS ====================================
_ ERROR at setup of test_build_devices_summary_counts_active_from_is_active_and_sensors _
tests\test_dashboard_summary_regressions.py:78: in dashboard_api_module
    spec.loader.exec_module(module)
<frozen importlib._bootstrap_external>:1026: in exec_module
    ???
<frozen importlib._bootstrap>:488: in _call_with_frames_removed
    ???
app\blueprints\api\dashboard.py:24: in <module>
    from app.utils.time import utc_now
E   ImportError: cannot import name 'utc_now' from 'app.utils.time' (unknown location)
_ ERROR at setup of test_dashboard_summary_preserves_actuators_and_passes_them_to_unit_settings _
tests\test_dashboard_summary_regressions.py:78: in dashboard_api_module
    spec.loader.exec_module(module)
<frozen importlib._bootstrap_external>:1026: in exec_module
    ???
<frozen importlib._bootstrap>:488: in _call_with_frames_removed
    ???
app\blueprints\api\dashboard.py:24: in <module>
    from app.utils.time import utc_now
E   ImportError: cannot import name 'utc_now' from 'app.utils.time' (unknown location)
================================== FAILURES ===================================
_________________________ test_growth_unit_lifecycle __________________________
tests\test_api.py:45: in test_growth_unit_lifecycle
    assert response.status_code == 201
E   assert 401 == 201
E    +  where 401 = <WrapperTestResponse streamed [401 UNAUTHORIZED]>.status_code
---------------------------- Captured stdout setup ----------------------------
2026-02-19 19:16:25,073 - root - INFO - Logging initialized at level: INFO\n2026-02-19 19:16:25,178 - root - INFO - \u2705 Socket.IO initialized with CORS origins: *\n2026-02-19 19:16:25,901 - root - INFO - Seeded DeviceEnergyProfiles table with 16 default profiles.\n2026-02-19 19:16:25,902 - root - INFO - Seeded Plants table with 15 catalog entries.\n2026-02-19 19:16:25,906 - migration_mod - INFO - Migration 28 (irrigation_ml_context) completed successfully\n2026-02-19 19:16:25,908 - migration_mod - INFO - \u2705 Migration 029 (bayesian_threshold_columns) completed successfully\n2026-02-19 19:16:25,911 - migration_mod - INFO - \u2713 Created DiseaseOccurrence table\n2026-02-19 19:16:25,911 - migration_mod - INFO - \u2713 Created DiseasePredictionFeedback table\n2026-02-19 19:16:25,912 - migration_mod - INFO - \u2713 Created disease tracking indexes\n2026-02-19 19:16:25,912 - migration_mod - INFO - \u2705 Migration 30 (disease_tracking) completed successfully\n2026-02-19 19:16:25,912 - infrastructure.database.sqlite_handler - ERROR - Failed to run migration 029_disease_tracking.py: UNIQUE constraint failed: Migrations.migration_id\n2026-02-19 19:16:25,915 - migration_mod - INFO - Adding light_mode column to GrowthUnits...\n2026-02-19 19:16:25,916 - migration_mod - INFO - \u2713 Added light_mode column to GrowthUnits\n2026-02-19 19:16:25,920 - migration_mod - INFO - Added column aqi_threshold_override to Plants\n2026-02-19 19:16:25,920 - migration_mod - INFO - \u2713 Migration add_plant_threshold_overrides completed successfully\n2026-02-19 19:16:25,923 - migration_mod - INFO - \u2713 Migration add_plant_actuators completed successfully\n2026-02-19 19:16:25,925 - migration_mod - INFO - \u2713 Migration rename_light_intensity_threshold_to_lux_threshold completed successfully\n2026-02-19 19:16:25,928 - migration_mod - INFO - Column air_quality_threshold already exists in GrowthUnits\n2026-02-19 19:16:25,928 - migration_mod - INFO - Column air_quality_threshold_override already exists in Plants\n2026-02-19 19:16:25,928 - migration_mod - INFO - Old column co2_ppm not found in PlantReadings, adding co2\n2026-02-19 19:16:25,929 - migration_mod - INFO - Old column voc_ppb not found in PlantReadings, adding voc\n2026-02-19 19:16:25,929 - migration_mod - INFO - Old column aqi not found in PlantReadings, adding air_quality\n2026-02-19 19:16:25,930 - migration_mod - INFO - Old column co2_ppm not found in MLTrainingData, adding co2\n2026-02-19 19:16:25,930 - migration_mod - ERROR - Migration standardize_sensor_columns failed: no such table: MLTrainingData\nTraceback (most recent call last):\n  File "E:\\Work\\SYSGrow\\backend\\infrastructure\\database\\migrations\\034_standardize_sensor_columns.py", line 82, in migrate\n    _rename_or_copy(cursor, "MLTrainingData", old_name="co2_ppm", new_name="co2", column_type="REAL")\n    ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "E:\\Work\\SYSGrow\\backend\\infrastructure\\database\\migrations\\034_standardize_sensor_columns.py", line 46, in _rename_or_copy\n    cursor.execute(\n    ~~~~~~~~~~~~~~^\n        f"ALTER TABLE {table} ADD COLUMN {new_name} {column_type} {default_clause}"\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\nsqlite3.OperationalError: no such table: MLTrainingData\n2026-02-19 19:16:25,934 - infrastructure.database.sqlite_handler - ERROR - \u274c Migration 034_standardize_sensor_columns.py failed\nRunning migration 051 on <infrastructure.database.sqlite_handler.SQLiteDatabaseHandler object at 0x000002137586C7D0>\n2026-02-19 19:16:25,952 - infrastructure.database.sqlite_handler - ERROR - Failed to run migration 051_add_actuator_config_unique_index.py: expected str, bytes or os.PathLike object, not SQLiteDatabaseHandler\nRunning migration 052 on <infrastructure.database.sqlite_handler.SQLiteDatabaseHandler object at 0x000002137586C7D0>\n2026-02-19 19:16:25,956 - infrastructure.database.sqlite_handler - ERROR - Failed to run migration 052_add_recovery_codes.py: expected str, bytes or os.PathLike object, not SQLiteDatabaseHandler\n2026-02-19 19:16:25,959 - migration_mod - INFO - Migration 53 (irrigation_reliability_tables) completed successfully\n2026-02-19 19:16:25,974 - migration_mod - INFO - Adding 'lux' column to PlantReadings table\n2026-02-19 19:16:25,974 - migration_mod - INFO - \u2713 Migration add_lux_to_plant_readings completed successfully\n2026-02-19 19:16:25,980 - migration_mod - INFO - \u2713 Migration add_ph_ec_to_plant_readings completed successfully\n2026-02-19 19:16:25,985 - migration_mod - INFO - \u2713 Migration backfill_plant_soil_moisture_overrides completed successfully (15 plants updated)\n2026-02-19 19:16:35,091 - app.services.ai.model_registry - WARNING - No production version set for plant_health_regressor\n2026-02-19 19:16:35,091 - app.services.ai.model_registry - WARNING - No production version set for plant_health_classifier\n2026-02-19 19:16:35,096 - app.services.ai.model_registry - WARNING - No production version set for irrigation_threshold\n2026-02-19 19:16:35,096 - app.services.ai.model_registry - WARNING - No production version set for irrigation_response\n2026-02-19 19:16:35,096 - app.services.ai.model_registry - WARNING - No production version set for irrigation_duration\n2026-02-19 19:16:35,096 - app.services.ai.model_registry - WARNING - No production version set for irrigation_timing\n2026-02-19 19:16:35,097 - sensor_registry - INFO - Sensor registry initialized\n2026-02-19 19:16:35,097 - sensor_registry - INFO - Registered protocol 'GPIO' with adapter GPIOAdapter\n2026-02-19 19:16:35,097 - sensor_registry - INFO - Registered protocol 'I2C' with adapter GPIOAdapter\n2026-02-19 19:16:35,097 - sensor_registry - INFO - Registered protocol 'ADC' with adapter GPIOAdapter\n2026-02-19 19:16:35,097 - sensor_registry - INFO - Registered protocol 'mqtt' with adapter SYSGrowAdapter\n2026-02-19 19:16:35,097 - sensor_registry - INFO - Registered protocol 'wireless' with adapter SYSGrowAdapter\n2026-02-19 19:16:35,097 - sensor_registry - INFO - Registered protocol 'http' with adapter WiFiAdapter\n2026-02-19 19:16:35,097 - sensor_registry - INFO - Registered protocol 'zigbee' with adapter ZigbeeAdapter\n2026-02-19 19:16:35,097 - sensor_registry - INFO - Registered protocol 'zigbee2mqtt' with adapter Zigbee2MQTTAdapter\n2026-02-19 19:16:35,097 - sensor_registry - INFO - Registered protocol 'Modbus' with adapter ModbusAdapter\n2026-02-19 19:16:35,097 - sensor_registry - INFO - Protocol-based sensor adapters registered\n2026-02-19 19:16:35,111 - activity_log - INFO - [INFO] system_startup: Smart Agriculture System started\n2026-02-19 19:16:35,244 - root - INFO -  Registered blueprint: auth\n2026-02-19 19:16:35,244 - root - INFO -  Registered blueprint: ui\n2026-02-19 19:16:35,244 - root - INFO -  Registered blueprint: plants_api\n2026-02-19 19:16:35,244 - root - INFO -  Registered blueprint: disease\n2026-02-19 19:16:35,244 - root - INFO -  Registered blueprint: settings_api\n2026-02-19 19:16:35,244 - root - INFO -  Registered blueprint: growth_api\n2026-02-19 19:16:35,244 - root - INFO -  Registered blueprint: devices_api\n2026-02-19 19:16:35,244 - root - INFO -  Registered blueprint: dashboard_api\n2026-02-19 19:16:35,244 - root - INFO -  Registered blueprint: harvest\n2026-02-19 19:16:35,244 - root - INFO -  Registered blueprint: ml_base\n2026-02-19 19:16:35,244 - root - INFO -  Registered blueprint: ml_predictions\n2026-02-19 19:16:35,244 - root - INFO -  Registered blueprint: ml_models\n2026-02-19 19:16:35,244 - root - INFO -  Registered blueprint: ml_monitoring\n2026-02-19 19:16:35,244 - root - INFO -  Registered blueprint: ml_analytics\n2026-02-19 19:16:35,244 - root - INFO -  Registered blueprint: ml_retraining\n2026-02-19 19:16:35,244 - root - INFO -  Registered blueprint: ml_analysis\n2026-02-19 19:16:35,244 - root - INFO -  Registered blueprint: ml_readiness\n2026-02-19 19:16:35,244 - root - INFO -  Registered blueprint: ml_ab_testing\n2026-02-19 19:16:35,244 - root - INFO -  Registered blueprint: ml_continuous\n2026-02-19 19:16:35,244 - root - INFO -  Registered blueprint: ml_personalized\n2026-02-19 19:16:35,244 - root - INFO -  Registered blueprint: ml_training_data\n2026-02-19 19:16:35,244 - root - INFO -  Registered blueprint: health_api\n2026-02-19 19:16:35,245 - root - INFO -  Registered blueprint: help_api\n2026-02-19 19:16:35,245 - root - INFO -  Registered blueprint: blog_api\n2026-02-19 19:16:35,245 - root - INFO -  Registered blueprint: docs_api\n2026-02-19 19:16:35,253 - root - INFO - Skipping hardware bootstrap (bootstrap_runtime=False)
----------------------------- Captured log setup ------------------------------
INFO     root:config.py:725 Logging initialized at level: INFO\nINFO     root:extensions.py:80 \u2705 Socket.IO initialized with CORS origins: *\nINFO     root:sqlite_handler.py:1652 Seeded DeviceEnergyProfiles table with 16 default profiles.\nINFO     root:sqlite_handler.py:1615 Seeded Plants table with 15 catalog entries.\nINFO     migration_mod:028_irrigation_ml_context.py:97 Migration 28 (irrigation_ml_context) completed successfully\nINFO     migration_mod:029_bayesian_threshold_columns.py:57 \u2705 Migration 029 (bayesian_threshold_columns) completed successfully\nINFO     migration_mod:029_disease_tracking.py:80 \u2713 Created DiseaseOccurrence table\nINFO     migration_mod:029_disease_tracking.py:119 \u2713 Created DiseasePredictionFeedback table\nINFO     migration_mod:029_disease_tracking.py:134 \u2713 Created disease tracking indexes\nINFO     migration_mod:029_disease_tracking.py:137 \u2705 Migration 30 (disease_tracking) completed successfully\nERROR    infrastructure.database.sqlite_handler:sqlite_handler.py:109 Failed to run migration 029_disease_tracking.py: UNIQUE constraint failed: Migrations.migration_id\nINFO     migration_mod:030_add_light_mode_column.py:44 Adding light_mode column to GrowthUnits...\nINFO     migration_mod:030_add_light_mode_column.py:49 \u2713 Added light_mode column to GrowthUnits\nINFO     migration_mod:031_add_plant_threshold_overrides.py:44 Added column aqi_threshold_override to Plants\nINFO     migration_mod:031_add_plant_threshold_overrides.py:47 \u2713 Migration add_plant_threshold_overrides completed successfully\nINFO     migration_mod:032_add_plant_actuators.py:39 \u2713 Migration add_plant_actuators completed successfully\nINFO     migration_mod:033_rename_light_intensity_threshold_to_lux_threshold.py:79 \u2713 Migration rename_light_intensity_threshold_to_lux_threshold completed successfully\nINFO     migration_mod:034_standardize_sensor_columns.py:41 Column air_quality_threshold already exists in GrowthUnits\nINFO     migration_mod:034_standardize_sensor_columns.py:41 Column air_quality_threshold_override already exists in Plants\nINFO     migration_mod:034_standardize_sensor_columns.py:45 Old column co2_ppm not found in PlantReadings, adding co2\nINFO     migration_mod:034_standardize_sensor_columns.py:45 Old column voc_ppb not found in PlantReadings, adding voc\nINFO     migration_mod:034_standardize_sensor_columns.py:45 Old column aqi not found in PlantReadings, adding air_quality\nINFO     migration_mod:034_standardize_sensor_columns.py:45 Old column co2_ppm not found in MLTrainingData, adding co2\nERROR    migration_mod:034_standardize_sensor_columns.py:93 Migration standardize_sensor_columns failed: no such table: MLTrainingData\nTraceback (most recent call last):\n  File "E:\\Work\\SYSGrow\\backend\\infrastructure\\database\\migrations\\034_standardize_sensor_columns.py", line 82, in migrate\n    _rename_or_copy(cursor, "MLTrainingData", old_name="co2_ppm", new_name="co2", column_type="REAL")\n    ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "E:\\Work\\SYSGrow\\backend\\infrastructure\\database\\migrations\\034_standardize_sensor_columns.py", line 46, in _rename_or_copy\n    cursor.execute(\n    ~~~~~~~~~~~~~~^\n        f"ALTER TABLE {table} ADD COLUMN {new_name} {column_type} {default_clause}"\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\nsqlite3.OperationalError: no such table: MLTrainingData\nERROR    infrastructure.database.sqlite_handler:sqlite_handler.py:107 \u274c Migration 034_standardize_sensor_columns.py failed\nERROR    infrastructure.database.sqlite_handler:sqlite_handler.py:109 Failed to run migration 051_add_actuator_config_unique_index.py: expected str, bytes or os.PathLike object, not SQLiteDatabaseHandler\nERROR    infrastructure.database.sqlite_handler:sqlite_handler.py:109 Failed to run migration 052_add_recovery_codes.py: expected str, bytes or os.PathLike object, not SQLiteDatabaseHandler\nINFO     migration_mod:053_irrigation_reliability_tables.py:185 Migration 53 (irrigation_reliability_tables) completed successfully\nINFO     migration_mod:057_add_lux_to_plant_readings.py:31 Adding 'lux' column to PlantReadings table\nINFO     migration_mod:057_add_lux_to_plant_readings.py:35 \u2713 Migration add_lux_to_plant_readings completed successfully\nINFO     migration_mod:059_add_ph_ec_to_plant_readings.py:36 \u2713 Migration add_ph_ec_to_plant_readings completed successfully\nINFO     migration_mod:060_backfill_plant_soil_moisture_overrides.py:81 \u2713 Migration backfill_plant_soil_moisture_overrides completed successfully (15 plants updated)\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for plant_health_regressor\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for plant_health_classifier\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for irrigation_threshold\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for irrigation_response\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for irrigation_duration\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for irrigation_timing\nINFO     sensor_registry:registry.py:35 Sensor registry initialized\nINFO     sensor_registry:registry.py:53 Registered protocol 'GPIO' with adapter GPIOAdapter\nINFO     sensor_registry:registry.py:53 Registered protocol 'I2C' with adapter GPIOAdapter\nINFO     sensor_registry:registry.py:53 Registered protocol 'ADC' with adapter GPIOAdapter\nINFO     sensor_registry:registry.py:53 Registered protocol 'mqtt' with adapter SYSGrowAdapter\nINFO     sensor_registry:registry.py:53 Registered protocol 'wireless' with adapter SYSGrowAdapter\nINFO     sensor_registry:registry.py:53 Registered protocol 'http' with adapter WiFiAdapter\nINFO     sensor_registry:registry.py:53 Registered protocol 'zigbee' with adapter ZigbeeAdapter\nINFO     sensor_registry:registry.py:53 Registered protocol 'zigbee2mqtt' with adapter Zigbee2MQTTAdapter\nINFO     sensor_registry:registry.py:53 Registered protocol 'Modbus' with adapter ModbusAdapter\nINFO     sensor_registry:registry.py:320 Protocol-based sensor adapters registered\nINFO     activity_log:activity_logger.py:128 [INFO] system_startup: Smart Agriculture System started\nINFO     root:__init__.py:283  Registered blueprint: auth\nINFO     root:__init__.py:283  Registered blueprint: ui\nINFO     root:__init__.py:283  Registered blueprint: plants_api\nINFO     root:__init__.py:283  Registered blueprint: disease\nINFO     root:__init__.py:283  Registered blueprint: settings_api\nINFO     root:__init__.py:283  Registered blueprint: growth_api\nINFO     root:__init__.py:283  Registered blueprint: devices_api\nINFO     root:__init__.py:283  Registered blueprint: dashboard_api\nINFO     root:__init__.py:283  Registered blueprint: harvest\nINFO     root:__init__.py:283  Registered blueprint: ml_base\nINFO     root:__init__.py:283  Registered blueprint: ml_predictions\nINFO     root:__init__.py:283  Registered blueprint: ml_models\nINFO     root:__init__.py:283  Registered blueprint: ml_monitoring\nINFO     root:__init__.py:283  Registered blueprint: ml_analytics\nINFO     root:__init__.py:283  Registered blueprint: ml_retraining\nINFO     root:__init__.py:283  Registered blueprint: ml_analysis\nINFO     root:__init__.py:283  Registered blueprint: ml_readiness\nINFO     root:__init__.py:283  Registered blueprint: ml_ab_testing\nINFO     root:__init__.py:283  Registered blueprint: ml_continuous\nINFO     root:__init__.py:283  Registered blueprint: ml_personalized\nINFO     root:__init__.py:283  Registered blueprint: ml_training_data\nINFO     root:__init__.py:283  Registered blueprint: health_api\nINFO     root:__init__.py:283  Registered blueprint: help_api\nINFO     root:__init__.py:283  Registered blueprint: blog_api\nINFO     root:__init__.py:283  Registered blueprint: docs_api\nINFO     root:__init__.py:308 Skipping hardware bootstrap (bootstrap_runtime=False)
---------------------------- Captured stdout call -----------------------------
2026-02-19 19:16:35,263 - app.services.application.threshold_service - ERROR - Error fetching unit thresholds for 1: No item with that key
Traceback (most recent call last):
  File "E:\Work\SYSGrow\backend\app\services\application\threshold_service.py", line 361, in get_unit_thresholds
    data = row if isinstance(row, dict) else {k: row[k] for k in row}
                                                 ~~~^^^
IndexError: No item with that key
2026-02-19 19:16:35,264 - growth_api.units - INFO - Listing growth units via endpoint
2026-02-19 19:16:35,266 - app.middleware.api_auth - WARNING - Blocked unauthenticated POST to /api/v1/plants/units/1/plants from 127.0.0.1
------------------------------ Captured log call ------------------------------
ERROR    app.services.application.threshold_service:threshold_service.py:385 Error fetching unit thresholds for 1: No item with that key
Traceback (most recent call last):
  File "E:\Work\SYSGrow\backend\app\services\application\threshold_service.py", line 361, in get_unit_thresholds
    data = row if isinstance(row, dict) else {k: row[k] for k in row}
                                                 ~~~^^^
IndexError: No item with that key
INFO     growth_api.units:units.py:186 Listing growth units via endpoint
WARNING  app.middleware.api_auth:api_auth.py:85 Blocked unauthenticated POST to /api/v1/plants/units/1/plants from 127.0.0.1
________________________ test_sensor_history_endpoint _________________________
tests\test_api.py:137: in test_sensor_history_endpoint
    assert response.status_code == 200
E   assert 500 == 200
E    +  where 500 = <WrapperTestResponse streamed [500 INTERNAL SERVER ERROR]>.status_code
---------------------------- Captured stdout setup ----------------------------
2026-02-19 19:16:35,489 - root - INFO - \u2705 Socket.IO initialized with CORS origins: *\n2026-02-19 19:16:35,519 - root - INFO - Seeded DeviceEnergyProfiles table with 16 default profiles.\n2026-02-19 19:16:35,520 - root - INFO - Seeded Plants table with 15 catalog entries.\n2026-02-19 19:16:35,521 - migration_mod - INFO - Migration 28 (irrigation_ml_context) completed successfully\n2026-02-19 19:16:35,522 - migration_mod - INFO - \u2705 Migration 029 (bayesian_threshold_columns) completed successfully\n2026-02-19 19:16:35,522 - migration_mod - INFO - \u2713 Created DiseaseOccurrence table\n2026-02-19 19:16:35,522 - migration_mod - INFO - \u2713 Created DiseasePredictionFeedback table\n2026-02-19 19:16:35,523 - migration_mod - INFO - \u2713 Created disease tracking indexes\n2026-02-19 19:16:35,523 - migration_mod - INFO - \u2705 Migration 30 (disease_tracking) completed successfully\n2026-02-19 19:16:35,523 - infrastructure.database.sqlite_handler - ERROR - Failed to run migration 029_disease_tracking.py: UNIQUE constraint failed: Migrations.migration_id\n2026-02-19 19:16:35,523 - migration_mod - INFO - Adding light_mode column to GrowthUnits...\n2026-02-19 19:16:35,524 - migration_mod - INFO - \u2713 Added light_mode column to GrowthUnits\n2026-02-19 19:16:35,525 - migration_mod - INFO - Added column aqi_threshold_override to Plants\n2026-02-19 19:16:35,525 - migration_mod - INFO - \u2713 Migration add_plant_threshold_overrides completed successfully\n2026-02-19 19:16:35,525 - migration_mod - INFO - \u2713 Migration add_plant_actuators completed successfully\n2026-02-19 19:16:35,526 - migration_mod - INFO - \u2713 Migration rename_light_intensity_threshold_to_lux_threshold completed successfully\n2026-02-19 19:16:35,526 - migration_mod - INFO - Column air_quality_threshold already exists in GrowthUnits\n2026-02-19 19:16:35,526 - migration_mod - INFO - Column air_quality_threshold_override already exists in Plants\n2026-02-19 19:16:35,526 - migration_mod - INFO - Old column co2_ppm not found in PlantReadings, adding co2\n2026-02-19 19:16:35,527 - migration_mod - INFO - Old column voc_ppb not found in PlantReadings, adding voc\n2026-02-19 19:16:35,528 - migration_mod - INFO - Old column aqi not found in PlantReadings, adding air_quality\n2026-02-19 19:16:35,528 - migration_mod - INFO - Old column co2_ppm not found in MLTrainingData, adding co2\n2026-02-19 19:16:35,528 - migration_mod - ERROR - Migration standardize_sensor_columns failed: no such table: MLTrainingData\nTraceback (most recent call last):\n  File "E:\\Work\\SYSGrow\\backend\\infrastructure\\database\\migrations\\034_standardize_sensor_columns.py", line 82, in migrate\n    _rename_or_copy(cursor, "MLTrainingData", old_name="co2_ppm", new_name="co2", column_type="REAL")\n    ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "E:\\Work\\SYSGrow\\backend\\infrastructure\\database\\migrations\\034_standardize_sensor_columns.py", line 46, in _rename_or_copy\n    cursor.execute(\n    ~~~~~~~~~~~~~~^\n        f"ALTER TABLE {table} ADD COLUMN {new_name} {column_type} {default_clause}"\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\nsqlite3.OperationalError: no such table: MLTrainingData\n2026-02-19 19:16:35,529 - infrastructure.database.sqlite_handler - ERROR - \u274c Migration 034_standardize_sensor_columns.py failed\nRunning migration 051 on <infrastructure.database.sqlite_handler.SQLiteDatabaseHandler object at 0x000002131F3D62C0>\n2026-02-19 19:16:35,529 - infrastructure.database.sqlite_handler - ERROR - Failed to run migration 051_add_actuator_config_unique_index.py: expected str, bytes or os.PathLike object, not SQLiteDatabaseHandler\nRunning migration 052 on <infrastructure.database.sqlite_handler.SQLiteDatabaseHandler object at 0x000002131F3D62C0>\n2026-02-19 19:16:35,530 - infrastructure.database.sqlite_handler - ERROR - Failed to run migration 052_add_recovery_codes.py: expected str, bytes or os.PathLike object, not SQLiteDatabaseHandler\n2026-02-19 19:16:35,530 - migration_mod - INFO - Migration 53 (irrigation_reliability_tables) completed successfully\n2026-02-19 19:16:35,531 - migration_mod - INFO - Adding 'lux' column to PlantReadings table\n2026-02-19 19:16:35,532 - migration_mod - INFO - \u2713 Migration add_lux_to_plant_readings completed successfully\n2026-02-19 19:16:35,533 - migration_mod - INFO - \u2713 Migration add_ph_ec_to_plant_readings completed successfully\n2026-02-19 19:16:35,534 - migration_mod - INFO - \u2713 Migration backfill_plant_soil_moisture_overrides completed successfully (15 plants updated)\n2026-02-19 19:16:35,538 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:16:40,550 - app.services.ai.model_registry - WARNING - No production version set for plant_health_regressor\n2026-02-19 19:16:40,551 - app.services.ai.model_registry - WARNING - No production version set for plant_health_classifier\n2026-02-19 19:16:40,551 - app.services.ai.model_registry - WARNING - No production version set for irrigation_threshold\n2026-02-19 19:16:40,551 - app.services.ai.model_registry - WARNING - No production version set for irrigation_response\n2026-02-19 19:16:40,551 - app.services.ai.model_registry - WARNING - No production version set for irrigation_duration\n2026-02-19 19:16:40,551 - app.services.ai.model_registry - WARNING - No production version set for irrigation_timing\n2026-02-19 19:16:40,552 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:16:40,555 - activity_log - INFO - [INFO] system_startup: Smart Agriculture System started\n2026-02-19 19:16:40,557 - app.workers.unified_scheduler - WARNING - Scheduler already running\n2026-02-19 19:16:40,701 - root - INFO -  Registered blueprint: auth\n2026-02-19 19:16:40,701 - root - INFO -  Registered blueprint: ui\n2026-02-19 19:16:40,702 - root - INFO -  Registered blueprint: plants_api\n2026-02-19 19:16:40,702 - root - INFO -  Registered blueprint: disease\n2026-02-19 19:16:40,702 - root - INFO -  Registered blueprint: settings_api\n2026-02-19 19:16:40,702 - root - INFO -  Registered blueprint: growth_api\n2026-02-19 19:16:40,702 - root - INFO -  Registered blueprint: devices_api\n2026-02-19 19:16:40,702 - root - INFO -  Registered blueprint: dashboard_api\n2026-02-19 19:16:40,702 - root - INFO -  Registered blueprint: harvest\n2026-02-19 19:16:40,702 - root - INFO -  Registered blueprint: ml_base\n2026-02-19 19:16:40,702 - root - INFO -  Registered blueprint: ml_predictions\n2026-02-19 19:16:40,702 - root - INFO -  Registered blueprint: ml_models\n2026-02-19 19:16:40,702 - root - INFO -  Registered blueprint: ml_monitoring\n2026-02-19 19:16:40,702 - root - INFO -  Registered blueprint: ml_analytics\n2026-02-19 19:16:40,702 - root - INFO -  Registered blueprint: ml_retraining\n2026-02-19 19:16:40,702 - root - INFO -  Registered blueprint: ml_analysis\n2026-02-19 19:16:40,702 - root - INFO -  Registered blueprint: ml_readiness\n2026-02-19 19:16:40,702 - root - INFO -  Registered blueprint: ml_ab_testing\n2026-02-19 19:16:40,702 - root - INFO -  Registered blueprint: ml_continuous\n2026-02-19 19:16:40,702 - root - INFO -  Registered blueprint: ml_personalized\n2026-02-19 19:16:40,702 - root - INFO -  Registered blueprint: ml_training_data\n2026-02-19 19:16:40,702 - root - INFO -  Registered blueprint: health_api\n2026-02-19 19:16:40,702 - root - INFO -  Registered blueprint: help_api\n2026-02-19 19:16:40,702 - root - INFO -  Registered blueprint: blog_api\n2026-02-19 19:16:40,702 - root - INFO -  Registered blueprint: docs_api\n2026-02-19 19:16:40,711 - root - INFO - Skipping hardware bootstrap (bootstrap_runtime=False)
----------------------------- Captured log setup ------------------------------
INFO     root:extensions.py:80 \u2705 Socket.IO initialized with CORS origins: *\nINFO     root:sqlite_handler.py:1652 Seeded DeviceEnergyProfiles table with 16 default profiles.\nINFO     root:sqlite_handler.py:1615 Seeded Plants table with 15 catalog entries.\nINFO     migration_mod:028_irrigation_ml_context.py:97 Migration 28 (irrigation_ml_context) completed successfully\nINFO     migration_mod:029_bayesian_threshold_columns.py:57 \u2705 Migration 029 (bayesian_threshold_columns) completed successfully\nINFO     migration_mod:029_disease_tracking.py:80 \u2713 Created DiseaseOccurrence table\nINFO     migration_mod:029_disease_tracking.py:119 \u2713 Created DiseasePredictionFeedback table\nINFO     migration_mod:029_disease_tracking.py:134 \u2713 Created disease tracking indexes\nINFO     migration_mod:029_disease_tracking.py:137 \u2705 Migration 30 (disease_tracking) completed successfully\nERROR    infrastructure.database.sqlite_handler:sqlite_handler.py:109 Failed to run migration 029_disease_tracking.py: UNIQUE constraint failed: Migrations.migration_id\nINFO     migration_mod:030_add_light_mode_column.py:44 Adding light_mode column to GrowthUnits...\nINFO     migration_mod:030_add_light_mode_column.py:49 \u2713 Added light_mode column to GrowthUnits\nINFO     migration_mod:031_add_plant_threshold_overrides.py:44 Added column aqi_threshold_override to Plants\nINFO     migration_mod:031_add_plant_threshold_overrides.py:47 \u2713 Migration add_plant_threshold_overrides completed successfully\nINFO     migration_mod:032_add_plant_actuators.py:39 \u2713 Migration add_plant_actuators completed successfully\nINFO     migration_mod:033_rename_light_intensity_threshold_to_lux_threshold.py:79 \u2713 Migration rename_light_intensity_threshold_to_lux_threshold completed successfully\nINFO     migration_mod:034_standardize_sensor_columns.py:41 Column air_quality_threshold already exists in GrowthUnits\nINFO     migration_mod:034_standardize_sensor_columns.py:41 Column air_quality_threshold_override already exists in Plants\nINFO     migration_mod:034_standardize_sensor_columns.py:45 Old column co2_ppm not found in PlantReadings, adding co2\nINFO     migration_mod:034_standardize_sensor_columns.py:45 Old column voc_ppb not found in PlantReadings, adding voc\nINFO     migration_mod:034_standardize_sensor_columns.py:45 Old column aqi not found in PlantReadings, adding air_quality\nINFO     migration_mod:034_standardize_sensor_columns.py:45 Old column co2_ppm not found in MLTrainingData, adding co2\nERROR    migration_mod:034_standardize_sensor_columns.py:93 Migration standardize_sensor_columns failed: no such table: MLTrainingData\nTraceback (most recent call last):\n  File "E:\\Work\\SYSGrow\\backend\\infrastructure\\database\\migrations\\034_standardize_sensor_columns.py", line 82, in migrate\n    _rename_or_copy(cursor, "MLTrainingData", old_name="co2_ppm", new_name="co2", column_type="REAL")\n    ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "E:\\Work\\SYSGrow\\backend\\infrastructure\\database\\migrations\\034_standardize_sensor_columns.py", line 46, in _rename_or_copy\n    cursor.execute(\n    ~~~~~~~~~~~~~~^\n        f"ALTER TABLE {table} ADD COLUMN {new_name} {column_type} {default_clause}"\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\nsqlite3.OperationalError: no such table: MLTrainingData\nERROR    infrastructure.database.sqlite_handler:sqlite_handler.py:107 \u274c Migration 034_standardize_sensor_columns.py failed\nERROR    infrastructure.database.sqlite_handler:sqlite_handler.py:109 Failed to run migration 051_add_actuator_config_unique_index.py: expected str, bytes or os.PathLike object, not SQLiteDatabaseHandler\nERROR    infrastructure.database.sqlite_handler:sqlite_handler.py:109 Failed to run migration 052_add_recovery_codes.py: expected str, bytes or os.PathLike object, not SQLiteDatabaseHandler\nINFO     migration_mod:053_irrigation_reliability_tables.py:185 Migration 53 (irrigation_reliability_tables) completed successfully\nINFO     migration_mod:057_add_lux_to_plant_readings.py:31 Adding 'lux' column to PlantReadings table\nINFO     migration_mod:057_add_lux_to_plant_readings.py:35 \u2713 Migration add_lux_to_plant_readings completed successfully\nINFO     migration_mod:059_add_ph_ec_to_plant_readings.py:36 \u2713 Migration add_ph_ec_to_plant_readings completed successfully\nINFO     migration_mod:060_backfill_plant_soil_moisture_overrides.py:81 \u2713 Migration backfill_plant_soil_moisture_overrides completed successfully (15 plants updated)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for plant_health_regressor\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for plant_health_classifier\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for irrigation_threshold\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for irrigation_response\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for irrigation_duration\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for irrigation_timing\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nINFO     activity_log:activity_logger.py:128 [INFO] system_startup: Smart Agriculture System started\nWARNING  app.workers.unified_scheduler:unified_scheduler.py:607 Scheduler already running\nINFO     root:__init__.py:283  Registered blueprint: auth\nINFO     root:__init__.py:283  Registered blueprint: ui\nINFO     root:__init__.py:283  Registered blueprint: plants_api\nINFO     root:__init__.py:283  Registered blueprint: disease\nINFO     root:__init__.py:283  Registered blueprint: settings_api\nINFO     root:__init__.py:283  Registered blueprint: growth_api\nINFO     root:__init__.py:283  Registered blueprint: devices_api\nINFO     root:__init__.py:283  Registered blueprint: dashboard_api\nINFO     root:__init__.py:283  Registered blueprint: harvest\nINFO     root:__init__.py:283  Registered blueprint: ml_base\nINFO     root:__init__.py:283  Registered blueprint: ml_predictions\nINFO     root:__init__.py:283  Registered blueprint: ml_models\nINFO     root:__init__.py:283  Registered blueprint: ml_monitoring\nINFO     root:__init__.py:283  Registered blueprint: ml_analytics\nINFO     root:__init__.py:283  Registered blueprint: ml_retraining\nINFO     root:__init__.py:283  Registered blueprint: ml_analysis\nINFO     root:__init__.py:283  Registered blueprint: ml_readiness\nINFO     root:__init__.py:283  Registered blueprint: ml_ab_testing\nINFO     root:__init__.py:283  Registered blueprint: ml_continuous\nINFO     root:__init__.py:283  Registered blueprint: ml_personalized\nINFO     root:__init__.py:283  Registered blueprint: ml_training_data\nINFO     root:__init__.py:283  Registered blueprint: health_api\nINFO     root:__init__.py:283  Registered blueprint: help_api\nINFO     root:__init__.py:283  Registered blueprint: blog_api\nINFO     root:__init__.py:283  Registered blueprint: docs_api\nINFO     root:__init__.py:308 Skipping hardware bootstrap (bootstrap_runtime=False)
---------------------------- Captured stdout call -----------------------------
2026-02-19 19:16:40,713 - app.utils.http - ERROR - API error [500] Failed to get sensor history: type object 'datetime.datetime' has no attribute 'UTC'
Traceback (most recent call last):
  File "E:\Work\SYSGrow\backend\app\utils\http.py", line 128, in wrapper
    return fn(*args, **kwargs)
  File "E:\Work\SYSGrow\backend\app\blueprints\api\analytics\sensors.py", line 86, in get_sensors_history
    end = _parse_datetime(request.args.get("end"), utc_now())
  File "E:\Work\SYSGrow\backend\app\blueprints\api\_common.py", line 158, in parse_datetime
    return ensure_utc(default)
  File "E:\Work\SYSGrow\backend\app\blueprints\api\_common.py", line 181, in ensure_utc
    return dt.astimezone(datetime.UTC)
                         ^^^^^^^^^^^^
AttributeError: type object 'datetime.datetime' has no attribute 'UTC'
------------------------------ Captured log call ------------------------------
ERROR    app.utils.http:http.py:50 API error [500] Failed to get sensor history: type object 'datetime.datetime' has no attribute 'UTC'
Traceback (most recent call last):
  File "E:\Work\SYSGrow\backend\app\utils\http.py", line 128, in wrapper
    return fn(*args, **kwargs)
  File "E:\Work\SYSGrow\backend\app\blueprints\api\analytics\sensors.py", line 86, in get_sensors_history
    end = _parse_datetime(request.args.get("end"), utc_now())
  File "E:\Work\SYSGrow\backend\app\blueprints\api\_common.py", line 158, in parse_datetime
    return ensure_utc(default)
  File "E:\Work\SYSGrow\backend\app\blueprints\api\_common.py", line 181, in ensure_utc
    return dt.astimezone(datetime.UTC)
                         ^^^^^^^^^^^^
AttributeError: type object 'datetime.datetime' has no attribute 'UTC'
____________________________ test_status_endpoint _____________________________
tests\test_api.py:147: in test_status_endpoint
    response = client.get("/status/")
               ^^^^^^^^^^^^^^^^^^^^^^
.venv\Lib\site-packages\werkzeug\test.py:1162: in get
    return self.open(*args, **kw)
           ^^^^^^^^^^^^^^^^^^^^^^
.venv\Lib\site-packages\flask\testing.py:235: in open
    response = super().open(
.venv\Lib\site-packages\werkzeug\test.py:1116: in open
    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv\Lib\site-packages\werkzeug\test.py:988: in run_wsgi_app
    rv = run_wsgi_app(self.application, environ, buffered=buffered)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv\Lib\site-packages\werkzeug\test.py:1264: in run_wsgi_app
    app_rv = app(environ, start_response)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv\Lib\site-packages\flask\app.py:1536: in __call__
    return self.wsgi_app(environ, start_response)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
app\__init__.py:301: in _legacy_api_rewrite
    return _original_wsgi(environ, start_response)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv\Lib\site-packages\flask_socketio\__init__.py:42: in __call__
    return super().__call__(environ, start_response)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv\Lib\site-packages\engineio\middleware.py:74: in __call__
    return self.wsgi_app(environ, start_response)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv\Lib\site-packages\flask\app.py:1514: in wsgi_app
    response = self.handle_exception(e)
               ^^^^^^^^^^^^^^^^^^^^^^^^
.venv\Lib\site-packages\flask\app.py:1511: in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv\Lib\site-packages\flask\app.py:919: in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv\Lib\site-packages\flask\app.py:802: in handle_user_exception
    return self.handle_http_exception(e)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv\Lib\site-packages\flask\app.py:777: in handle_http_exception
    return self.ensure_sync(handler)(e)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
app\__init__.py:208: in _handle_unhandled
    raise exc  # Let Flask's default HTML error pages handle UI routes
    ^^^^^^^^^
.venv\Lib\site-packages\flask\app.py:917: in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
.venv\Lib\site-packages\flask\app.py:891: in dispatch_request
    self.raise_routing_exception(req)
.venv\Lib\site-packages\flask\app.py:500: in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv\Lib\site-packages\flask\ctx.py:362: in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv\Lib\site-packages\werkzeug\routing\map.py:629: in match
    raise NotFound() from None
E   werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
---------------------------- Captured stdout setup ----------------------------
2026-02-19 19:16:40,728 - root - INFO - \u2705 Socket.IO initialized with CORS origins: *\n2026-02-19 19:16:40,755 - root - INFO - Seeded DeviceEnergyProfiles table with 16 default profiles.\n2026-02-19 19:16:40,756 - root - INFO - Seeded Plants table with 15 catalog entries.\n2026-02-19 19:16:40,757 - migration_mod - INFO - Migration 28 (irrigation_ml_context) completed successfully\n2026-02-19 19:16:40,757 - migration_mod - INFO - \u2705 Migration 029 (bayesian_threshold_columns) completed successfully\n2026-02-19 19:16:40,758 - migration_mod - INFO - \u2713 Created DiseaseOccurrence table\n2026-02-19 19:16:40,758 - migration_mod - INFO - \u2713 Created DiseasePredictionFeedback table\n2026-02-19 19:16:40,759 - migration_mod - INFO - \u2713 Created disease tracking indexes\n2026-02-19 19:16:40,759 - migration_mod - INFO - \u2705 Migration 30 (disease_tracking) completed successfully\n2026-02-19 19:16:40,759 - infrastructure.database.sqlite_handler - ERROR - Failed to run migration 029_disease_tracking.py: UNIQUE constraint failed: Migrations.migration_id\n2026-02-19 19:16:40,759 - migration_mod - INFO - Adding light_mode column to GrowthUnits...\n2026-02-19 19:16:40,760 - migration_mod - INFO - \u2713 Added light_mode column to GrowthUnits\n2026-02-19 19:16:40,761 - migration_mod - INFO - Added column aqi_threshold_override to Plants\n2026-02-19 19:16:40,761 - migration_mod - INFO - \u2713 Migration add_plant_threshold_overrides completed successfully\n2026-02-19 19:16:40,762 - migration_mod - INFO - \u2713 Migration add_plant_actuators completed successfully\n2026-02-19 19:16:40,762 - migration_mod - INFO - \u2713 Migration rename_light_intensity_threshold_to_lux_threshold completed successfully\n2026-02-19 19:16:40,762 - migration_mod - INFO - Column air_quality_threshold already exists in GrowthUnits\n2026-02-19 19:16:40,762 - migration_mod - INFO - Column air_quality_threshold_override already exists in Plants\n2026-02-19 19:16:40,762 - migration_mod - INFO - Old column co2_ppm not found in PlantReadings, adding co2\n2026-02-19 19:16:40,763 - migration_mod - INFO - Old column voc_ppb not found in PlantReadings, adding voc\n2026-02-19 19:16:40,764 - migration_mod - INFO - Old column aqi not found in PlantReadings, adding air_quality\n2026-02-19 19:16:40,765 - migration_mod - INFO - Old column co2_ppm not found in MLTrainingData, adding co2\n2026-02-19 19:16:40,765 - migration_mod - ERROR - Migration standardize_sensor_columns failed: no such table: MLTrainingData\nTraceback (most recent call last):\n  File "E:\\Work\\SYSGrow\\backend\\infrastructure\\database\\migrations\\034_standardize_sensor_columns.py", line 82, in migrate\n    _rename_or_copy(cursor, "MLTrainingData", old_name="co2_ppm", new_name="co2", column_type="REAL")\n    ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "E:\\Work\\SYSGrow\\backend\\infrastructure\\database\\migrations\\034_standardize_sensor_columns.py", line 46, in _rename_or_copy\n    cursor.execute(\n    ~~~~~~~~~~~~~~^\n        f"ALTER TABLE {table} ADD COLUMN {new_name} {column_type} {default_clause}"\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\nsqlite3.OperationalError: no such table: MLTrainingData\n2026-02-19 19:16:40,765 - infrastructure.database.sqlite_handler - ERROR - \u274c Migration 034_standardize_sensor_columns.py failed\nRunning migration 051 on <infrastructure.database.sqlite_handler.SQLiteDatabaseHandler object at 0x000002131F3D6D70>\n2026-02-19 19:16:40,766 - infrastructure.database.sqlite_handler - ERROR - Failed to run migration 051_add_actuator_config_unique_index.py: expected str, bytes or os.PathLike object, not SQLiteDatabaseHandler\nRunning migration 052 on <infrastructure.database.sqlite_handler.SQLiteDatabaseHandler object at 0x000002131F3D6D70>\n2026-02-19 19:16:40,766 - infrastructure.database.sqlite_handler - ERROR - Failed to run migration 052_add_recovery_codes.py: expected str, bytes or os.PathLike object, not SQLiteDatabaseHandler\n2026-02-19 19:16:40,767 - migration_mod - INFO - Migration 53 (irrigation_reliability_tables) completed successfully\n2026-02-19 19:16:40,768 - migration_mod - INFO - Adding 'lux' column to PlantReadings table\n2026-02-19 19:16:40,768 - migration_mod - INFO - \u2713 Migration add_lux_to_plant_readings completed successfully\n2026-02-19 19:16:40,769 - migration_mod - INFO - \u2713 Migration add_ph_ec_to_plant_readings completed successfully\n2026-02-19 19:16:40,770 - migration_mod - INFO - \u2713 Migration backfill_plant_soil_moisture_overrides completed successfully (15 plants updated)\n2026-02-19 19:16:40,774 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:16:40,774 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:16:45,790 - app.services.ai.model_registry - WARNING - No production version set for plant_health_regressor\n2026-02-19 19:16:45,790 - app.services.ai.model_registry - WARNING - No production version set for plant_health_classifier\n2026-02-19 19:16:45,790 - app.services.ai.model_registry - WARNING - No production version set for irrigation_threshold\n2026-02-19 19:16:45,790 - app.services.ai.model_registry - WARNING - No production version set for irrigation_response\n2026-02-19 19:16:45,790 - app.services.ai.model_registry - WARNING - No production version set for irrigation_duration\n2026-02-19 19:16:45,790 - app.services.ai.model_registry - WARNING - No production version set for irrigation_timing\n2026-02-19 19:16:45,791 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:16:45,792 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:16:45,795 - activity_log - INFO - [INFO] system_startup: Smart Agriculture System started\n2026-02-19 19:16:45,797 - app.workers.unified_scheduler - WARNING - Scheduler already running\n2026-02-19 19:16:45,880 - root - INFO -  Registered blueprint: auth\n2026-02-19 19:16:45,880 - root - INFO -  Registered blueprint: ui\n2026-02-19 19:16:45,880 - root - INFO -  Registered blueprint: plants_api\n2026-02-19 19:16:45,880 - root - INFO -  Registered blueprint: disease\n2026-02-19 19:16:45,880 - root - INFO -  Registered blueprint: settings_api\n2026-02-19 19:16:45,880 - root - INFO -  Registered blueprint: growth_api\n2026-02-19 19:16:45,880 - root - INFO -  Registered blueprint: devices_api\n2026-02-19 19:16:45,880 - root - INFO -  Registered blueprint: dashboard_api\n2026-02-19 19:16:45,880 - root - INFO -  Registered blueprint: harvest\n2026-02-19 19:16:45,880 - root - INFO -  Registered blueprint: ml_base\n2026-02-19 19:16:45,880 - root - INFO -  Registered blueprint: ml_predictions\n2026-02-19 19:16:45,880 - root - INFO -  Registered blueprint: ml_models\n2026-02-19 19:16:45,880 - root - INFO -  Registered blueprint: ml_monitoring\n2026-02-19 19:16:45,880 - root - INFO -  Registered blueprint: ml_analytics\n2026-02-19 19:16:45,880 - root - INFO -  Registered blueprint: ml_retraining\n2026-02-19 19:16:45,880 - root - INFO -  Registered blueprint: ml_analysis\n2026-02-19 19:16:45,880 - root - INFO -  Registered blueprint: ml_readiness\n2026-02-19 19:16:45,880 - root - INFO -  Registered blueprint: ml_ab_testing\n2026-02-19 19:16:45,880 - root - INFO -  Registered blueprint: ml_continuous\n2026-02-19 19:16:45,880 - root - INFO -  Registered blueprint: ml_personalized\n2026-02-19 19:16:45,880 - root - INFO -  Registered blueprint: ml_training_data\n2026-02-19 19:16:45,880 - root - INFO -  Registered blueprint: health_api\n2026-02-19 19:16:45,880 - root - INFO -  Registered blueprint: help_api\n2026-02-19 19:16:45,880 - root - INFO -  Registered blueprint: blog_api\n2026-02-19 19:16:45,880 - root - INFO -  Registered blueprint: docs_api\n2026-02-19 19:16:45,890 - root - INFO - Skipping hardware bootstrap (bootstrap_runtime=False)
----------------------------- Captured log setup ------------------------------
INFO     root:extensions.py:80 \u2705 Socket.IO initialized with CORS origins: *\nINFO     root:sqlite_handler.py:1652 Seeded DeviceEnergyProfiles table with 16 default profiles.\nINFO     root:sqlite_handler.py:1615 Seeded Plants table with 15 catalog entries.\nINFO     migration_mod:028_irrigation_ml_context.py:97 Migration 28 (irrigation_ml_context) completed successfully\nINFO     migration_mod:029_bayesian_threshold_columns.py:57 \u2705 Migration 029 (bayesian_threshold_columns) completed successfully\nINFO     migration_mod:029_disease_tracking.py:80 \u2713 Created DiseaseOccurrence table\nINFO     migration_mod:029_disease_tracking.py:119 \u2713 Created DiseasePredictionFeedback table\nINFO     migration_mod:029_disease_tracking.py:134 \u2713 Created disease tracking indexes\nINFO     migration_mod:029_disease_tracking.py:137 \u2705 Migration 30 (disease_tracking) completed successfully\nERROR    infrastructure.database.sqlite_handler:sqlite_handler.py:109 Failed to run migration 029_disease_tracking.py: UNIQUE constraint failed: Migrations.migration_id\nINFO     migration_mod:030_add_light_mode_column.py:44 Adding light_mode column to GrowthUnits...\nINFO     migration_mod:030_add_light_mode_column.py:49 \u2713 Added light_mode column to GrowthUnits\nINFO     migration_mod:031_add_plant_threshold_overrides.py:44 Added column aqi_threshold_override to Plants\nINFO     migration_mod:031_add_plant_threshold_overrides.py:47 \u2713 Migration add_plant_threshold_overrides completed successfully\nINFO     migration_mod:032_add_plant_actuators.py:39 \u2713 Migration add_plant_actuators completed successfully\nINFO     migration_mod:033_rename_light_intensity_threshold_to_lux_threshold.py:79 \u2713 Migration rename_light_intensity_threshold_to_lux_threshold completed successfully\nINFO     migration_mod:034_standardize_sensor_columns.py:41 Column air_quality_threshold already exists in GrowthUnits\nINFO     migration_mod:034_standardize_sensor_columns.py:41 Column air_quality_threshold_override already exists in Plants\nINFO     migration_mod:034_standardize_sensor_columns.py:45 Old column co2_ppm not found in PlantReadings, adding co2\nINFO     migration_mod:034_standardize_sensor_columns.py:45 Old column voc_ppb not found in PlantReadings, adding voc\nINFO     migration_mod:034_standardize_sensor_columns.py:45 Old column aqi not found in PlantReadings, adding air_quality\nINFO     migration_mod:034_standardize_sensor_columns.py:45 Old column co2_ppm not found in MLTrainingData, adding co2\nERROR    migration_mod:034_standardize_sensor_columns.py:93 Migration standardize_sensor_columns failed: no such table: MLTrainingData\nTraceback (most recent call last):\n  File "E:\\Work\\SYSGrow\\backend\\infrastructure\\database\\migrations\\034_standardize_sensor_columns.py", line 82, in migrate\n    _rename_or_copy(cursor, "MLTrainingData", old_name="co2_ppm", new_name="co2", column_type="REAL")\n    ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "E:\\Work\\SYSGrow\\backend\\infrastructure\\database\\migrations\\034_standardize_sensor_columns.py", line 46, in _rename_or_copy\n    cursor.execute(\n    ~~~~~~~~~~~~~~^\n        f"ALTER TABLE {table} ADD COLUMN {new_name} {column_type} {default_clause}"\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\nsqlite3.OperationalError: no such table: MLTrainingData\nERROR    infrastructure.database.sqlite_handler:sqlite_handler.py:107 \u274c Migration 034_standardize_sensor_columns.py failed\nERROR    infrastructure.database.sqlite_handler:sqlite_handler.py:109 Failed to run migration 051_add_actuator_config_unique_index.py: expected str, bytes or os.PathLike object, not SQLiteDatabaseHandler\nERROR    infrastructure.database.sqlite_handler:sqlite_handler.py:109 Failed to run migration 052_add_recovery_codes.py: expected str, bytes or os.PathLike object, not SQLiteDatabaseHandler\nINFO     migration_mod:053_irrigation_reliability_tables.py:185 Migration 53 (irrigation_reliability_tables) completed successfully\nINFO     migration_mod:057_add_lux_to_plant_readings.py:31 Adding 'lux' column to PlantReadings table\nINFO     migration_mod:057_add_lux_to_plant_readings.py:35 \u2713 Migration add_lux_to_plant_readings completed successfully\nINFO     migration_mod:059_add_ph_ec_to_plant_readings.py:36 \u2713 Migration add_ph_ec_to_plant_readings completed successfully\nINFO     migration_mod:060_backfill_plant_soil_moisture_overrides.py:81 \u2713 Migration backfill_plant_soil_moisture_overrides completed successfully (15 plants updated)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for plant_health_regressor\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for plant_health_classifier\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for irrigation_threshold\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for irrigation_response\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for irrigation_duration\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for irrigation_timing\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nINFO     activity_log:activity_logger.py:128 [INFO] system_startup: Smart Agriculture System started\nWARNING  app.workers.unified_scheduler:unified_scheduler.py:607 Scheduler already running\nINFO     root:__init__.py:283  Registered blueprint: auth\nINFO     root:__init__.py:283  Registered blueprint: ui\nINFO     root:__init__.py:283  Registered blueprint: plants_api\nINFO     root:__init__.py:283  Registered blueprint: disease\nINFO     root:__init__.py:283  Registered blueprint: settings_api\nINFO     root:__init__.py:283  Registered blueprint: growth_api\nINFO     root:__init__.py:283  Registered blueprint: devices_api\nINFO     root:__init__.py:283  Registered blueprint: dashboard_api\nINFO     root:__init__.py:283  Registered blueprint: harvest\nINFO     root:__init__.py:283  Registered blueprint: ml_base\nINFO     root:__init__.py:283  Registered blueprint: ml_predictions\nINFO     root:__init__.py:283  Registered blueprint: ml_models\nINFO     root:__init__.py:283  Registered blueprint: ml_monitoring\nINFO     root:__init__.py:283  Registered blueprint: ml_analytics\nINFO     root:__init__.py:283  Registered blueprint: ml_retraining\nINFO     root:__init__.py:283  Registered blueprint: ml_analysis\nINFO     root:__init__.py:283  Registered blueprint: ml_readiness\nINFO     root:__init__.py:283  Registered blueprint: ml_ab_testing\nINFO     root:__init__.py:283  Registered blueprint: ml_continuous\nINFO     root:__init__.py:283  Registered blueprint: ml_personalized\nINFO     root:__init__.py:283  Registered blueprint: ml_training_data\nINFO     root:__init__.py:283  Registered blueprint: health_api\nINFO     root:__init__.py:283  Registered blueprint: help_api\nINFO     root:__init__.py:283  Registered blueprint: blog_api\nINFO     root:__init__.py:283  Registered blueprint: docs_api\nINFO     root:__init__.py:308 Skipping hardware bootstrap (bootstrap_runtime=False)
______________________ test_create_sensor_v2_happy_path _______________________
tests\test_api_devices_v2.py:43: in test_create_sensor_v2_happy_path
    assert response.status_code == 201
E   assert 401 == 201
E    +  where 401 = <WrapperTestResponse streamed [401 UNAUTHORIZED]>.status_code
---------------------------- Captured stdout setup ----------------------------
2026-02-19 19:16:45,989 - root - INFO - \u2705 Socket.IO initialized with CORS origins: *\n2026-02-19 19:16:46,016 - root - INFO - Seeded DeviceEnergyProfiles table with 16 default profiles.\n2026-02-19 19:16:46,017 - root - INFO - Seeded Plants table with 15 catalog entries.\n2026-02-19 19:16:46,018 - migration_mod - INFO - Migration 28 (irrigation_ml_context) completed successfully\n2026-02-19 19:16:46,019 - migration_mod - INFO - \u2705 Migration 029 (bayesian_threshold_columns) completed successfully\n2026-02-19 19:16:46,019 - migration_mod - INFO - \u2713 Created DiseaseOccurrence table\n2026-02-19 19:16:46,019 - migration_mod - INFO - \u2713 Created DiseasePredictionFeedback table\n2026-02-19 19:16:46,020 - migration_mod - INFO - \u2713 Created disease tracking indexes\n2026-02-19 19:16:46,020 - migration_mod - INFO - \u2705 Migration 30 (disease_tracking) completed successfully\n2026-02-19 19:16:46,020 - infrastructure.database.sqlite_handler - ERROR - Failed to run migration 029_disease_tracking.py: UNIQUE constraint failed: Migrations.migration_id\n2026-02-19 19:16:46,020 - migration_mod - INFO - Adding light_mode column to GrowthUnits...\n2026-02-19 19:16:46,021 - migration_mod - INFO - \u2713 Added light_mode column to GrowthUnits\n2026-02-19 19:16:46,022 - migration_mod - INFO - Added column aqi_threshold_override to Plants\n2026-02-19 19:16:46,022 - migration_mod - INFO - \u2713 Migration add_plant_threshold_overrides completed successfully\n2026-02-19 19:16:46,022 - migration_mod - INFO - \u2713 Migration add_plant_actuators completed successfully\n2026-02-19 19:16:46,023 - migration_mod - INFO - \u2713 Migration rename_light_intensity_threshold_to_lux_threshold completed successfully\n2026-02-19 19:16:46,023 - migration_mod - INFO - Column air_quality_threshold already exists in GrowthUnits\n2026-02-19 19:16:46,023 - migration_mod - INFO - Column air_quality_threshold_override already exists in Plants\n2026-02-19 19:16:46,023 - migration_mod - INFO - Old column co2_ppm not found in PlantReadings, adding co2\n2026-02-19 19:16:46,024 - migration_mod - INFO - Old column voc_ppb not found in PlantReadings, adding voc\n2026-02-19 19:16:46,024 - migration_mod - INFO - Old column aqi not found in PlantReadings, adding air_quality\n2026-02-19 19:16:46,025 - migration_mod - INFO - Old column co2_ppm not found in MLTrainingData, adding co2\n2026-02-19 19:16:46,025 - migration_mod - ERROR - Migration standardize_sensor_columns failed: no such table: MLTrainingData\nTraceback (most recent call last):\n  File "E:\\Work\\SYSGrow\\backend\\infrastructure\\database\\migrations\\034_standardize_sensor_columns.py", line 82, in migrate\n    _rename_or_copy(cursor, "MLTrainingData", old_name="co2_ppm", new_name="co2", column_type="REAL")\n    ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "E:\\Work\\SYSGrow\\backend\\infrastructure\\database\\migrations\\034_standardize_sensor_columns.py", line 46, in _rename_or_copy\n    cursor.execute(\n    ~~~~~~~~~~~~~~^\n        f"ALTER TABLE {table} ADD COLUMN {new_name} {column_type} {default_clause}"\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\nsqlite3.OperationalError: no such table: MLTrainingData\n2026-02-19 19:16:46,026 - infrastructure.database.sqlite_handler - ERROR - \u274c Migration 034_standardize_sensor_columns.py failed\nRunning migration 051 on <infrastructure.database.sqlite_handler.SQLiteDatabaseHandler object at 0x000002137FF0E690>\n2026-02-19 19:16:46,027 - infrastructure.database.sqlite_handler - ERROR - Failed to run migration 051_add_actuator_config_unique_index.py: expected str, bytes or os.PathLike object, not SQLiteDatabaseHandler\nRunning migration 052 on <infrastructure.database.sqlite_handler.SQLiteDatabaseHandler object at 0x000002137FF0E690>\n2026-02-19 19:16:46,027 - infrastructure.database.sqlite_handler - ERROR - Failed to run migration 052_add_recovery_codes.py: expected str, bytes or os.PathLike object, not SQLiteDatabaseHandler\n2026-02-19 19:16:46,027 - migration_mod - INFO - Migration 53 (irrigation_reliability_tables) completed successfully\n2026-02-19 19:16:46,028 - migration_mod - INFO - Adding 'lux' column to PlantReadings table\n2026-02-19 19:16:46,029 - migration_mod - INFO - \u2713 Migration add_lux_to_plant_readings completed successfully\n2026-02-19 19:16:46,029 - migration_mod - INFO - \u2713 Migration add_ph_ec_to_plant_readings completed successfully\n2026-02-19 19:16:46,031 - migration_mod - INFO - \u2713 Migration backfill_plant_soil_moisture_overrides completed successfully (15 plants updated)\n2026-02-19 19:16:46,035 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:16:46,035 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:16:46,035 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:16:51,049 - app.services.ai.model_registry - WARNING - No production version set for plant_health_regressor\n2026-02-19 19:16:51,049 - app.services.ai.model_registry - WARNING - No production version set for plant_health_classifier\n2026-02-19 19:16:51,049 - app.services.ai.model_registry - WARNING - No production version set for irrigation_threshold\n2026-02-19 19:16:51,049 - app.services.ai.model_registry - WARNING - No production version set for irrigation_response\n2026-02-19 19:16:51,049 - app.services.ai.model_registry - WARNING - No production version set for irrigation_duration\n2026-02-19 19:16:51,049 - app.services.ai.model_registry - WARNING - No production version set for irrigation_timing\n2026-02-19 19:16:51,050 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:16:51,050 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:16:51,051 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:16:51,054 - activity_log - INFO - [INFO] system_startup: Smart Agriculture System started\n2026-02-19 19:16:51,055 - app.workers.unified_scheduler - WARNING - Scheduler already running\n2026-02-19 19:16:51,135 - root - INFO -  Registered blueprint: auth\n2026-02-19 19:16:51,135 - root - INFO -  Registered blueprint: ui\n2026-02-19 19:16:51,135 - root - INFO -  Registered blueprint: plants_api\n2026-02-19 19:16:51,135 - root - INFO -  Registered blueprint: disease\n2026-02-19 19:16:51,135 - root - INFO -  Registered blueprint: settings_api\n2026-02-19 19:16:51,135 - root - INFO -  Registered blueprint: growth_api\n2026-02-19 19:16:51,135 - root - INFO -  Registered blueprint: devices_api\n2026-02-19 19:16:51,135 - root - INFO -  Registered blueprint: dashboard_api\n2026-02-19 19:16:51,135 - root - INFO -  Registered blueprint: harvest\n2026-02-19 19:16:51,135 - root - INFO -  Registered blueprint: ml_base\n2026-02-19 19:16:51,135 - root - INFO -  Registered blueprint: ml_predictions\n2026-02-19 19:16:51,135 - root - INFO -  Registered blueprint: ml_models\n2026-02-19 19:16:51,136 - root - INFO -  Registered blueprint: ml_monitoring\n2026-02-19 19:16:51,136 - root - INFO -  Registered blueprint: ml_analytics\n2026-02-19 19:16:51,136 - root - INFO -  Registered blueprint: ml_retraining\n2026-02-19 19:16:51,136 - root - INFO -  Registered blueprint: ml_analysis\n2026-02-19 19:16:51,136 - root - INFO -  Registered blueprint: ml_readiness\n2026-02-19 19:16:51,136 - root - INFO -  Registered blueprint: ml_ab_testing\n2026-02-19 19:16:51,136 - root - INFO -  Registered blueprint: ml_continuous\n2026-02-19 19:16:51,136 - root - INFO -  Registered blueprint: ml_personalized\n2026-02-19 19:16:51,136 - root - INFO -  Registered blueprint: ml_training_data\n2026-02-19 19:16:51,136 - root - INFO -  Registered blueprint: health_api\n2026-02-19 19:16:51,136 - root - INFO -  Registered blueprint: help_api\n2026-02-19 19:16:51,136 - root - INFO -  Registered blueprint: blog_api\n2026-02-19 19:16:51,136 - root - INFO -  Registered blueprint: docs_api\n2026-02-19 19:16:51,144 - root - INFO - Skipping hardware bootstrap (bootstrap_runtime=False)
----------------------------- Captured log setup ------------------------------
INFO     root:extensions.py:80 \u2705 Socket.IO initialized with CORS origins: *\nINFO     root:sqlite_handler.py:1652 Seeded DeviceEnergyProfiles table with 16 default profiles.\nINFO     root:sqlite_handler.py:1615 Seeded Plants table with 15 catalog entries.\nINFO     migration_mod:028_irrigation_ml_context.py:97 Migration 28 (irrigation_ml_context) completed successfully\nINFO     migration_mod:029_bayesian_threshold_columns.py:57 \u2705 Migration 029 (bayesian_threshold_columns) completed successfully\nINFO     migration_mod:029_disease_tracking.py:80 \u2713 Created DiseaseOccurrence table\nINFO     migration_mod:029_disease_tracking.py:119 \u2713 Created DiseasePredictionFeedback table\nINFO     migration_mod:029_disease_tracking.py:134 \u2713 Created disease tracking indexes\nINFO     migration_mod:029_disease_tracking.py:137 \u2705 Migration 30 (disease_tracking) completed successfully\nERROR    infrastructure.database.sqlite_handler:sqlite_handler.py:109 Failed to run migration 029_disease_tracking.py: UNIQUE constraint failed: Migrations.migration_id\nINFO     migration_mod:030_add_light_mode_column.py:44 Adding light_mode column to GrowthUnits...\nINFO     migration_mod:030_add_light_mode_column.py:49 \u2713 Added light_mode column to GrowthUnits\nINFO     migration_mod:031_add_plant_threshold_overrides.py:44 Added column aqi_threshold_override to Plants\nINFO     migration_mod:031_add_plant_threshold_overrides.py:47 \u2713 Migration add_plant_threshold_overrides completed successfully\nINFO     migration_mod:032_add_plant_actuators.py:39 \u2713 Migration add_plant_actuators completed successfully\nINFO     migration_mod:033_rename_light_intensity_threshold_to_lux_threshold.py:79 \u2713 Migration rename_light_intensity_threshold_to_lux_threshold completed successfully\nINFO     migration_mod:034_standardize_sensor_columns.py:41 Column air_quality_threshold already exists in GrowthUnits\nINFO     migration_mod:034_standardize_sensor_columns.py:41 Column air_quality_threshold_override already exists in Plants\nINFO     migration_mod:034_standardize_sensor_columns.py:45 Old column co2_ppm not found in PlantReadings, adding co2\nINFO     migration_mod:034_standardize_sensor_columns.py:45 Old column voc_ppb not found in PlantReadings, adding voc\nINFO     migration_mod:034_standardize_sensor_columns.py:45 Old column aqi not found in PlantReadings, adding air_quality\nINFO     migration_mod:034_standardize_sensor_columns.py:45 Old column co2_ppm not found in MLTrainingData, adding co2\nERROR    migration_mod:034_standardize_sensor_columns.py:93 Migration standardize_sensor_columns failed: no such table: MLTrainingData\nTraceback (most recent call last):\n  File "E:\\Work\\SYSGrow\\backend\\infrastructure\\database\\migrations\\034_standardize_sensor_columns.py", line 82, in migrate\n    _rename_or_copy(cursor, "MLTrainingData", old_name="co2_ppm", new_name="co2", column_type="REAL")\n    ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "E:\\Work\\SYSGrow\\backend\\infrastructure\\database\\migrations\\034_standardize_sensor_columns.py", line 46, in _rename_or_copy\n    cursor.execute(\n    ~~~~~~~~~~~~~~^\n        f"ALTER TABLE {table} ADD COLUMN {new_name} {column_type} {default_clause}"\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\nsqlite3.OperationalError: no such table: MLTrainingData\nERROR    infrastructure.database.sqlite_handler:sqlite_handler.py:107 \u274c Migration 034_standardize_sensor_columns.py failed\nERROR    infrastructure.database.sqlite_handler:sqlite_handler.py:109 Failed to run migration 051_add_actuator_config_unique_index.py: expected str, bytes or os.PathLike object, not SQLiteDatabaseHandler\nERROR    infrastructure.database.sqlite_handler:sqlite_handler.py:109 Failed to run migration 052_add_recovery_codes.py: expected str, bytes or os.PathLike object, not SQLiteDatabaseHandler\nINFO     migration_mod:053_irrigation_reliability_tables.py:185 Migration 53 (irrigation_reliability_tables) completed successfully\nINFO     migration_mod:057_add_lux_to_plant_readings.py:31 Adding 'lux' column to PlantReadings table\nINFO     migration_mod:057_add_lux_to_plant_readings.py:35 \u2713 Migration add_lux_to_plant_readings completed successfully\nINFO     migration_mod:059_add_ph_ec_to_plant_readings.py:36 \u2713 Migration add_ph_ec_to_plant_readings completed successfully\nINFO     migration_mod:060_backfill_plant_soil_moisture_overrides.py:81 \u2713 Migration backfill_plant_soil_moisture_overrides completed successfully (15 plants updated)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for plant_health_regressor\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for plant_health_classifier\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for irrigation_threshold\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for irrigation_response\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for irrigation_duration\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for irrigation_timing\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nINFO     activity_log:activity_logger.py:128 [INFO] system_startup: Smart Agriculture System started\nWARNING  app.workers.unified_scheduler:unified_scheduler.py:607 Scheduler already running\nINFO     root:__init__.py:283  Registered blueprint: auth\nINFO     root:__init__.py:283  Registered blueprint: ui\nINFO     root:__init__.py:283  Registered blueprint: plants_api\nINFO     root:__init__.py:283  Registered blueprint: disease\nINFO     root:__init__.py:283  Registered blueprint: settings_api\nINFO     root:__init__.py:283  Registered blueprint: growth_api\nINFO     root:__init__.py:283  Registered blueprint: devices_api\nINFO     root:__init__.py:283  Registered blueprint: dashboard_api\nINFO     root:__init__.py:283  Registered blueprint: harvest\nINFO     root:__init__.py:283  Registered blueprint: ml_base\nINFO     root:__init__.py:283  Registered blueprint: ml_predictions\nINFO     root:__init__.py:283  Registered blueprint: ml_models\nINFO     root:__init__.py:283  Registered blueprint: ml_monitoring\nINFO     root:__init__.py:283  Registered blueprint: ml_analytics\nINFO     root:__init__.py:283  Registered blueprint: ml_retraining\nINFO     root:__init__.py:283  Registered blueprint: ml_analysis\nINFO     root:__init__.py:283  Registered blueprint: ml_readiness\nINFO     root:__init__.py:283  Registered blueprint: ml_ab_testing\nINFO     root:__init__.py:283  Registered blueprint: ml_continuous\nINFO     root:__init__.py:283  Registered blueprint: ml_personalized\nINFO     root:__init__.py:283  Registered blueprint: ml_training_data\nINFO     root:__init__.py:283  Registered blueprint: health_api\nINFO     root:__init__.py:283  Registered blueprint: help_api\nINFO     root:__init__.py:283  Registered blueprint: blog_api\nINFO     root:__init__.py:283  Registered blueprint: docs_api\nINFO     root:__init__.py:308 Skipping hardware bootstrap (bootstrap_runtime=False)
---------------------------- Captured stdout call -----------------------------
2026-02-19 19:16:51,146 - app.services.application.threshold_service - ERROR - Error fetching unit thresholds for 1: No item with that key
Traceback (most recent call last):
  File "E:\Work\SYSGrow\backend\app\services\application\threshold_service.py", line 361, in get_unit_thresholds
    data = row if isinstance(row, dict) else {k: row[k] for k in row}
                                                 ~~~^^^
IndexError: No item with that key
2026-02-19 19:16:51,147 - app.middleware.api_auth - WARNING - Blocked unauthenticated POST to /api/v1/devices/v2/sensors from 127.0.0.1
------------------------------ Captured log call ------------------------------
ERROR    app.services.application.threshold_service:threshold_service.py:385 Error fetching unit thresholds for 1: No item with that key
Traceback (most recent call last):
  File "E:\Work\SYSGrow\backend\app\services\application\threshold_service.py", line 361, in get_unit_thresholds
    data = row if isinstance(row, dict) else {k: row[k] for k in row}
                                                 ~~~^^^
IndexError: No item with that key
WARNING  app.middleware.api_auth:api_auth.py:85 Blocked unauthenticated POST to /api/v1/devices/v2/sensors from 127.0.0.1
___________________ test_create_sensor_v2_validation_error ____________________
tests\test_api_devices_v2.py:57: in test_create_sensor_v2_validation_error
    assert response.status_code == 400
E   assert 401 == 400
E    +  where 401 = <WrapperTestResponse streamed [401 UNAUTHORIZED]>.status_code
---------------------------- Captured stdout setup ----------------------------
2026-02-19 19:16:51,156 - root - INFO - \u2705 Socket.IO initialized with CORS origins: *\n2026-02-19 19:16:51,183 - root - INFO - Seeded DeviceEnergyProfiles table with 16 default profiles.\n2026-02-19 19:16:51,184 - root - INFO - Seeded Plants table with 15 catalog entries.\n2026-02-19 19:16:51,185 - migration_mod - INFO - Migration 28 (irrigation_ml_context) completed successfully\n2026-02-19 19:16:51,186 - migration_mod - INFO - \u2705 Migration 029 (bayesian_threshold_columns) completed successfully\n2026-02-19 19:16:51,186 - migration_mod - INFO - \u2713 Created DiseaseOccurrence table\n2026-02-19 19:16:51,186 - migration_mod - INFO - \u2713 Created DiseasePredictionFeedback table\n2026-02-19 19:16:51,187 - migration_mod - INFO - \u2713 Created disease tracking indexes\n2026-02-19 19:16:51,187 - migration_mod - INFO - \u2705 Migration 30 (disease_tracking) completed successfully\n2026-02-19 19:16:51,187 - infrastructure.database.sqlite_handler - ERROR - Failed to run migration 029_disease_tracking.py: UNIQUE constraint failed: Migrations.migration_id\n2026-02-19 19:16:51,187 - migration_mod - INFO - Adding light_mode column to GrowthUnits...\n2026-02-19 19:16:51,188 - migration_mod - INFO - \u2713 Added light_mode column to GrowthUnits\n2026-02-19 19:16:51,189 - migration_mod - INFO - Added column aqi_threshold_override to Plants\n2026-02-19 19:16:51,189 - migration_mod - INFO - \u2713 Migration add_plant_threshold_overrides completed successfully\n2026-02-19 19:16:51,189 - migration_mod - INFO - \u2713 Migration add_plant_actuators completed successfully\n2026-02-19 19:16:51,190 - migration_mod - INFO - \u2713 Migration rename_light_intensity_threshold_to_lux_threshold completed successfully\n2026-02-19 19:16:51,190 - migration_mod - INFO - Column air_quality_threshold already exists in GrowthUnits\n2026-02-19 19:16:51,190 - migration_mod - INFO - Column air_quality_threshold_override already exists in Plants\n2026-02-19 19:16:51,190 - migration_mod - INFO - Old column co2_ppm not found in PlantReadings, adding co2\n2026-02-19 19:16:51,191 - migration_mod - INFO - Old column voc_ppb not found in PlantReadings, adding voc\n2026-02-19 19:16:51,192 - migration_mod - INFO - Old column aqi not found in PlantReadings, adding air_quality\n2026-02-19 19:16:51,192 - migration_mod - INFO - Old column co2_ppm not found in MLTrainingData, adding co2\n2026-02-19 19:16:51,192 - migration_mod - ERROR - Migration standardize_sensor_columns failed: no such table: MLTrainingData\nTraceback (most recent call last):\n  File "E:\\Work\\SYSGrow\\backend\\infrastructure\\database\\migrations\\034_standardize_sensor_columns.py", line 82, in migrate\n    _rename_or_copy(cursor, "MLTrainingData", old_name="co2_ppm", new_name="co2", column_type="REAL")\n    ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "E:\\Work\\SYSGrow\\backend\\infrastructure\\database\\migrations\\034_standardize_sensor_columns.py", line 46, in _rename_or_copy\n    cursor.execute(\n    ~~~~~~~~~~~~~~^\n        f"ALTER TABLE {table} ADD COLUMN {new_name} {column_type} {default_clause}"\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\nsqlite3.OperationalError: no such table: MLTrainingData\n2026-02-19 19:16:51,193 - infrastructure.database.sqlite_handler - ERROR - \u274c Migration 034_standardize_sensor_columns.py failed\nRunning migration 051 on <infrastructure.database.sqlite_handler.SQLiteDatabaseHandler object at 0x000002137586AE00>\n2026-02-19 19:16:51,194 - infrastructure.database.sqlite_handler - ERROR - Failed to run migration 051_add_actuator_config_unique_index.py: expected str, bytes or os.PathLike object, not SQLiteDatabaseHandler\nRunning migration 052 on <infrastructure.database.sqlite_handler.SQLiteDatabaseHandler object at 0x000002137586AE00>\n2026-02-19 19:16:51,194 - infrastructure.database.sqlite_handler - ERROR - Failed to run migration 052_add_recovery_codes.py: expected str, bytes or os.PathLike object, not SQLiteDatabaseHandler\n2026-02-19 19:16:51,194 - migration_mod - INFO - Migration 53 (irrigation_reliability_tables) completed successfully\n2026-02-19 19:16:51,195 - migration_mod - INFO - Adding 'lux' column to PlantReadings table\n2026-02-19 19:16:51,196 - migration_mod - INFO - \u2713 Migration add_lux_to_plant_readings completed successfully\n2026-02-19 19:16:51,197 - migration_mod - INFO - \u2713 Migration add_ph_ec_to_plant_readings completed successfully\n2026-02-19 19:16:51,198 - migration_mod - INFO - \u2713 Migration backfill_plant_soil_moisture_overrides completed successfully (15 plants updated)\n2026-02-19 19:16:51,202 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:16:51,202 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:16:51,202 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:16:51,202 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:16:56,212 - app.services.ai.model_registry - WARNING - No production version set for plant_health_regressor\n2026-02-19 19:16:56,212 - app.services.ai.model_registry - WARNING - No production version set for plant_health_classifier\n2026-02-19 19:16:56,212 - app.services.ai.model_registry - WARNING - No production version set for irrigation_threshold\n2026-02-19 19:16:56,212 - app.services.ai.model_registry - WARNING - No production version set for irrigation_response\n2026-02-19 19:16:56,213 - app.services.ai.model_registry - WARNING - No production version set for irrigation_duration\n2026-02-19 19:16:56,213 - app.services.ai.model_registry - WARNING - No production version set for irrigation_timing\n2026-02-19 19:16:56,214 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:16:56,214 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:16:56,214 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:16:56,215 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:16:56,218 - activity_log - INFO - [INFO] system_startup: Smart Agriculture System started\n2026-02-19 19:16:56,220 - app.workers.unified_scheduler - WARNING - Scheduler already running\n2026-02-19 19:16:56,299 - root - INFO -  Registered blueprint: auth\n2026-02-19 19:16:56,299 - root - INFO -  Registered blueprint: ui\n2026-02-19 19:16:56,299 - root - INFO -  Registered blueprint: plants_api\n2026-02-19 19:16:56,299 - root - INFO -  Registered blueprint: disease\n2026-02-19 19:16:56,299 - root - INFO -  Registered blueprint: settings_api\n2026-02-19 19:16:56,299 - root - INFO -  Registered blueprint: growth_api\n2026-02-19 19:16:56,300 - root - INFO -  Registered blueprint: devices_api\n2026-02-19 19:16:56,300 - root - INFO -  Registered blueprint: dashboard_api\n2026-02-19 19:16:56,300 - root - INFO -  Registered blueprint: harvest\n2026-02-19 19:16:56,300 - root - INFO -  Registered blueprint: ml_base\n2026-02-19 19:16:56,300 - root - INFO -  Registered blueprint: ml_predictions\n2026-02-19 19:16:56,300 - root - INFO -  Registered blueprint: ml_models\n2026-02-19 19:16:56,300 - root - INFO -  Registered blueprint: ml_monitoring\n2026-02-19 19:16:56,300 - root - INFO -  Registered blueprint: ml_analytics\n2026-02-19 19:16:56,300 - root - INFO -  Registered blueprint: ml_retraining\n2026-02-19 19:16:56,300 - root - INFO -  Registered blueprint: ml_analysis\n2026-02-19 19:16:56,300 - root - INFO -  Registered blueprint: ml_readiness\n2026-02-19 19:16:56,300 - root - INFO -  Registered blueprint: ml_ab_testing\n2026-02-19 19:16:56,300 - root - INFO -  Registered blueprint: ml_continuous\n2026-02-19 19:16:56,300 - root - INFO -  Registered blueprint: ml_personalized\n2026-02-19 19:16:56,300 - root - INFO -  Registered blueprint: ml_training_data\n2026-02-19 19:16:56,300 - root - INFO -  Registered blueprint: health_api\n2026-02-19 19:16:56,300 - root - INFO -  Registered blueprint: help_api\n2026-02-19 19:16:56,300 - root - INFO -  Registered blueprint: blog_api\n2026-02-19 19:16:56,301 - root - INFO -  Registered blueprint: docs_api\n2026-02-19 19:16:56,309 - root - INFO - Skipping hardware bootstrap (bootstrap_runtime=False)
----------------------------- Captured log setup ------------------------------
INFO     root:extensions.py:80 \u2705 Socket.IO initialized with CORS origins: *\nINFO     root:sqlite_handler.py:1652 Seeded DeviceEnergyProfiles table with 16 default profiles.\nINFO     root:sqlite_handler.py:1615 Seeded Plants table with 15 catalog entries.\nINFO     migration_mod:028_irrigation_ml_context.py:97 Migration 28 (irrigation_ml_context) completed successfully\nINFO     migration_mod:029_bayesian_threshold_columns.py:57 \u2705 Migration 029 (bayesian_threshold_columns) completed successfully\nINFO     migration_mod:029_disease_tracking.py:80 \u2713 Created DiseaseOccurrence table\nINFO     migration_mod:029_disease_tracking.py:119 \u2713 Created DiseasePredictionFeedback table\nINFO     migration_mod:029_disease_tracking.py:134 \u2713 Created disease tracking indexes\nINFO     migration_mod:029_disease_tracking.py:137 \u2705 Migration 30 (disease_tracking) completed successfully\nERROR    infrastructure.database.sqlite_handler:sqlite_handler.py:109 Failed to run migration 029_disease_tracking.py: UNIQUE constraint failed: Migrations.migration_id\nINFO     migration_mod:030_add_light_mode_column.py:44 Adding light_mode column to GrowthUnits...\nINFO     migration_mod:030_add_light_mode_column.py:49 \u2713 Added light_mode column to GrowthUnits\nINFO     migration_mod:031_add_plant_threshold_overrides.py:44 Added column aqi_threshold_override to Plants\nINFO     migration_mod:031_add_plant_threshold_overrides.py:47 \u2713 Migration add_plant_threshold_overrides completed successfully\nINFO     migration_mod:032_add_plant_actuators.py:39 \u2713 Migration add_plant_actuators completed successfully\nINFO     migration_mod:033_rename_light_intensity_threshold_to_lux_threshold.py:79 \u2713 Migration rename_light_intensity_threshold_to_lux_threshold completed successfully\nINFO     migration_mod:034_standardize_sensor_columns.py:41 Column air_quality_threshold already exists in GrowthUnits\nINFO     migration_mod:034_standardize_sensor_columns.py:41 Column air_quality_threshold_override already exists in Plants\nINFO     migration_mod:034_standardize_sensor_columns.py:45 Old column co2_ppm not found in PlantReadings, adding co2\nINFO     migration_mod:034_standardize_sensor_columns.py:45 Old column voc_ppb not found in PlantReadings, adding voc\nINFO     migration_mod:034_standardize_sensor_columns.py:45 Old column aqi not found in PlantReadings, adding air_quality\nINFO     migration_mod:034_standardize_sensor_columns.py:45 Old column co2_ppm not found in MLTrainingData, adding co2\nERROR    migration_mod:034_standardize_sensor_columns.py:93 Migration standardize_sensor_columns failed: no such table: MLTrainingData\nTraceback (most recent call last):\n  File "E:\\Work\\SYSGrow\\backend\\infrastructure\\database\\migrations\\034_standardize_sensor_columns.py", line 82, in migrate\n    _rename_or_copy(cursor, "MLTrainingData", old_name="co2_ppm", new_name="co2", column_type="REAL")\n    ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "E:\\Work\\SYSGrow\\backend\\infrastructure\\database\\migrations\\034_standardize_sensor_columns.py", line 46, in _rename_or_copy\n    cursor.execute(\n    ~~~~~~~~~~~~~~^\n        f"ALTER TABLE {table} ADD COLUMN {new_name} {column_type} {default_clause}"\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\nsqlite3.OperationalError: no such table: MLTrainingData\nERROR    infrastructure.database.sqlite_handler:sqlite_handler.py:107 \u274c Migration 034_standardize_sensor_columns.py failed\nERROR    infrastructure.database.sqlite_handler:sqlite_handler.py:109 Failed to run migration 051_add_actuator_config_unique_index.py: expected str, bytes or os.PathLike object, not SQLiteDatabaseHandler\nERROR    infrastructure.database.sqlite_handler:sqlite_handler.py:109 Failed to run migration 052_add_recovery_codes.py: expected str, bytes or os.PathLike object, not SQLiteDatabaseHandler\nINFO     migration_mod:053_irrigation_reliability_tables.py:185 Migration 53 (irrigation_reliability_tables) completed successfully\nINFO     migration_mod:057_add_lux_to_plant_readings.py:31 Adding 'lux' column to PlantReadings table\nINFO     migration_mod:057_add_lux_to_plant_readings.py:35 \u2713 Migration add_lux_to_plant_readings completed successfully\nINFO     migration_mod:059_add_ph_ec_to_plant_readings.py:36 \u2713 Migration add_ph_ec_to_plant_readings completed successfully\nINFO     migration_mod:060_backfill_plant_soil_moisture_overrides.py:81 \u2713 Migration backfill_plant_soil_moisture_overrides completed successfully (15 plants updated)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for plant_health_regressor\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for plant_health_classifier\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for irrigation_threshold\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for irrigation_response\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for irrigation_duration\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for irrigation_timing\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nINFO     activity_log:activity_logger.py:128 [INFO] system_startup: Smart Agriculture System started\nWARNING  app.workers.unified_scheduler:unified_scheduler.py:607 Scheduler already running\nINFO     root:__init__.py:283  Registered blueprint: auth\nINFO     root:__init__.py:283  Registered blueprint: ui\nINFO     root:__init__.py:283  Registered blueprint: plants_api\nINFO     root:__init__.py:283  Registered blueprint: disease\nINFO     root:__init__.py:283  Registered blueprint: settings_api\nINFO     root:__init__.py:283  Registered blueprint: growth_api\nINFO     root:__init__.py:283  Registered blueprint: devices_api\nINFO     root:__init__.py:283  Registered blueprint: dashboard_api\nINFO     root:__init__.py:283  Registered blueprint: harvest\nINFO     root:__init__.py:283  Registered blueprint: ml_base\nINFO     root:__init__.py:283  Registered blueprint: ml_predictions\nINFO     root:__init__.py:283  Registered blueprint: ml_models\nINFO     root:__init__.py:283  Registered blueprint: ml_monitoring\nINFO     root:__init__.py:283  Registered blueprint: ml_analytics\nINFO     root:__init__.py:283  Registered blueprint: ml_retraining\nINFO     root:__init__.py:283  Registered blueprint: ml_analysis\nINFO     root:__init__.py:283  Registered blueprint: ml_readiness\nINFO     root:__init__.py:283  Registered blueprint: ml_ab_testing\nINFO     root:__init__.py:283  Registered blueprint: ml_continuous\nINFO     root:__init__.py:283  Registered blueprint: ml_personalized\nINFO     root:__init__.py:283  Registered blueprint: ml_training_data\nINFO     root:__init__.py:283  Registered blueprint: health_api\nINFO     root:__init__.py:283  Registered blueprint: help_api\nINFO     root:__init__.py:283  Registered blueprint: blog_api\nINFO     root:__init__.py:283  Registered blueprint: docs_api\nINFO     root:__init__.py:308 Skipping hardware bootstrap (bootstrap_runtime=False)
---------------------------- Captured stdout call -----------------------------
2026-02-19 19:16:56,311 - app.middleware.api_auth - WARNING - Blocked unauthenticated POST to /api/v1/devices/v2/sensors from 127.0.0.1
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.api_auth:api_auth.py:85 Blocked unauthenticated POST to /api/v1/devices/v2/sensors from 127.0.0.1
_____________________ test_create_actuator_v2_happy_path ______________________
tests\test_api_devices_v2.py:74: in test_create_actuator_v2_happy_path
    assert response.status_code == 201
E   assert 401 == 201
E    +  where 401 = <WrapperTestResponse streamed [401 UNAUTHORIZED]>.status_code
---------------------------- Captured stdout setup ----------------------------
2026-02-19 19:16:56,317 - root - INFO - \u2705 Socket.IO initialized with CORS origins: *\n2026-02-19 19:16:56,344 - root - INFO - Seeded DeviceEnergyProfiles table with 16 default profiles.\n2026-02-19 19:16:56,345 - root - INFO - Seeded Plants table with 15 catalog entries.\n2026-02-19 19:16:56,346 - migration_mod - INFO - Migration 28 (irrigation_ml_context) completed successfully\n2026-02-19 19:16:56,346 - migration_mod - INFO - \u2705 Migration 029 (bayesian_threshold_columns) completed successfully\n2026-02-19 19:16:56,347 - migration_mod - INFO - \u2713 Created DiseaseOccurrence table\n2026-02-19 19:16:56,347 - migration_mod - INFO - \u2713 Created DiseasePredictionFeedback table\n2026-02-19 19:16:56,347 - migration_mod - INFO - \u2713 Created disease tracking indexes\n2026-02-19 19:16:56,348 - migration_mod - INFO - \u2705 Migration 30 (disease_tracking) completed successfully\n2026-02-19 19:16:56,348 - infrastructure.database.sqlite_handler - ERROR - Failed to run migration 029_disease_tracking.py: UNIQUE constraint failed: Migrations.migration_id\n2026-02-19 19:16:56,348 - migration_mod - INFO - Adding light_mode column to GrowthUnits...\n2026-02-19 19:16:56,349 - migration_mod - INFO - \u2713 Added light_mode column to GrowthUnits\n2026-02-19 19:16:56,350 - migration_mod - INFO - Added column aqi_threshold_override to Plants\n2026-02-19 19:16:56,350 - migration_mod - INFO - \u2713 Migration add_plant_threshold_overrides completed successfully\n2026-02-19 19:16:56,350 - migration_mod - INFO - \u2713 Migration add_plant_actuators completed successfully\n2026-02-19 19:16:56,351 - migration_mod - INFO - \u2713 Migration rename_light_intensity_threshold_to_lux_threshold completed successfully\n2026-02-19 19:16:56,351 - migration_mod - INFO - Column air_quality_threshold already exists in GrowthUnits\n2026-02-19 19:16:56,351 - migration_mod - INFO - Column air_quality_threshold_override already exists in Plants\n2026-02-19 19:16:56,351 - migration_mod - INFO - Old column co2_ppm not found in PlantReadings, adding co2\n2026-02-19 19:16:56,352 - migration_mod - INFO - Old column voc_ppb not found in PlantReadings, adding voc\n2026-02-19 19:16:56,352 - migration_mod - INFO - Old column aqi not found in PlantReadings, adding air_quality\n2026-02-19 19:16:56,353 - migration_mod - INFO - Old column co2_ppm not found in MLTrainingData, adding co2\n2026-02-19 19:16:56,353 - migration_mod - ERROR - Migration standardize_sensor_columns failed: no such table: MLTrainingData\nTraceback (most recent call last):\n  File "E:\\Work\\SYSGrow\\backend\\infrastructure\\database\\migrations\\034_standardize_sensor_columns.py", line 82, in migrate\n    _rename_or_copy(cursor, "MLTrainingData", old_name="co2_ppm", new_name="co2", column_type="REAL")\n    ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "E:\\Work\\SYSGrow\\backend\\infrastructure\\database\\migrations\\034_standardize_sensor_columns.py", line 46, in _rename_or_copy\n    cursor.execute(\n    ~~~~~~~~~~~~~~^\n        f"ALTER TABLE {table} ADD COLUMN {new_name} {column_type} {default_clause}"\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\nsqlite3.OperationalError: no such table: MLTrainingData\n2026-02-19 19:16:56,354 - infrastructure.database.sqlite_handler - ERROR - \u274c Migration 034_standardize_sensor_columns.py failed\nRunning migration 051 on <infrastructure.database.sqlite_handler.SQLiteDatabaseHandler object at 0x000002137FF18AF0>\n2026-02-19 19:16:56,355 - infrastructure.database.sqlite_handler - ERROR - Failed to run migration 051_add_actuator_config_unique_index.py: expected str, bytes or os.PathLike object, not SQLiteDatabaseHandler\nRunning migration 052 on <infrastructure.database.sqlite_handler.SQLiteDatabaseHandler object at 0x000002137FF18AF0>\n2026-02-19 19:16:56,355 - infrastructure.database.sqlite_handler - ERROR - Failed to run migration 052_add_recovery_codes.py: expected str, bytes or os.PathLike object, not SQLiteDatabaseHandler\n2026-02-19 19:16:56,355 - migration_mod - INFO - Migration 53 (irrigation_reliability_tables) completed successfully\n2026-02-19 19:16:56,356 - migration_mod - INFO - Adding 'lux' column to PlantReadings table\n2026-02-19 19:16:56,357 - migration_mod - INFO - \u2713 Migration add_lux_to_plant_readings completed successfully\n2026-02-19 19:16:56,357 - migration_mod - INFO - \u2713 Migration add_ph_ec_to_plant_readings completed successfully\n2026-02-19 19:16:56,359 - migration_mod - INFO - \u2713 Migration backfill_plant_soil_moisture_overrides completed successfully (15 plants updated)\n2026-02-19 19:16:56,363 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:16:56,363 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:16:56,363 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:16:56,364 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:16:56,364 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:17:01,375 - app.services.ai.model_registry - WARNING - No production version set for plant_health_regressor\n2026-02-19 19:17:01,375 - app.services.ai.model_registry - WARNING - No production version set for plant_health_classifier\n2026-02-19 19:17:01,375 - app.services.ai.model_registry - WARNING - No production version set for irrigation_threshold\n2026-02-19 19:17:01,375 - app.services.ai.model_registry - WARNING - No production version set for irrigation_response\n2026-02-19 19:17:01,375 - app.services.ai.model_registry - WARNING - No production version set for irrigation_duration\n2026-02-19 19:17:01,375 - app.services.ai.model_registry - WARNING - No production version set for irrigation_timing\n2026-02-19 19:17:01,376 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:17:01,377 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:17:01,377 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:17:01,377 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:17:01,377 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:17:01,379 - activity_log - INFO - [INFO] system_startup: Smart Agriculture System started\n2026-02-19 19:17:01,381 - app.workers.unified_scheduler - WARNING - Scheduler already running\n2026-02-19 19:17:01,470 - root - INFO -  Registered blueprint: auth\n2026-02-19 19:17:01,470 - root - INFO -  Registered blueprint: ui\n2026-02-19 19:17:01,470 - root - INFO -  Registered blueprint: plants_api\n2026-02-19 19:17:01,470 - root - INFO -  Registered blueprint: disease\n2026-02-19 19:17:01,470 - root - INFO -  Registered blueprint: settings_api\n2026-02-19 19:17:01,470 - root - INFO -  Registered blueprint: growth_api\n2026-02-19 19:17:01,470 - root - INFO -  Registered blueprint: devices_api\n2026-02-19 19:17:01,470 - root - INFO -  Registered blueprint: dashboard_api\n2026-02-19 19:17:01,470 - root - INFO -  Registered blueprint: harvest\n2026-02-19 19:17:01,471 - root - INFO -  Registered blueprint: ml_base\n2026-02-19 19:17:01,471 - root - INFO -  Registered blueprint: ml_predictions\n2026-02-19 19:17:01,471 - root - INFO -  Registered blueprint: ml_models\n2026-02-19 19:17:01,471 - root - INFO -  Registered blueprint: ml_monitoring\n2026-02-19 19:17:01,471 - root - INFO -  Registered blueprint: ml_analytics\n2026-02-19 19:17:01,471 - root - INFO -  Registered blueprint: ml_retraining\n2026-02-19 19:17:01,471 - root - INFO -  Registered blueprint: ml_analysis\n2026-02-19 19:17:01,471 - root - INFO -  Registered blueprint: ml_readiness\n2026-02-19 19:17:01,471 - root - INFO -  Registered blueprint: ml_ab_testing\n2026-02-19 19:17:01,471 - root - INFO -  Registered blueprint: ml_continuous\n2026-02-19 19:17:01,471 - root - INFO -  Registered blueprint: ml_personalized\n2026-02-19 19:17:01,471 - root - INFO -  Registered blueprint: ml_training_data\n2026-02-19 19:17:01,471 - root - INFO -  Registered blueprint: health_api\n2026-02-19 19:17:01,471 - root - INFO -  Registered blueprint: help_api\n2026-02-19 19:17:01,471 - root - INFO -  Registered blueprint: blog_api\n2026-02-19 19:17:01,471 - root - INFO -  Registered blueprint: docs_api\n2026-02-19 19:17:01,481 - root - INFO - Skipping hardware bootstrap (bootstrap_runtime=False)
----------------------------- Captured log setup ------------------------------
INFO     root:extensions.py:80 \u2705 Socket.IO initialized with CORS origins: *\nINFO     root:sqlite_handler.py:1652 Seeded DeviceEnergyProfiles table with 16 default profiles.\nINFO     root:sqlite_handler.py:1615 Seeded Plants table with 15 catalog entries.\nINFO     migration_mod:028_irrigation_ml_context.py:97 Migration 28 (irrigation_ml_context) completed successfully\nINFO     migration_mod:029_bayesian_threshold_columns.py:57 \u2705 Migration 029 (bayesian_threshold_columns) completed successfully\nINFO     migration_mod:029_disease_tracking.py:80 \u2713 Created DiseaseOccurrence table\nINFO     migration_mod:029_disease_tracking.py:119 \u2713 Created DiseasePredictionFeedback table\nINFO     migration_mod:029_disease_tracking.py:134 \u2713 Created disease tracking indexes\nINFO     migration_mod:029_disease_tracking.py:137 \u2705 Migration 30 (disease_tracking) completed successfully\nERROR    infrastructure.database.sqlite_handler:sqlite_handler.py:109 Failed to run migration 029_disease_tracking.py: UNIQUE constraint failed: Migrations.migration_id\nINFO     migration_mod:030_add_light_mode_column.py:44 Adding light_mode column to GrowthUnits...\nINFO     migration_mod:030_add_light_mode_column.py:49 \u2713 Added light_mode column to GrowthUnits\nINFO     migration_mod:031_add_plant_threshold_overrides.py:44 Added column aqi_threshold_override to Plants\nINFO     migration_mod:031_add_plant_threshold_overrides.py:47 \u2713 Migration add_plant_threshold_overrides completed successfully\nINFO     migration_mod:032_add_plant_actuators.py:39 \u2713 Migration add_plant_actuators completed successfully\nINFO     migration_mod:033_rename_light_intensity_threshold_to_lux_threshold.py:79 \u2713 Migration rename_light_intensity_threshold_to_lux_threshold completed successfully\nINFO     migration_mod:034_standardize_sensor_columns.py:41 Column air_quality_threshold already exists in GrowthUnits\nINFO     migration_mod:034_standardize_sensor_columns.py:41 Column air_quality_threshold_override already exists in Plants\nINFO     migration_mod:034_standardize_sensor_columns.py:45 Old column co2_ppm not found in PlantReadings, adding co2\nINFO     migration_mod:034_standardize_sensor_columns.py:45 Old column voc_ppb not found in PlantReadings, adding voc\nINFO     migration_mod:034_standardize_sensor_columns.py:45 Old column aqi not found in PlantReadings, adding air_quality\nINFO     migration_mod:034_standardize_sensor_columns.py:45 Old column co2_ppm not found in MLTrainingData, adding co2\nERROR    migration_mod:034_standardize_sensor_columns.py:93 Migration standardize_sensor_columns failed: no such table: MLTrainingData\nTraceback (most recent call last):\n  File "E:\\Work\\SYSGrow\\backend\\infrastructure\\database\\migrations\\034_standardize_sensor_columns.py", line 82, in migrate\n    _rename_or_copy(cursor, "MLTrainingData", old_name="co2_ppm", new_name="co2", column_type="REAL")\n    ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "E:\\Work\\SYSGrow\\backend\\infrastructure\\database\\migrations\\034_standardize_sensor_columns.py", line 46, in _rename_or_copy\n    cursor.execute(\n    ~~~~~~~~~~~~~~^\n        f"ALTER TABLE {table} ADD COLUMN {new_name} {column_type} {default_clause}"\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\nsqlite3.OperationalError: no such table: MLTrainingData\nERROR    infrastructure.database.sqlite_handler:sqlite_handler.py:107 \u274c Migration 034_standardize_sensor_columns.py failed\nERROR    infrastructure.database.sqlite_handler:sqlite_handler.py:109 Failed to run migration 051_add_actuator_config_unique_index.py: expected str, bytes or os.PathLike object, not SQLiteDatabaseHandler\nERROR    infrastructure.database.sqlite_handler:sqlite_handler.py:109 Failed to run migration 052_add_recovery_codes.py: expected str, bytes or os.PathLike object, not SQLiteDatabaseHandler\nINFO     migration_mod:053_irrigation_reliability_tables.py:185 Migration 53 (irrigation_reliability_tables) completed successfully\nINFO     migration_mod:057_add_lux_to_plant_readings.py:31 Adding 'lux' column to PlantReadings table\nINFO     migration_mod:057_add_lux_to_plant_readings.py:35 \u2713 Migration add_lux_to_plant_readings completed successfully\nINFO     migration_mod:059_add_ph_ec_to_plant_readings.py:36 \u2713 Migration add_ph_ec_to_plant_readings completed successfully\nINFO     migration_mod:060_backfill_plant_soil_moisture_overrides.py:81 \u2713 Migration backfill_plant_soil_moisture_overrides completed successfully (15 plants updated)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for plant_health_regressor\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for plant_health_classifier\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for irrigation_threshold\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for irrigation_response\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for irrigation_duration\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for irrigation_timing\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nINFO     activity_log:activity_logger.py:128 [INFO] system_startup: Smart Agriculture System started\nWARNING  app.workers.unified_scheduler:unified_scheduler.py:607 Scheduler already running\nINFO     root:__init__.py:283  Registered blueprint: auth\nINFO     root:__init__.py:283  Registered blueprint: ui\nINFO     root:__init__.py:283  Registered blueprint: plants_api\nINFO     root:__init__.py:283  Registered blueprint: disease\nINFO     root:__init__.py:283  Registered blueprint: settings_api\nINFO     root:__init__.py:283  Registered blueprint: growth_api\nINFO     root:__init__.py:283  Registered blueprint: devices_api\nINFO     root:__init__.py:283  Registered blueprint: dashboard_api\nINFO     root:__init__.py:283  Registered blueprint: harvest\nINFO     root:__init__.py:283  Registered blueprint: ml_base\nINFO     root:__init__.py:283  Registered blueprint: ml_predictions\nINFO     root:__init__.py:283  Registered blueprint: ml_models\nINFO     root:__init__.py:283  Registered blueprint: ml_monitoring\nINFO     root:__init__.py:283  Registered blueprint: ml_analytics\nINFO     root:__init__.py:283  Registered blueprint: ml_retraining\nINFO     root:__init__.py:283  Registered blueprint: ml_analysis\nINFO     root:__init__.py:283  Registered blueprint: ml_readiness\nINFO     root:__init__.py:283  Registered blueprint: ml_ab_testing\nINFO     root:__init__.py:283  Registered blueprint: ml_continuous\nINFO     root:__init__.py:283  Registered blueprint: ml_personalized\nINFO     root:__init__.py:283  Registered blueprint: ml_training_data\nINFO     root:__init__.py:283  Registered blueprint: health_api\nINFO     root:__init__.py:283  Registered blueprint: help_api\nINFO     root:__init__.py:283  Registered blueprint: blog_api\nINFO     root:__init__.py:283  Registered blueprint: docs_api\nINFO     root:__init__.py:308 Skipping hardware bootstrap (bootstrap_runtime=False)
---------------------------- Captured stdout call -----------------------------
2026-02-19 19:17:01,483 - app.services.application.threshold_service - ERROR - Error fetching unit thresholds for 1: No item with that key
Traceback (most recent call last):
  File "E:\Work\SYSGrow\backend\app\services\application\threshold_service.py", line 361, in get_unit_thresholds
    data = row if isinstance(row, dict) else {k: row[k] for k in row}
                                                 ~~~^^^
IndexError: No item with that key
2026-02-19 19:17:01,485 - app.middleware.api_auth - WARNING - Blocked unauthenticated POST to /api/v1/devices/v2/actuators from 127.0.0.1
------------------------------ Captured log call ------------------------------
ERROR    app.services.application.threshold_service:threshold_service.py:385 Error fetching unit thresholds for 1: No item with that key
Traceback (most recent call last):
  File "E:\Work\SYSGrow\backend\app\services\application\threshold_service.py", line 361, in get_unit_thresholds
    data = row if isinstance(row, dict) else {k: row[k] for k in row}
                                                 ~~~^^^
IndexError: No item with that key
WARNING  app.middleware.api_auth:api_auth.py:85 Blocked unauthenticated POST to /api/v1/devices/v2/actuators from 127.0.0.1
__________________ test_create_actuator_v2_validation_error ___________________
tests\test_api_devices_v2.py:88: in test_create_actuator_v2_validation_error
    assert response.status_code == 400
E   assert 401 == 400
E    +  where 401 = <WrapperTestResponse streamed [401 UNAUTHORIZED]>.status_code
---------------------------- Captured stdout setup ----------------------------
2026-02-19 19:17:01,495 - root - INFO - \u2705 Socket.IO initialized with CORS origins: *\n2026-02-19 19:17:01,524 - root - INFO - Seeded DeviceEnergyProfiles table with 16 default profiles.\n2026-02-19 19:17:01,525 - root - INFO - Seeded Plants table with 15 catalog entries.\n2026-02-19 19:17:01,526 - migration_mod - INFO - Migration 28 (irrigation_ml_context) completed successfully\n2026-02-19 19:17:01,527 - migration_mod - INFO - \u2705 Migration 029 (bayesian_threshold_columns) completed successfully\n2026-02-19 19:17:01,527 - migration_mod - INFO - \u2713 Created DiseaseOccurrence table\n2026-02-19 19:17:01,528 - migration_mod - INFO - \u2713 Created DiseasePredictionFeedback table\n2026-02-19 19:17:01,528 - migration_mod - INFO - \u2713 Created disease tracking indexes\n2026-02-19 19:17:01,528 - migration_mod - INFO - \u2705 Migration 30 (disease_tracking) completed successfully\n2026-02-19 19:17:01,528 - infrastructure.database.sqlite_handler - ERROR - Failed to run migration 029_disease_tracking.py: UNIQUE constraint failed: Migrations.migration_id\n2026-02-19 19:17:01,529 - migration_mod - INFO - Adding light_mode column to GrowthUnits...\n2026-02-19 19:17:01,529 - migration_mod - INFO - \u2713 Added light_mode column to GrowthUnits\n2026-02-19 19:17:01,531 - migration_mod - INFO - Added column aqi_threshold_override to Plants\n2026-02-19 19:17:01,531 - migration_mod - INFO - \u2713 Migration add_plant_threshold_overrides completed successfully\n2026-02-19 19:17:01,531 - migration_mod - INFO - \u2713 Migration add_plant_actuators completed successfully\n2026-02-19 19:17:01,531 - migration_mod - INFO - \u2713 Migration rename_light_intensity_threshold_to_lux_threshold completed successfully\n2026-02-19 19:17:01,532 - migration_mod - INFO - Column air_quality_threshold already exists in GrowthUnits\n2026-02-19 19:17:01,532 - migration_mod - INFO - Column air_quality_threshold_override already exists in Plants\n2026-02-19 19:17:01,532 - migration_mod - INFO - Old column co2_ppm not found in PlantReadings, adding co2\n2026-02-19 19:17:01,533 - migration_mod - INFO - Old column voc_ppb not found in PlantReadings, adding voc\n2026-02-19 19:17:01,534 - migration_mod - INFO - Old column aqi not found in PlantReadings, adding air_quality\n2026-02-19 19:17:01,534 - migration_mod - INFO - Old column co2_ppm not found in MLTrainingData, adding co2\n2026-02-19 19:17:01,534 - migration_mod - ERROR - Migration standardize_sensor_columns failed: no such table: MLTrainingData\nTraceback (most recent call last):\n  File "E:\\Work\\SYSGrow\\backend\\infrastructure\\database\\migrations\\034_standardize_sensor_columns.py", line 82, in migrate\n    _rename_or_copy(cursor, "MLTrainingData", old_name="co2_ppm", new_name="co2", column_type="REAL")\n    ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "E:\\Work\\SYSGrow\\backend\\infrastructure\\database\\migrations\\034_standardize_sensor_columns.py", line 46, in _rename_or_copy\n    cursor.execute(\n    ~~~~~~~~~~~~~~^\n        f"ALTER TABLE {table} ADD COLUMN {new_name} {column_type} {default_clause}"\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\nsqlite3.OperationalError: no such table: MLTrainingData\n2026-02-19 19:17:01,535 - infrastructure.database.sqlite_handler - ERROR - \u274c Migration 034_standardize_sensor_columns.py failed\nRunning migration 051 on <infrastructure.database.sqlite_handler.SQLiteDatabaseHandler object at 0x000002131FE38150>\n2026-02-19 19:17:01,536 - infrastructure.database.sqlite_handler - ERROR - Failed to run migration 051_add_actuator_config_unique_index.py: expected str, bytes or os.PathLike object, not SQLiteDatabaseHandler\nRunning migration 052 on <infrastructure.database.sqlite_handler.SQLiteDatabaseHandler object at 0x000002131FE38150>\n2026-02-19 19:17:01,536 - infrastructure.database.sqlite_handler - ERROR - Failed to run migration 052_add_recovery_codes.py: expected str, bytes or os.PathLike object, not SQLiteDatabaseHandler\n2026-02-19 19:17:01,536 - migration_mod - INFO - Migration 53 (irrigation_reliability_tables) completed successfully\n2026-02-19 19:17:01,537 - migration_mod - INFO - Adding 'lux' column to PlantReadings table\n2026-02-19 19:17:01,538 - migration_mod - INFO - \u2713 Migration add_lux_to_plant_readings completed successfully\n2026-02-19 19:17:01,539 - migration_mod - INFO - \u2713 Migration add_ph_ec_to_plant_readings completed successfully\n2026-02-19 19:17:01,540 - migration_mod - INFO - \u2713 Migration backfill_plant_soil_moisture_overrides completed successfully (15 plants updated)\n2026-02-19 19:17:01,544 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:17:01,544 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:17:01,545 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:17:01,545 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:17:01,545 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:17:01,545 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:17:06,557 - app.services.ai.model_registry - WARNING - No production version set for plant_health_regressor\n2026-02-19 19:17:06,557 - app.services.ai.model_registry - WARNING - No production version set for plant_health_classifier\n2026-02-19 19:17:06,557 - app.services.ai.model_registry - WARNING - No production version set for irrigation_threshold\n2026-02-19 19:17:06,557 - app.services.ai.model_registry - WARNING - No production version set for irrigation_response\n2026-02-19 19:17:06,557 - app.services.ai.model_registry - WARNING - No production version set for irrigation_duration\n2026-02-19 19:17:06,557 - app.services.ai.model_registry - WARNING - No production version set for irrigation_timing\n2026-02-19 19:17:06,558 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:17:06,558 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:17:06,559 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:17:06,559 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:17:06,559 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:17:06,560 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:17:06,564 - activity_log - INFO - [INFO] system_startup: Smart Agriculture System started\n2026-02-19 19:17:06,566 - app.workers.unified_scheduler - WARNING - Scheduler already running\n2026-02-19 19:17:06,649 - root - INFO -  Registered blueprint: auth\n2026-02-19 19:17:06,649 - root - INFO -  Registered blueprint: ui\n2026-02-19 19:17:06,649 - root - INFO -  Registered blueprint: plants_api\n2026-02-19 19:17:06,649 - root - INFO -  Registered blueprint: disease\n2026-02-19 19:17:06,650 - root - INFO -  Registered blueprint: settings_api\n2026-02-19 19:17:06,650 - root - INFO -  Registered blueprint: growth_api\n2026-02-19 19:17:06,650 - root - INFO -  Registered blueprint: devices_api\n2026-02-19 19:17:06,650 - root - INFO -  Registered blueprint: dashboard_api\n2026-02-19 19:17:06,650 - root - INFO -  Registered blueprint: harvest\n2026-02-19 19:17:06,650 - root - INFO -  Registered blueprint: ml_base\n2026-02-19 19:17:06,650 - root - INFO -  Registered blueprint: ml_predictions\n2026-02-19 19:17:06,650 - root - INFO -  Registered blueprint: ml_models\n2026-02-19 19:17:06,650 - root - INFO -  Registered blueprint: ml_monitoring\n2026-02-19 19:17:06,650 - root - INFO -  Registered blueprint: ml_analytics\n2026-02-19 19:17:06,650 - root - INFO -  Registered blueprint: ml_retraining\n2026-02-19 19:17:06,650 - root - INFO -  Registered blueprint: ml_analysis\n2026-02-19 19:17:06,650 - root - INFO -  Registered blueprint: ml_readiness\n2026-02-19 19:17:06,650 - root - INFO -  Registered blueprint: ml_ab_testing\n2026-02-19 19:17:06,650 - root - INFO -  Registered blueprint: ml_continuous\n2026-02-19 19:17:06,650 - root - INFO -  Registered blueprint: ml_personalized\n2026-02-19 19:17:06,650 - root - INFO -  Registered blueprint: ml_training_data\n2026-02-19 19:17:06,650 - root - INFO -  Registered blueprint: health_api\n2026-02-19 19:17:06,650 - root - INFO -  Registered blueprint: help_api\n2026-02-19 19:17:06,650 - root - INFO -  Registered blueprint: blog_api\n2026-02-19 19:17:06,650 - root - INFO -  Registered blueprint: docs_api\n2026-02-19 19:17:06,659 - root - INFO - Skipping hardware bootstrap (bootstrap_runtime=False)
----------------------------- Captured log setup ------------------------------
INFO     root:extensions.py:80 \u2705 Socket.IO initialized with CORS origins: *\nINFO     root:sqlite_handler.py:1652 Seeded DeviceEnergyProfiles table with 16 default profiles.\nINFO     root:sqlite_handler.py:1615 Seeded Plants table with 15 catalog entries.\nINFO     migration_mod:028_irrigation_ml_context.py:97 Migration 28 (irrigation_ml_context) completed successfully\nINFO     migration_mod:029_bayesian_threshold_columns.py:57 \u2705 Migration 029 (bayesian_threshold_columns) completed successfully\nINFO     migration_mod:029_disease_tracking.py:80 \u2713 Created DiseaseOccurrence table\nINFO     migration_mod:029_disease_tracking.py:119 \u2713 Created DiseasePredictionFeedback table\nINFO     migration_mod:029_disease_tracking.py:134 \u2713 Created disease tracking indexes\nINFO     migration_mod:029_disease_tracking.py:137 \u2705 Migration 30 (disease_tracking) completed successfully\nERROR    infrastructure.database.sqlite_handler:sqlite_handler.py:109 Failed to run migration 029_disease_tracking.py: UNIQUE constraint failed: Migrations.migration_id\nINFO     migration_mod:030_add_light_mode_column.py:44 Adding light_mode column to GrowthUnits...\nINFO     migration_mod:030_add_light_mode_column.py:49 \u2713 Added light_mode column to GrowthUnits\nINFO     migration_mod:031_add_plant_threshold_overrides.py:44 Added column aqi_threshold_override to Plants\nINFO     migration_mod:031_add_plant_threshold_overrides.py:47 \u2713 Migration add_plant_threshold_overrides completed successfully\nINFO     migration_mod:032_add_plant_actuators.py:39 \u2713 Migration add_plant_actuators completed successfully\nINFO     migration_mod:033_rename_light_intensity_threshold_to_lux_threshold.py:79 \u2713 Migration rename_light_intensity_threshold_to_lux_threshold completed successfully\nINFO     migration_mod:034_standardize_sensor_columns.py:41 Column air_quality_threshold already exists in GrowthUnits\nINFO     migration_mod:034_standardize_sensor_columns.py:41 Column air_quality_threshold_override already exists in Plants\nINFO     migration_mod:034_standardize_sensor_columns.py:45 Old column co2_ppm not found in PlantReadings, adding co2\nINFO     migration_mod:034_standardize_sensor_columns.py:45 Old column voc_ppb not found in PlantReadings, adding voc\nINFO     migration_mod:034_standardize_sensor_columns.py:45 Old column aqi not found in PlantReadings, adding air_quality\nINFO     migration_mod:034_standardize_sensor_columns.py:45 Old column co2_ppm not found in MLTrainingData, adding co2\nERROR    migration_mod:034_standardize_sensor_columns.py:93 Migration standardize_sensor_columns failed: no such table: MLTrainingData\nTraceback (most recent call last):\n  File "E:\\Work\\SYSGrow\\backend\\infrastructure\\database\\migrations\\034_standardize_sensor_columns.py", line 82, in migrate\n    _rename_or_copy(cursor, "MLTrainingData", old_name="co2_ppm", new_name="co2", column_type="REAL")\n    ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "E:\\Work\\SYSGrow\\backend\\infrastructure\\database\\migrations\\034_standardize_sensor_columns.py", line 46, in _rename_or_copy\n    cursor.execute(\n    ~~~~~~~~~~~~~~^\n        f"ALTER TABLE {table} ADD COLUMN {new_name} {column_type} {default_clause}"\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\nsqlite3.OperationalError: no such table: MLTrainingData\nERROR    infrastructure.database.sqlite_handler:sqlite_handler.py:107 \u274c Migration 034_standardize_sensor_columns.py failed\nERROR    infrastructure.database.sqlite_handler:sqlite_handler.py:109 Failed to run migration 051_add_actuator_config_unique_index.py: expected str, bytes or os.PathLike object, not SQLiteDatabaseHandler\nERROR    infrastructure.database.sqlite_handler:sqlite_handler.py:109 Failed to run migration 052_add_recovery_codes.py: expected str, bytes or os.PathLike object, not SQLiteDatabaseHandler\nINFO     migration_mod:053_irrigation_reliability_tables.py:185 Migration 53 (irrigation_reliability_tables) completed successfully\nINFO     migration_mod:057_add_lux_to_plant_readings.py:31 Adding 'lux' column to PlantReadings table\nINFO     migration_mod:057_add_lux_to_plant_readings.py:35 \u2713 Migration add_lux_to_plant_readings completed successfully\nINFO     migration_mod:059_add_ph_ec_to_plant_readings.py:36 \u2713 Migration add_ph_ec_to_plant_readings completed successfully\nINFO     migration_mod:060_backfill_plant_soil_moisture_overrides.py:81 \u2713 Migration backfill_plant_soil_moisture_overrides completed successfully (15 plants updated)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for plant_health_regressor\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for plant_health_classifier\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for irrigation_threshold\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for irrigation_response\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for irrigation_duration\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for irrigation_timing\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nINFO     activity_log:activity_logger.py:128 [INFO] system_startup: Smart Agriculture System started\nWARNING  app.workers.unified_scheduler:unified_scheduler.py:607 Scheduler already running\nINFO     root:__init__.py:283  Registered blueprint: auth\nINFO     root:__init__.py:283  Registered blueprint: ui\nINFO     root:__init__.py:283  Registered blueprint: plants_api\nINFO     root:__init__.py:283  Registered blueprint: disease\nINFO     root:__init__.py:283  Registered blueprint: settings_api\nINFO     root:__init__.py:283  Registered blueprint: growth_api\nINFO     root:__init__.py:283  Registered blueprint: devices_api\nINFO     root:__init__.py:283  Registered blueprint: dashboard_api\nINFO     root:__init__.py:283  Registered blueprint: harvest\nINFO     root:__init__.py:283  Registered blueprint: ml_base\nINFO     root:__init__.py:283  Registered blueprint: ml_predictions\nINFO     root:__init__.py:283  Registered blueprint: ml_models\nINFO     root:__init__.py:283  Registered blueprint: ml_monitoring\nINFO     root:__init__.py:283  Registered blueprint: ml_analytics\nINFO     root:__init__.py:283  Registered blueprint: ml_retraining\nINFO     root:__init__.py:283  Registered blueprint: ml_analysis\nINFO     root:__init__.py:283  Registered blueprint: ml_readiness\nINFO     root:__init__.py:283  Registered blueprint: ml_ab_testing\nINFO     root:__init__.py:283  Registered blueprint: ml_continuous\nINFO     root:__init__.py:283  Registered blueprint: ml_personalized\nINFO     root:__init__.py:283  Registered blueprint: ml_training_data\nINFO     root:__init__.py:283  Registered blueprint: health_api\nINFO     root:__init__.py:283  Registered blueprint: help_api\nINFO     root:__init__.py:283  Registered blueprint: blog_api\nINFO     root:__init__.py:283  Registered blueprint: docs_api\nINFO     root:__init__.py:308 Skipping hardware bootstrap (bootstrap_runtime=False)
---------------------------- Captured stdout call -----------------------------
2026-02-19 19:17:06,660 - app.middleware.api_auth - WARNING - Blocked unauthenticated POST to /api/v1/devices/v2/actuators from 127.0.0.1
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.api_auth:api_auth.py:85 Blocked unauthenticated POST to /api/v1/devices/v2/actuators from 127.0.0.1
________________ test_journal_watering_endpoint_creates_entry _________________
tests\test_plant_journal_watering_endpoint.py:53: in test_journal_watering_endpoint_creates_entry
    plant_id = _create_plant(client, unit_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests\test_plant_journal_watering_endpoint.py:43: in _create_plant
    assert response.status_code == 201
E   assert 401 == 201
E    +  where 401 = <WrapperTestResponse streamed [401 UNAUTHORIZED]>.status_code
---------------------------- Captured stdout setup ----------------------------
2026-02-19 19:20:17,407 - root - INFO - \u2705 Socket.IO initialized with CORS origins: *\n2026-02-19 19:20:17,472 - root - INFO - Seeded DeviceEnergyProfiles table with 16 default profiles.\n2026-02-19 19:20:17,473 - root - INFO - Seeded Plants table with 15 catalog entries.\n2026-02-19 19:20:17,474 - migration_mod - INFO - Migration 28 (irrigation_ml_context) completed successfully\n2026-02-19 19:20:17,475 - migration_mod - INFO - \u2705 Migration 029 (bayesian_threshold_columns) completed successfully\n2026-02-19 19:20:17,475 - migration_mod - INFO - \u2713 Created DiseaseOccurrence table\n2026-02-19 19:20:17,476 - migration_mod - INFO - \u2713 Created DiseasePredictionFeedback table\n2026-02-19 19:20:17,476 - migration_mod - INFO - \u2713 Created disease tracking indexes\n2026-02-19 19:20:17,476 - migration_mod - INFO - \u2705 Migration 30 (disease_tracking) completed successfully\n2026-02-19 19:20:17,476 - infrastructure.database.sqlite_handler - ERROR - Failed to run migration 029_disease_tracking.py: UNIQUE constraint failed: Migrations.migration_id\n2026-02-19 19:20:17,477 - migration_mod - INFO - Adding light_mode column to GrowthUnits...\n2026-02-19 19:20:17,477 - migration_mod - INFO - \u2713 Added light_mode column to GrowthUnits\n2026-02-19 19:20:17,478 - migration_mod - INFO - Added column aqi_threshold_override to Plants\n2026-02-19 19:20:17,479 - migration_mod - INFO - \u2713 Migration add_plant_threshold_overrides completed successfully\n2026-02-19 19:20:17,479 - migration_mod - INFO - \u2713 Migration add_plant_actuators completed successfully\n2026-02-19 19:20:17,479 - migration_mod - INFO - \u2713 Migration rename_light_intensity_threshold_to_lux_threshold completed successfully\n2026-02-19 19:20:17,479 - migration_mod - INFO - Column air_quality_threshold already exists in GrowthUnits\n2026-02-19 19:20:17,480 - migration_mod - INFO - Column air_quality_threshold_override already exists in Plants\n2026-02-19 19:20:17,480 - migration_mod - INFO - Old column co2_ppm not found in PlantReadings, adding co2\n2026-02-19 19:20:17,480 - migration_mod - INFO - Old column voc_ppb not found in PlantReadings, adding voc\n2026-02-19 19:20:17,481 - migration_mod - INFO - Old column aqi not found in PlantReadings, adding air_quality\n2026-02-19 19:20:17,482 - migration_mod - INFO - Old column co2_ppm not found in MLTrainingData, adding co2\n2026-02-19 19:20:17,482 - migration_mod - ERROR - Migration standardize_sensor_columns failed: no such table: MLTrainingData\nTraceback (most recent call last):\n  File "E:\\Work\\SYSGrow\\backend\\infrastructure\\database\\migrations\\034_standardize_sensor_columns.py", line 82, in migrate\n    _rename_or_copy(cursor, "MLTrainingData", old_name="co2_ppm", new_name="co2", column_type="REAL")\n    ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "E:\\Work\\SYSGrow\\backend\\infrastructure\\database\\migrations\\034_standardize_sensor_columns.py", line 46, in _rename_or_copy\n    cursor.execute(\n    ~~~~~~~~~~~~~~^\n        f"ALTER TABLE {table} ADD COLUMN {new_name} {column_type} {default_clause}"\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\nsqlite3.OperationalError: no such table: MLTrainingData\n2026-02-19 19:20:17,483 - infrastructure.database.sqlite_handler - ERROR - \u274c Migration 034_standardize_sensor_columns.py failed\nRunning migration 051 on <infrastructure.database.sqlite_handler.SQLiteDatabaseHandler object at 0x0000021372CEF5B0>\n2026-02-19 19:20:17,484 - infrastructure.database.sqlite_handler - ERROR - Failed to run migration 051_add_actuator_config_unique_index.py: expected str, bytes or os.PathLike object, not SQLiteDatabaseHandler\nRunning migration 052 on <infrastructure.database.sqlite_handler.SQLiteDatabaseHandler object at 0x0000021372CEF5B0>\n2026-02-19 19:20:17,484 - infrastructure.database.sqlite_handler - ERROR - Failed to run migration 052_add_recovery_codes.py: expected str, bytes or os.PathLike object, not SQLiteDatabaseHandler\n2026-02-19 19:20:17,485 - migration_mod - INFO - Migration 53 (irrigation_reliability_tables) completed successfully\n2026-02-19 19:20:17,486 - migration_mod - INFO - Adding 'lux' column to PlantReadings table\n2026-02-19 19:20:17,487 - migration_mod - INFO - \u2713 Migration add_lux_to_plant_readings completed successfully\n2026-02-19 19:20:17,487 - migration_mod - INFO - \u2713 Migration add_ph_ec_to_plant_readings completed successfully\n2026-02-19 19:20:17,488 - migration_mod - INFO - \u2713 Migration backfill_plant_soil_moisture_overrides completed successfully (15 plants updated)\n2026-02-19 19:20:17,492 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:17,492 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:17,492 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:17,492 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:17,493 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:17,493 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:17,493 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:17,493 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:17,493 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:17,495 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:17,494 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:17,494 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:17,494 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:17,494 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:17,494 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:17,493 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:17,495 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:22,506 - app.services.ai.model_registry - WARNING - No production version set for plant_health_regressor\n2026-02-19 19:20:22,507 - app.services.ai.model_registry - WARNING - No production version set for plant_health_classifier\n2026-02-19 19:20:22,507 - app.services.ai.model_registry - WARNING - No production version set for irrigation_threshold\n2026-02-19 19:20:22,507 - app.services.ai.model_registry - WARNING - No production version set for irrigation_response\n2026-02-19 19:20:22,507 - app.services.ai.model_registry - WARNING - No production version set for irrigation_duration\n2026-02-19 19:20:22,507 - app.services.ai.model_registry - WARNING - No production version set for irrigation_timing\n2026-02-19 19:20:22,508 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:22,508 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:22,508 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:22,508 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:22,508 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:22,509 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:22,509 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:22,509 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:22,509 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:22,509 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:22,509 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:22,509 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:22,509 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:22,510 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:22,510 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:22,510 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:22,510 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:22,513 - activity_log - INFO - [INFO] system_startup: Smart Agriculture System started\n2026-02-19 19:20:22,515 - app.workers.unified_scheduler - WARNING - Scheduler already running\n2026-02-19 19:20:22,596 - root - INFO -  Registered blueprint: auth\n2026-02-19 19:20:22,596 - root - INFO -  Registered blueprint: ui\n2026-02-19 19:20:22,596 - root - INFO -  Registered blueprint: plants_api\n2026-02-19 19:20:22,596 - root - INFO -  Registered blueprint: disease\n2026-02-19 19:20:22,596 - root - INFO -  Registered blueprint: settings_api\n2026-02-19 19:20:22,596 - root - INFO -  Registered blueprint: growth_api\n2026-02-19 19:20:22,596 - root - INFO -  Registered blueprint: devices_api\n2026-02-19 19:20:22,596 - root - INFO -  Registered blueprint: dashboard_api\n2026-02-19 19:20:22,596 - root - INFO -  Registered blueprint: harvest\n2026-02-19 19:20:22,596 - root - INFO -  Registered blueprint: ml_base\n2026-02-19 19:20:22,596 - root - INFO -  Registered blueprint: ml_predictions\n2026-02-19 19:20:22,596 - root - INFO -  Registered blueprint: ml_models\n2026-02-19 19:20:22,596 - root - INFO -  Registered blueprint: ml_monitoring\n2026-02-19 19:20:22,596 - root - INFO -  Registered blueprint: ml_analytics\n2026-02-19 19:20:22,597 - root - INFO -  Registered blueprint: ml_retraining\n2026-02-19 19:20:22,597 - root - INFO -  Registered blueprint: ml_analysis\n2026-02-19 19:20:22,597 - root - INFO -  Registered blueprint: ml_readiness\n2026-02-19 19:20:22,597 - root - INFO -  Registered blueprint: ml_ab_testing\n2026-02-19 19:20:22,597 - root - INFO -  Registered blueprint: ml_continuous\n2026-02-19 19:20:22,597 - root - INFO -  Registered blueprint: ml_personalized\n2026-02-19 19:20:22,597 - root - INFO -  Registered blueprint: ml_training_data\n2026-02-19 19:20:22,597 - root - INFO -  Registered blueprint: health_api\n2026-02-19 19:20:22,597 - root - INFO -  Registered blueprint: help_api\n2026-02-19 19:20:22,597 - root - INFO -  Registered blueprint: blog_api\n2026-02-19 19:20:22,597 - root - INFO -  Registered blueprint: docs_api\n2026-02-19 19:20:22,607 - root - INFO - Skipping hardware bootstrap (bootstrap_runtime=False)
----------------------------- Captured log setup ------------------------------
INFO     root:extensions.py:80 \u2705 Socket.IO initialized with CORS origins: *\nINFO     root:sqlite_handler.py:1652 Seeded DeviceEnergyProfiles table with 16 default profiles.\nINFO     root:sqlite_handler.py:1615 Seeded Plants table with 15 catalog entries.\nINFO     migration_mod:028_irrigation_ml_context.py:97 Migration 28 (irrigation_ml_context) completed successfully\nINFO     migration_mod:029_bayesian_threshold_columns.py:57 \u2705 Migration 029 (bayesian_threshold_columns) completed successfully\nINFO     migration_mod:029_disease_tracking.py:80 \u2713 Created DiseaseOccurrence table\nINFO     migration_mod:029_disease_tracking.py:119 \u2713 Created DiseasePredictionFeedback table\nINFO     migration_mod:029_disease_tracking.py:134 \u2713 Created disease tracking indexes\nINFO     migration_mod:029_disease_tracking.py:137 \u2705 Migration 30 (disease_tracking) completed successfully\nERROR    infrastructure.database.sqlite_handler:sqlite_handler.py:109 Failed to run migration 029_disease_tracking.py: UNIQUE constraint failed: Migrations.migration_id\nINFO     migration_mod:030_add_light_mode_column.py:44 Adding light_mode column to GrowthUnits...\nINFO     migration_mod:030_add_light_mode_column.py:49 \u2713 Added light_mode column to GrowthUnits\nINFO     migration_mod:031_add_plant_threshold_overrides.py:44 Added column aqi_threshold_override to Plants\nINFO     migration_mod:031_add_plant_threshold_overrides.py:47 \u2713 Migration add_plant_threshold_overrides completed successfully\nINFO     migration_mod:032_add_plant_actuators.py:39 \u2713 Migration add_plant_actuators completed successfully\nINFO     migration_mod:033_rename_light_intensity_threshold_to_lux_threshold.py:79 \u2713 Migration rename_light_intensity_threshold_to_lux_threshold completed successfully\nINFO     migration_mod:034_standardize_sensor_columns.py:41 Column air_quality_threshold already exists in GrowthUnits\nINFO     migration_mod:034_standardize_sensor_columns.py:41 Column air_quality_threshold_override already exists in Plants\nINFO     migration_mod:034_standardize_sensor_columns.py:45 Old column co2_ppm not found in PlantReadings, adding co2\nINFO     migration_mod:034_standardize_sensor_columns.py:45 Old column voc_ppb not found in PlantReadings, adding voc\nINFO     migration_mod:034_standardize_sensor_columns.py:45 Old column aqi not found in PlantReadings, adding air_quality\nINFO     migration_mod:034_standardize_sensor_columns.py:45 Old column co2_ppm not found in MLTrainingData, adding co2\nERROR    migration_mod:034_standardize_sensor_columns.py:93 Migration standardize_sensor_columns failed: no such table: MLTrainingData\nTraceback (most recent call last):\n  File "E:\\Work\\SYSGrow\\backend\\infrastructure\\database\\migrations\\034_standardize_sensor_columns.py", line 82, in migrate\n    _rename_or_copy(cursor, "MLTrainingData", old_name="co2_ppm", new_name="co2", column_type="REAL")\n    ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "E:\\Work\\SYSGrow\\backend\\infrastructure\\database\\migrations\\034_standardize_sensor_columns.py", line 46, in _rename_or_copy\n    cursor.execute(\n    ~~~~~~~~~~~~~~^\n        f"ALTER TABLE {table} ADD COLUMN {new_name} {column_type} {default_clause}"\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\nsqlite3.OperationalError: no such table: MLTrainingData\nERROR    infrastructure.database.sqlite_handler:sqlite_handler.py:107 \u274c Migration 034_standardize_sensor_columns.py failed\nERROR    infrastructure.database.sqlite_handler:sqlite_handler.py:109 Failed to run migration 051_add_actuator_config_unique_index.py: expected str, bytes or os.PathLike object, not SQLiteDatabaseHandler\nERROR    infrastructure.database.sqlite_handler:sqlite_handler.py:109 Failed to run migration 052_add_recovery_codes.py: expected str, bytes or os.PathLike object, not SQLiteDatabaseHandler\nINFO     migration_mod:053_irrigation_reliability_tables.py:185 Migration 53 (irrigation_reliability_tables) completed successfully\nINFO     migration_mod:057_add_lux_to_plant_readings.py:31 Adding 'lux' column to PlantReadings table\nINFO     migration_mod:057_add_lux_to_plant_readings.py:35 \u2713 Migration add_lux_to_plant_readings completed successfully\nINFO     migration_mod:059_add_ph_ec_to_plant_readings.py:36 \u2713 Migration add_ph_ec_to_plant_readings completed successfully\nINFO     migration_mod:060_backfill_plant_soil_moisture_overrides.py:81 \u2713 Migration backfill_plant_soil_moisture_overrides completed successfully (15 plants updated)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for plant_health_regressor\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for plant_health_classifier\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for irrigation_threshold\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for irrigation_response\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for irrigation_duration\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for irrigation_timing\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nINFO     activity_log:activity_logger.py:128 [INFO] system_startup: Smart Agriculture System started\nWARNING  app.workers.unified_scheduler:unified_scheduler.py:607 Scheduler already running\nINFO     root:__init__.py:283  Registered blueprint: auth\nINFO     root:__init__.py:283  Registered blueprint: ui\nINFO     root:__init__.py:283  Registered blueprint: plants_api\nINFO     root:__init__.py:283  Registered blueprint: disease\nINFO     root:__init__.py:283  Registered blueprint: settings_api\nINFO     root:__init__.py:283  Registered blueprint: growth_api\nINFO     root:__init__.py:283  Registered blueprint: devices_api\nINFO     root:__init__.py:283  Registered blueprint: dashboard_api\nINFO     root:__init__.py:283  Registered blueprint: harvest\nINFO     root:__init__.py:283  Registered blueprint: ml_base\nINFO     root:__init__.py:283  Registered blueprint: ml_predictions\nINFO     root:__init__.py:283  Registered blueprint: ml_models\nINFO     root:__init__.py:283  Registered blueprint: ml_monitoring\nINFO     root:__init__.py:283  Registered blueprint: ml_analytics\nINFO     root:__init__.py:283  Registered blueprint: ml_retraining\nINFO     root:__init__.py:283  Registered blueprint: ml_analysis\nINFO     root:__init__.py:283  Registered blueprint: ml_readiness\nINFO     root:__init__.py:283  Registered blueprint: ml_ab_testing\nINFO     root:__init__.py:283  Registered blueprint: ml_continuous\nINFO     root:__init__.py:283  Registered blueprint: ml_personalized\nINFO     root:__init__.py:283  Registered blueprint: ml_training_data\nINFO     root:__init__.py:283  Registered blueprint: health_api\nINFO     root:__init__.py:283  Registered blueprint: help_api\nINFO     root:__init__.py:283  Registered blueprint: blog_api\nINFO     root:__init__.py:283  Registered blueprint: docs_api\nINFO     root:__init__.py:308 Skipping hardware bootstrap (bootstrap_runtime=False)
---------------------------- Captured stdout call -----------------------------
2026-02-19 19:20:22,609 - app.services.application.threshold_service - ERROR - Error fetching unit thresholds for 1: No item with that key
Traceback (most recent call last):
  File "E:\Work\SYSGrow\backend\app\services\application\threshold_service.py", line 361, in get_unit_thresholds
    data = row if isinstance(row, dict) else {k: row[k] for k in row}
                                                 ~~~^^^
IndexError: No item with that key
2026-02-19 19:20:22,610 - app.middleware.api_auth - WARNING - Blocked unauthenticated POST to /api/v1/plants/units/1/plants from 127.0.0.1
------------------------------ Captured log call ------------------------------
ERROR    app.services.application.threshold_service:threshold_service.py:385 Error fetching unit thresholds for 1: No item with that key
Traceback (most recent call last):
  File "E:\Work\SYSGrow\backend\app\services\application\threshold_service.py", line 361, in get_unit_thresholds
    data = row if isinstance(row, dict) else {k: row[k] for k in row}
                                                 ~~~^^^
IndexError: No item with that key
WARNING  app.middleware.api_auth:api_auth.py:85 Blocked unauthenticated POST to /api/v1/plants/units/1/plants from 127.0.0.1
_______________________ test_hotspot_settings_roundtrip _______________________
tests\test_settings_api.py:50: in test_hotspot_settings_roundtrip
    assert response.status_code == 200
E   assert 401 == 200
E    +  where 401 = <WrapperTestResponse streamed [401 UNAUTHORIZED]>.status_code
---------------------------- Captured stdout setup ----------------------------
2026-02-19 19:20:33,215 - root - INFO - \u2705 Socket.IO initialized with CORS origins: *\n2026-02-19 19:20:33,242 - root - INFO - Seeded DeviceEnergyProfiles table with 16 default profiles.\n2026-02-19 19:20:33,243 - root - INFO - Seeded Plants table with 15 catalog entries.\n2026-02-19 19:20:33,244 - migration_mod - INFO - Migration 28 (irrigation_ml_context) completed successfully\n2026-02-19 19:20:33,245 - migration_mod - INFO - \u2705 Migration 029 (bayesian_threshold_columns) completed successfully\n2026-02-19 19:20:33,245 - migration_mod - INFO - \u2713 Created DiseaseOccurrence table\n2026-02-19 19:20:33,245 - migration_mod - INFO - \u2713 Created DiseasePredictionFeedback table\n2026-02-19 19:20:33,246 - migration_mod - INFO - \u2713 Created disease tracking indexes\n2026-02-19 19:20:33,246 - migration_mod - INFO - \u2705 Migration 30 (disease_tracking) completed successfully\n2026-02-19 19:20:33,246 - infrastructure.database.sqlite_handler - ERROR - Failed to run migration 029_disease_tracking.py: UNIQUE constraint failed: Migrations.migration_id\n2026-02-19 19:20:33,246 - migration_mod - INFO - Adding light_mode column to GrowthUnits...\n2026-02-19 19:20:33,247 - migration_mod - INFO - \u2713 Added light_mode column to GrowthUnits\n2026-02-19 19:20:33,248 - migration_mod - INFO - Added column aqi_threshold_override to Plants\n2026-02-19 19:20:33,248 - migration_mod - INFO - \u2713 Migration add_plant_threshold_overrides completed successfully\n2026-02-19 19:20:33,249 - migration_mod - INFO - \u2713 Migration add_plant_actuators completed successfully\n2026-02-19 19:20:33,249 - migration_mod - INFO - \u2713 Migration rename_light_intensity_threshold_to_lux_threshold completed successfully\n2026-02-19 19:20:33,249 - migration_mod - INFO - Column air_quality_threshold already exists in GrowthUnits\n2026-02-19 19:20:33,249 - migration_mod - INFO - Column air_quality_threshold_override already exists in Plants\n2026-02-19 19:20:33,249 - migration_mod - INFO - Old column co2_ppm not found in PlantReadings, adding co2\n2026-02-19 19:20:33,250 - migration_mod - INFO - Old column voc_ppb not found in PlantReadings, adding voc\n2026-02-19 19:20:33,251 - migration_mod - INFO - Old column aqi not found in PlantReadings, adding air_quality\n2026-02-19 19:20:33,252 - migration_mod - INFO - Old column co2_ppm not found in MLTrainingData, adding co2\n2026-02-19 19:20:33,252 - migration_mod - ERROR - Migration standardize_sensor_columns failed: no such table: MLTrainingData\nTraceback (most recent call last):\n  File "E:\\Work\\SYSGrow\\backend\\infrastructure\\database\\migrations\\034_standardize_sensor_columns.py", line 82, in migrate\n    _rename_or_copy(cursor, "MLTrainingData", old_name="co2_ppm", new_name="co2", column_type="REAL")\n    ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "E:\\Work\\SYSGrow\\backend\\infrastructure\\database\\migrations\\034_standardize_sensor_columns.py", line 46, in _rename_or_copy\n    cursor.execute(\n    ~~~~~~~~~~~~~~^\n        f"ALTER TABLE {table} ADD COLUMN {new_name} {column_type} {default_clause}"\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\nsqlite3.OperationalError: no such table: MLTrainingData\n2026-02-19 19:20:33,252 - infrastructure.database.sqlite_handler - ERROR - \u274c Migration 034_standardize_sensor_columns.py failed\nRunning migration 051 on <infrastructure.database.sqlite_handler.SQLiteDatabaseHandler object at 0x0000021321A2DDA0>\n2026-02-19 19:20:33,253 - infrastructure.database.sqlite_handler - ERROR - Failed to run migration 051_add_actuator_config_unique_index.py: expected str, bytes or os.PathLike object, not SQLiteDatabaseHandler\nRunning migration 052 on <infrastructure.database.sqlite_handler.SQLiteDatabaseHandler object at 0x0000021321A2DDA0>\n2026-02-19 19:20:33,253 - infrastructure.database.sqlite_handler - ERROR - Failed to run migration 052_add_recovery_codes.py: expected str, bytes or os.PathLike object, not SQLiteDatabaseHandler\n2026-02-19 19:20:33,253 - migration_mod - INFO - Migration 53 (irrigation_reliability_tables) completed successfully\n2026-02-19 19:20:33,254 - migration_mod - INFO - Adding 'lux' column to PlantReadings table\n2026-02-19 19:20:33,255 - migration_mod - INFO - \u2713 Migration add_lux_to_plant_readings completed successfully\n2026-02-19 19:20:33,256 - migration_mod - INFO - \u2713 Migration add_ph_ec_to_plant_readings completed successfully\n2026-02-19 19:20:33,258 - migration_mod - INFO - \u2713 Migration backfill_plant_soil_moisture_overrides completed successfully (15 plants updated)\n2026-02-19 19:20:33,262 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:33,262 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:33,263 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:33,263 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:33,263 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:33,263 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:33,263 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:33,263 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:33,264 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:33,264 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:33,264 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:33,264 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:33,264 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:33,265 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:33,265 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:33,265 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:33,265 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:33,266 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:33,266 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:33,266 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:38,284 - app.services.ai.model_registry - WARNING - No production version set for plant_health_regressor\n2026-02-19 19:20:38,284 - app.services.ai.model_registry - WARNING - No production version set for plant_health_classifier\n2026-02-19 19:20:38,284 - app.services.ai.model_registry - WARNING - No production version set for irrigation_threshold\n2026-02-19 19:20:38,284 - app.services.ai.model_registry - WARNING - No production version set for irrigation_response\n2026-02-19 19:20:38,284 - app.services.ai.model_registry - WARNING - No production version set for irrigation_duration\n2026-02-19 19:20:38,284 - app.services.ai.model_registry - WARNING - No production version set for irrigation_timing\n2026-02-19 19:20:38,285 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:38,285 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:38,286 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:38,286 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:38,286 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:38,286 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:38,286 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:38,286 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:38,286 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:38,287 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:38,287 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:38,287 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:38,287 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:38,287 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:38,287 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:38,287 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:38,287 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:38,287 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:38,288 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:38,288 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:38,291 - activity_log - INFO - [INFO] system_startup: Smart Agriculture System started\n2026-02-19 19:20:38,292 - app.workers.unified_scheduler - WARNING - Scheduler already running\n2026-02-19 19:20:38,375 - root - INFO -  Registered blueprint: auth\n2026-02-19 19:20:38,375 - root - INFO -  Registered blueprint: ui\n2026-02-19 19:20:38,375 - root - INFO -  Registered blueprint: plants_api\n2026-02-19 19:20:38,375 - root - INFO -  Registered blueprint: disease\n2026-02-19 19:20:38,375 - root - INFO -  Registered blueprint: settings_api\n2026-02-19 19:20:38,375 - root - INFO -  Registered blueprint: growth_api\n2026-02-19 19:20:38,375 - root - INFO -  Registered blueprint: devices_api\n2026-02-19 19:20:38,375 - root - INFO -  Registered blueprint: dashboard_api\n2026-02-19 19:20:38,375 - root - INFO -  Registered blueprint: harvest\n2026-02-19 19:20:38,375 - root - INFO -  Registered blueprint: ml_base\n2026-02-19 19:20:38,375 - root - INFO -  Registered blueprint: ml_predictions\n2026-02-19 19:20:38,375 - root - INFO -  Registered blueprint: ml_models\n2026-02-19 19:20:38,375 - root - INFO -  Registered blueprint: ml_monitoring\n2026-02-19 19:20:38,375 - root - INFO -  Registered blueprint: ml_analytics\n2026-02-19 19:20:38,375 - root - INFO -  Registered blueprint: ml_retraining\n2026-02-19 19:20:38,375 - root - INFO -  Registered blueprint: ml_analysis\n2026-02-19 19:20:38,375 - root - INFO -  Registered blueprint: ml_readiness\n2026-02-19 19:20:38,375 - root - INFO -  Registered blueprint: ml_ab_testing\n2026-02-19 19:20:38,375 - root - INFO -  Registered blueprint: ml_continuous\n2026-02-19 19:20:38,375 - root - INFO -  Registered blueprint: ml_personalized\n2026-02-19 19:20:38,375 - root - INFO -  Registered blueprint: ml_training_data\n2026-02-19 19:20:38,375 - root - INFO -  Registered blueprint: health_api\n2026-02-19 19:20:38,375 - root - INFO -  Registered blueprint: help_api\n2026-02-19 19:20:38,375 - root - INFO -  Registered blueprint: blog_api\n2026-02-19 19:20:38,375 - root - INFO -  Registered blueprint: docs_api\n2026-02-19 19:20:38,384 - root - INFO - Skipping hardware bootstrap (bootstrap_runtime=False)
----------------------------- Captured log setup ------------------------------
INFO     root:extensions.py:80 \u2705 Socket.IO initialized with CORS origins: *\nINFO     root:sqlite_handler.py:1652 Seeded DeviceEnergyProfiles table with 16 default profiles.\nINFO     root:sqlite_handler.py:1615 Seeded Plants table with 15 catalog entries.\nINFO     migration_mod:028_irrigation_ml_context.py:97 Migration 28 (irrigation_ml_context) completed successfully\nINFO     migration_mod:029_bayesian_threshold_columns.py:57 \u2705 Migration 029 (bayesian_threshold_columns) completed successfully\nINFO     migration_mod:029_disease_tracking.py:80 \u2713 Created DiseaseOccurrence table\nINFO     migration_mod:029_disease_tracking.py:119 \u2713 Created DiseasePredictionFeedback table\nINFO     migration_mod:029_disease_tracking.py:134 \u2713 Created disease tracking indexes\nINFO     migration_mod:029_disease_tracking.py:137 \u2705 Migration 30 (disease_tracking) completed successfully\nERROR    infrastructure.database.sqlite_handler:sqlite_handler.py:109 Failed to run migration 029_disease_tracking.py: UNIQUE constraint failed: Migrations.migration_id\nINFO     migration_mod:030_add_light_mode_column.py:44 Adding light_mode column to GrowthUnits...\nINFO     migration_mod:030_add_light_mode_column.py:49 \u2713 Added light_mode column to GrowthUnits\nINFO     migration_mod:031_add_plant_threshold_overrides.py:44 Added column aqi_threshold_override to Plants\nINFO     migration_mod:031_add_plant_threshold_overrides.py:47 \u2713 Migration add_plant_threshold_overrides completed successfully\nINFO     migration_mod:032_add_plant_actuators.py:39 \u2713 Migration add_plant_actuators completed successfully\nINFO     migration_mod:033_rename_light_intensity_threshold_to_lux_threshold.py:79 \u2713 Migration rename_light_intensity_threshold_to_lux_threshold completed successfully\nINFO     migration_mod:034_standardize_sensor_columns.py:41 Column air_quality_threshold already exists in GrowthUnits\nINFO     migration_mod:034_standardize_sensor_columns.py:41 Column air_quality_threshold_override already exists in Plants\nINFO     migration_mod:034_standardize_sensor_columns.py:45 Old column co2_ppm not found in PlantReadings, adding co2\nINFO     migration_mod:034_standardize_sensor_columns.py:45 Old column voc_ppb not found in PlantReadings, adding voc\nINFO     migration_mod:034_standardize_sensor_columns.py:45 Old column aqi not found in PlantReadings, adding air_quality\nINFO     migration_mod:034_standardize_sensor_columns.py:45 Old column co2_ppm not found in MLTrainingData, adding co2\nERROR    migration_mod:034_standardize_sensor_columns.py:93 Migration standardize_sensor_columns failed: no such table: MLTrainingData\nTraceback (most recent call last):\n  File "E:\\Work\\SYSGrow\\backend\\infrastructure\\database\\migrations\\034_standardize_sensor_columns.py", line 82, in migrate\n    _rename_or_copy(cursor, "MLTrainingData", old_name="co2_ppm", new_name="co2", column_type="REAL")\n    ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "E:\\Work\\SYSGrow\\backend\\infrastructure\\database\\migrations\\034_standardize_sensor_columns.py", line 46, in _rename_or_copy\n    cursor.execute(\n    ~~~~~~~~~~~~~~^\n        f"ALTER TABLE {table} ADD COLUMN {new_name} {column_type} {default_clause}"\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\nsqlite3.OperationalError: no such table: MLTrainingData\nERROR    infrastructure.database.sqlite_handler:sqlite_handler.py:107 \u274c Migration 034_standardize_sensor_columns.py failed\nERROR    infrastructure.database.sqlite_handler:sqlite_handler.py:109 Failed to run migration 051_add_actuator_config_unique_index.py: expected str, bytes or os.PathLike object, not SQLiteDatabaseHandler\nERROR    infrastructure.database.sqlite_handler:sqlite_handler.py:109 Failed to run migration 052_add_recovery_codes.py: expected str, bytes or os.PathLike object, not SQLiteDatabaseHandler\nINFO     migration_mod:053_irrigation_reliability_tables.py:185 Migration 53 (irrigation_reliability_tables) completed successfully\nINFO     migration_mod:057_add_lux_to_plant_readings.py:31 Adding 'lux' column to PlantReadings table\nINFO     migration_mod:057_add_lux_to_plant_readings.py:35 \u2713 Migration add_lux_to_plant_readings completed successfully\nINFO     migration_mod:059_add_ph_ec_to_plant_readings.py:36 \u2713 Migration add_ph_ec_to_plant_readings completed successfully\nINFO     migration_mod:060_backfill_plant_soil_moisture_overrides.py:81 \u2713 Migration backfill_plant_soil_moisture_overrides completed successfully (15 plants updated)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for plant_health_regressor\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for plant_health_classifier\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for irrigation_threshold\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for irrigation_response\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for irrigation_duration\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for irrigation_timing\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nINFO     activity_log:activity_logger.py:128 [INFO] system_startup: Smart Agriculture System started\nWARNING  app.workers.unified_scheduler:unified_scheduler.py:607 Scheduler already running\nINFO     root:__init__.py:283  Registered blueprint: auth\nINFO     root:__init__.py:283  Registered blueprint: ui\nINFO     root:__init__.py:283  Registered blueprint: plants_api\nINFO     root:__init__.py:283  Registered blueprint: disease\nINFO     root:__init__.py:283  Registered blueprint: settings_api\nINFO     root:__init__.py:283  Registered blueprint: growth_api\nINFO     root:__init__.py:283  Registered blueprint: devices_api\nINFO     root:__init__.py:283  Registered blueprint: dashboard_api\nINFO     root:__init__.py:283  Registered blueprint: harvest\nINFO     root:__init__.py:283  Registered blueprint: ml_base\nINFO     root:__init__.py:283  Registered blueprint: ml_predictions\nINFO     root:__init__.py:283  Registered blueprint: ml_models\nINFO     root:__init__.py:283  Registered blueprint: ml_monitoring\nINFO     root:__init__.py:283  Registered blueprint: ml_analytics\nINFO     root:__init__.py:283  Registered blueprint: ml_retraining\nINFO     root:__init__.py:283  Registered blueprint: ml_analysis\nINFO     root:__init__.py:283  Registered blueprint: ml_readiness\nINFO     root:__init__.py:283  Registered blueprint: ml_ab_testing\nINFO     root:__init__.py:283  Registered blueprint: ml_continuous\nINFO     root:__init__.py:283  Registered blueprint: ml_personalized\nINFO     root:__init__.py:283  Registered blueprint: ml_training_data\nINFO     root:__init__.py:283  Registered blueprint: health_api\nINFO     root:__init__.py:283  Registered blueprint: help_api\nINFO     root:__init__.py:283  Registered blueprint: blog_api\nINFO     root:__init__.py:283  Registered blueprint: docs_api\nINFO     root:__init__.py:308 Skipping hardware bootstrap (bootstrap_runtime=False)
---------------------------- Captured stdout call -----------------------------
2026-02-19 19:20:38,386 - app.middleware.api_auth - WARNING - Blocked unauthenticated PUT to /api/v1/settings/hotspot from 127.0.0.1
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.api_auth:api_auth.py:85 Blocked unauthenticated PUT to /api/v1/settings/hotspot from 127.0.0.1
_______________________ test_camera_settings_roundtrip ________________________
tests\test_settings_api.py:87: in test_camera_settings_roundtrip
    assert response.status_code == 200
E   assert 401 == 200
E    +  where 401 = <WrapperTestResponse streamed [401 UNAUTHORIZED]>.status_code
---------------------------- Captured stdout setup ----------------------------
2026-02-19 19:20:38,397 - root - INFO - \u2705 Socket.IO initialized with CORS origins: *\n2026-02-19 19:20:38,425 - root - INFO - Seeded DeviceEnergyProfiles table with 16 default profiles.\n2026-02-19 19:20:38,426 - root - INFO - Seeded Plants table with 15 catalog entries.\n2026-02-19 19:20:38,427 - migration_mod - INFO - Migration 28 (irrigation_ml_context) completed successfully\n2026-02-19 19:20:38,427 - migration_mod - INFO - \u2705 Migration 029 (bayesian_threshold_columns) completed successfully\n2026-02-19 19:20:38,428 - migration_mod - INFO - \u2713 Created DiseaseOccurrence table\n2026-02-19 19:20:38,428 - migration_mod - INFO - \u2713 Created DiseasePredictionFeedback table\n2026-02-19 19:20:38,429 - migration_mod - INFO - \u2713 Created disease tracking indexes\n2026-02-19 19:20:38,429 - migration_mod - INFO - \u2705 Migration 30 (disease_tracking) completed successfully\n2026-02-19 19:20:38,429 - infrastructure.database.sqlite_handler - ERROR - Failed to run migration 029_disease_tracking.py: UNIQUE constraint failed: Migrations.migration_id\n2026-02-19 19:20:38,429 - migration_mod - INFO - Adding light_mode column to GrowthUnits...\n2026-02-19 19:20:38,430 - migration_mod - INFO - \u2713 Added light_mode column to GrowthUnits\n2026-02-19 19:20:38,431 - migration_mod - INFO - Added column aqi_threshold_override to Plants\n2026-02-19 19:20:38,431 - migration_mod - INFO - \u2713 Migration add_plant_threshold_overrides completed successfully\n2026-02-19 19:20:38,431 - migration_mod - INFO - \u2713 Migration add_plant_actuators completed successfully\n2026-02-19 19:20:38,432 - migration_mod - INFO - \u2713 Migration rename_light_intensity_threshold_to_lux_threshold completed successfully\n2026-02-19 19:20:38,432 - migration_mod - INFO - Column air_quality_threshold already exists in GrowthUnits\n2026-02-19 19:20:38,432 - migration_mod - INFO - Column air_quality_threshold_override already exists in Plants\n2026-02-19 19:20:38,432 - migration_mod - INFO - Old column co2_ppm not found in PlantReadings, adding co2\n2026-02-19 19:20:38,433 - migration_mod - INFO - Old column voc_ppb not found in PlantReadings, adding voc\n2026-02-19 19:20:38,434 - migration_mod - INFO - Old column aqi not found in PlantReadings, adding air_quality\n2026-02-19 19:20:38,434 - migration_mod - INFO - Old column co2_ppm not found in MLTrainingData, adding co2\n2026-02-19 19:20:38,434 - migration_mod - ERROR - Migration standardize_sensor_columns failed: no such table: MLTrainingData\nTraceback (most recent call last):\n  File "E:\\Work\\SYSGrow\\backend\\infrastructure\\database\\migrations\\034_standardize_sensor_columns.py", line 82, in migrate\n    _rename_or_copy(cursor, "MLTrainingData", old_name="co2_ppm", new_name="co2", column_type="REAL")\n    ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "E:\\Work\\SYSGrow\\backend\\infrastructure\\database\\migrations\\034_standardize_sensor_columns.py", line 46, in _rename_or_copy\n    cursor.execute(\n    ~~~~~~~~~~~~~~^\n        f"ALTER TABLE {table} ADD COLUMN {new_name} {column_type} {default_clause}"\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\nsqlite3.OperationalError: no such table: MLTrainingData\n2026-02-19 19:20:38,435 - infrastructure.database.sqlite_handler - ERROR - \u274c Migration 034_standardize_sensor_columns.py failed\nRunning migration 051 on <infrastructure.database.sqlite_handler.SQLiteDatabaseHandler object at 0x000002132385B770>\n2026-02-19 19:20:38,436 - infrastructure.database.sqlite_handler - ERROR - Failed to run migration 051_add_actuator_config_unique_index.py: expected str, bytes or os.PathLike object, not SQLiteDatabaseHandler\nRunning migration 052 on <infrastructure.database.sqlite_handler.SQLiteDatabaseHandler object at 0x000002132385B770>\n2026-02-19 19:20:38,436 - infrastructure.database.sqlite_handler - ERROR - Failed to run migration 052_add_recovery_codes.py: expected str, bytes or os.PathLike object, not SQLiteDatabaseHandler\n2026-02-19 19:20:38,436 - migration_mod - INFO - Migration 53 (irrigation_reliability_tables) completed successfully\n2026-02-19 19:20:38,437 - migration_mod - INFO - Adding 'lux' column to PlantReadings table\n2026-02-19 19:20:38,438 - migration_mod - INFO - \u2713 Migration add_lux_to_plant_readings completed successfully\n2026-02-19 19:20:38,439 - migration_mod - INFO - \u2713 Migration add_ph_ec_to_plant_readings completed successfully\n2026-02-19 19:20:38,440 - migration_mod - INFO - \u2713 Migration backfill_plant_soil_moisture_overrides completed successfully (15 plants updated)\n2026-02-19 19:20:38,444 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:38,444 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:38,444 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:38,444 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:38,444 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:38,444 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:38,445 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:38,445 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:38,445 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:38,445 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:38,445 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:38,445 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:38,445 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:38,446 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:38,446 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:38,446 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:38,446 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:38,446 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:38,446 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:38,446 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:38,447 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:43,456 - app.services.ai.model_registry - WARNING - No production version set for plant_health_regressor\n2026-02-19 19:20:43,456 - app.services.ai.model_registry - WARNING - No production version set for plant_health_classifier\n2026-02-19 19:20:43,456 - app.services.ai.model_registry - WARNING - No production version set for irrigation_threshold\n2026-02-19 19:20:43,456 - app.services.ai.model_registry - WARNING - No production version set for irrigation_response\n2026-02-19 19:20:43,456 - app.services.ai.model_registry - WARNING - No production version set for irrigation_duration\n2026-02-19 19:20:43,456 - app.services.ai.model_registry - WARNING - No production version set for irrigation_timing\n2026-02-19 19:20:43,457 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:43,458 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:43,458 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:43,458 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:43,458 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:43,458 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:43,459 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:43,459 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:43,460 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:43,460 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:43,460 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:43,460 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:43,460 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:43,460 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:43,460 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:43,460 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:43,460 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:43,461 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:43,461 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:43,461 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:43,461 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:43,462 - activity_log - INFO - [INFO] system_startup: Smart Agriculture System started\n2026-02-19 19:20:43,465 - app.workers.unified_scheduler - WARNING - Scheduler already running\n2026-02-19 19:20:43,544 - root - INFO -  Registered blueprint: auth\n2026-02-19 19:20:43,544 - root - INFO -  Registered blueprint: ui\n2026-02-19 19:20:43,544 - root - INFO -  Registered blueprint: plants_api\n2026-02-19 19:20:43,544 - root - INFO -  Registered blueprint: disease\n2026-02-19 19:20:43,544 - root - INFO -  Registered blueprint: settings_api\n2026-02-19 19:20:43,544 - root - INFO -  Registered blueprint: growth_api\n2026-02-19 19:20:43,544 - root - INFO -  Registered blueprint: devices_api\n2026-02-19 19:20:43,544 - root - INFO -  Registered blueprint: dashboard_api\n2026-02-19 19:20:43,544 - root - INFO -  Registered blueprint: harvest\n2026-02-19 19:20:43,544 - root - INFO -  Registered blueprint: ml_base\n2026-02-19 19:20:43,544 - root - INFO -  Registered blueprint: ml_predictions\n2026-02-19 19:20:43,544 - root - INFO -  Registered blueprint: ml_models\n2026-02-19 19:20:43,544 - root - INFO -  Registered blueprint: ml_monitoring\n2026-02-19 19:20:43,544 - root - INFO -  Registered blueprint: ml_analytics\n2026-02-19 19:20:43,544 - root - INFO -  Registered blueprint: ml_retraining\n2026-02-19 19:20:43,544 - root - INFO -  Registered blueprint: ml_analysis\n2026-02-19 19:20:43,544 - root - INFO -  Registered blueprint: ml_readiness\n2026-02-19 19:20:43,544 - root - INFO -  Registered blueprint: ml_ab_testing\n2026-02-19 19:20:43,544 - root - INFO -  Registered blueprint: ml_continuous\n2026-02-19 19:20:43,545 - root - INFO -  Registered blueprint: ml_personalized\n2026-02-19 19:20:43,545 - root - INFO -  Registered blueprint: ml_training_data\n2026-02-19 19:20:43,545 - root - INFO -  Registered blueprint: health_api\n2026-02-19 19:20:43,545 - root - INFO -  Registered blueprint: help_api\n2026-02-19 19:20:43,545 - root - INFO -  Registered blueprint: blog_api\n2026-02-19 19:20:43,545 - root - INFO -  Registered blueprint: docs_api\n2026-02-19 19:20:43,554 - root - INFO - Skipping hardware bootstrap (bootstrap_runtime=False)
----------------------------- Captured log setup ------------------------------
INFO     root:extensions.py:80 \u2705 Socket.IO initialized with CORS origins: *\nINFO     root:sqlite_handler.py:1652 Seeded DeviceEnergyProfiles table with 16 default profiles.\nINFO     root:sqlite_handler.py:1615 Seeded Plants table with 15 catalog entries.\nINFO     migration_mod:028_irrigation_ml_context.py:97 Migration 28 (irrigation_ml_context) completed successfully\nINFO     migration_mod:029_bayesian_threshold_columns.py:57 \u2705 Migration 029 (bayesian_threshold_columns) completed successfully\nINFO     migration_mod:029_disease_tracking.py:80 \u2713 Created DiseaseOccurrence table\nINFO     migration_mod:029_disease_tracking.py:119 \u2713 Created DiseasePredictionFeedback table\nINFO     migration_mod:029_disease_tracking.py:134 \u2713 Created disease tracking indexes\nINFO     migration_mod:029_disease_tracking.py:137 \u2705 Migration 30 (disease_tracking) completed successfully\nERROR    infrastructure.database.sqlite_handler:sqlite_handler.py:109 Failed to run migration 029_disease_tracking.py: UNIQUE constraint failed: Migrations.migration_id\nINFO     migration_mod:030_add_light_mode_column.py:44 Adding light_mode column to GrowthUnits...\nINFO     migration_mod:030_add_light_mode_column.py:49 \u2713 Added light_mode column to GrowthUnits\nINFO     migration_mod:031_add_plant_threshold_overrides.py:44 Added column aqi_threshold_override to Plants\nINFO     migration_mod:031_add_plant_threshold_overrides.py:47 \u2713 Migration add_plant_threshold_overrides completed successfully\nINFO     migration_mod:032_add_plant_actuators.py:39 \u2713 Migration add_plant_actuators completed successfully\nINFO     migration_mod:033_rename_light_intensity_threshold_to_lux_threshold.py:79 \u2713 Migration rename_light_intensity_threshold_to_lux_threshold completed successfully\nINFO     migration_mod:034_standardize_sensor_columns.py:41 Column air_quality_threshold already exists in GrowthUnits\nINFO     migration_mod:034_standardize_sensor_columns.py:41 Column air_quality_threshold_override already exists in Plants\nINFO     migration_mod:034_standardize_sensor_columns.py:45 Old column co2_ppm not found in PlantReadings, adding co2\nINFO     migration_mod:034_standardize_sensor_columns.py:45 Old column voc_ppb not found in PlantReadings, adding voc\nINFO     migration_mod:034_standardize_sensor_columns.py:45 Old column aqi not found in PlantReadings, adding air_quality\nINFO     migration_mod:034_standardize_sensor_columns.py:45 Old column co2_ppm not found in MLTrainingData, adding co2\nERROR    migration_mod:034_standardize_sensor_columns.py:93 Migration standardize_sensor_columns failed: no such table: MLTrainingData\nTraceback (most recent call last):\n  File "E:\\Work\\SYSGrow\\backend\\infrastructure\\database\\migrations\\034_standardize_sensor_columns.py", line 82, in migrate\n    _rename_or_copy(cursor, "MLTrainingData", old_name="co2_ppm", new_name="co2", column_type="REAL")\n    ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "E:\\Work\\SYSGrow\\backend\\infrastructure\\database\\migrations\\034_standardize_sensor_columns.py", line 46, in _rename_or_copy\n    cursor.execute(\n    ~~~~~~~~~~~~~~^\n        f"ALTER TABLE {table} ADD COLUMN {new_name} {column_type} {default_clause}"\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\nsqlite3.OperationalError: no such table: MLTrainingData\nERROR    infrastructure.database.sqlite_handler:sqlite_handler.py:107 \u274c Migration 034_standardize_sensor_columns.py failed\nERROR    infrastructure.database.sqlite_handler:sqlite_handler.py:109 Failed to run migration 051_add_actuator_config_unique_index.py: expected str, bytes or os.PathLike object, not SQLiteDatabaseHandler\nERROR    infrastructure.database.sqlite_handler:sqlite_handler.py:109 Failed to run migration 052_add_recovery_codes.py: expected str, bytes or os.PathLike object, not SQLiteDatabaseHandler\nINFO     migration_mod:053_irrigation_reliability_tables.py:185 Migration 53 (irrigation_reliability_tables) completed successfully\nINFO     migration_mod:057_add_lux_to_plant_readings.py:31 Adding 'lux' column to PlantReadings table\nINFO     migration_mod:057_add_lux_to_plant_readings.py:35 \u2713 Migration add_lux_to_plant_readings completed successfully\nINFO     migration_mod:059_add_ph_ec_to_plant_readings.py:36 \u2713 Migration add_ph_ec_to_plant_readings completed successfully\nINFO     migration_mod:060_backfill_plant_soil_moisture_overrides.py:81 \u2713 Migration backfill_plant_soil_moisture_overrides completed successfully (15 plants updated)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for plant_health_regressor\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for plant_health_classifier\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for irrigation_threshold\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for irrigation_response\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for irrigation_duration\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for irrigation_timing\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nINFO     activity_log:activity_logger.py:128 [INFO] system_startup: Smart Agriculture System started\nWARNING  app.workers.unified_scheduler:unified_scheduler.py:607 Scheduler already running\nINFO     root:__init__.py:283  Registered blueprint: auth\nINFO     root:__init__.py:283  Registered blueprint: ui\nINFO     root:__init__.py:283  Registered blueprint: plants_api\nINFO     root:__init__.py:283  Registered blueprint: disease\nINFO     root:__init__.py:283  Registered blueprint: settings_api\nINFO     root:__init__.py:283  Registered blueprint: growth_api\nINFO     root:__init__.py:283  Registered blueprint: devices_api\nINFO     root:__init__.py:283  Registered blueprint: dashboard_api\nINFO     root:__init__.py:283  Registered blueprint: harvest\nINFO     root:__init__.py:283  Registered blueprint: ml_base\nINFO     root:__init__.py:283  Registered blueprint: ml_predictions\nINFO     root:__init__.py:283  Registered blueprint: ml_models\nINFO     root:__init__.py:283  Registered blueprint: ml_monitoring\nINFO     root:__init__.py:283  Registered blueprint: ml_analytics\nINFO     root:__init__.py:283  Registered blueprint: ml_retraining\nINFO     root:__init__.py:283  Registered blueprint: ml_analysis\nINFO     root:__init__.py:283  Registered blueprint: ml_readiness\nINFO     root:__init__.py:283  Registered blueprint: ml_ab_testing\nINFO     root:__init__.py:283  Registered blueprint: ml_continuous\nINFO     root:__init__.py:283  Registered blueprint: ml_personalized\nINFO     root:__init__.py:283  Registered blueprint: ml_training_data\nINFO     root:__init__.py:283  Registered blueprint: health_api\nINFO     root:__init__.py:283  Registered blueprint: help_api\nINFO     root:__init__.py:283  Registered blueprint: blog_api\nINFO     root:__init__.py:283  Registered blueprint: docs_api\nINFO     root:__init__.py:308 Skipping hardware bootstrap (bootstrap_runtime=False)
---------------------------- Captured stdout call -----------------------------
2026-02-19 19:20:43,555 - app.middleware.api_auth - WARNING - Blocked unauthenticated PUT to /api/v1/settings/camera from 127.0.0.1
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.api_auth:api_auth.py:85 Blocked unauthenticated PUT to /api/v1/settings/camera from 127.0.0.1
_______________________ test_device_schedule_roundtrip ________________________
tests\test_settings_api.py:117: in test_device_schedule_roundtrip
    assert response.status_code in (200, 201)
E   assert 401 in (200, 201)
E    +  where 401 = <WrapperTestResponse streamed [401 UNAUTHORIZED]>.status_code
---------------------------- Captured stdout setup ----------------------------
2026-02-19 19:20:43,562 - root - INFO - \u2705 Socket.IO initialized with CORS origins: *\n2026-02-19 19:20:43,590 - root - INFO - Seeded DeviceEnergyProfiles table with 16 default profiles.\n2026-02-19 19:20:43,591 - root - INFO - Seeded Plants table with 15 catalog entries.\n2026-02-19 19:20:43,592 - migration_mod - INFO - Migration 28 (irrigation_ml_context) completed successfully\n2026-02-19 19:20:43,592 - migration_mod - INFO - \u2705 Migration 029 (bayesian_threshold_columns) completed successfully\n2026-02-19 19:20:43,593 - migration_mod - INFO - \u2713 Created DiseaseOccurrence table\n2026-02-19 19:20:43,593 - migration_mod - INFO - \u2713 Created DiseasePredictionFeedback table\n2026-02-19 19:20:43,594 - migration_mod - INFO - \u2713 Created disease tracking indexes\n2026-02-19 19:20:43,594 - migration_mod - INFO - \u2705 Migration 30 (disease_tracking) completed successfully\n2026-02-19 19:20:43,594 - infrastructure.database.sqlite_handler - ERROR - Failed to run migration 029_disease_tracking.py: UNIQUE constraint failed: Migrations.migration_id\n2026-02-19 19:20:43,594 - migration_mod - INFO - Adding light_mode column to GrowthUnits...\n2026-02-19 19:20:43,595 - migration_mod - INFO - \u2713 Added light_mode column to GrowthUnits\n2026-02-19 19:20:43,596 - migration_mod - INFO - Added column aqi_threshold_override to Plants\n2026-02-19 19:20:43,596 - migration_mod - INFO - \u2713 Migration add_plant_threshold_overrides completed successfully\n2026-02-19 19:20:43,596 - migration_mod - INFO - \u2713 Migration add_plant_actuators completed successfully\n2026-02-19 19:20:43,596 - migration_mod - INFO - \u2713 Migration rename_light_intensity_threshold_to_lux_threshold completed successfully\n2026-02-19 19:20:43,596 - migration_mod - INFO - Column air_quality_threshold already exists in GrowthUnits\n2026-02-19 19:20:43,597 - migration_mod - INFO - Column air_quality_threshold_override already exists in Plants\n2026-02-19 19:20:43,597 - migration_mod - INFO - Old column co2_ppm not found in PlantReadings, adding co2\n2026-02-19 19:20:43,597 - migration_mod - INFO - Old column voc_ppb not found in PlantReadings, adding voc\n2026-02-19 19:20:43,598 - migration_mod - INFO - Old column aqi not found in PlantReadings, adding air_quality\n2026-02-19 19:20:43,599 - migration_mod - INFO - Old column co2_ppm not found in MLTrainingData, adding co2\n2026-02-19 19:20:43,599 - migration_mod - ERROR - Migration standardize_sensor_columns failed: no such table: MLTrainingData\nTraceback (most recent call last):\n  File "E:\\Work\\SYSGrow\\backend\\infrastructure\\database\\migrations\\034_standardize_sensor_columns.py", line 82, in migrate\n    _rename_or_copy(cursor, "MLTrainingData", old_name="co2_ppm", new_name="co2", column_type="REAL")\n    ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "E:\\Work\\SYSGrow\\backend\\infrastructure\\database\\migrations\\034_standardize_sensor_columns.py", line 46, in _rename_or_copy\n    cursor.execute(\n    ~~~~~~~~~~~~~~^\n        f"ALTER TABLE {table} ADD COLUMN {new_name} {column_type} {default_clause}"\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\nsqlite3.OperationalError: no such table: MLTrainingData\n2026-02-19 19:20:43,599 - infrastructure.database.sqlite_handler - ERROR - \u274c Migration 034_standardize_sensor_columns.py failed\nRunning migration 051 on <infrastructure.database.sqlite_handler.SQLiteDatabaseHandler object at 0x000002132402EC10>\n2026-02-19 19:20:43,600 - infrastructure.database.sqlite_handler - ERROR - Failed to run migration 051_add_actuator_config_unique_index.py: expected str, bytes or os.PathLike object, not SQLiteDatabaseHandler\nRunning migration 052 on <infrastructure.database.sqlite_handler.SQLiteDatabaseHandler object at 0x000002132402EC10>\n2026-02-19 19:20:43,600 - infrastructure.database.sqlite_handler - ERROR - Failed to run migration 052_add_recovery_codes.py: expected str, bytes or os.PathLike object, not SQLiteDatabaseHandler\n2026-02-19 19:20:43,601 - migration_mod - INFO - Migration 53 (irrigation_reliability_tables) completed successfully\n2026-02-19 19:20:43,602 - migration_mod - INFO - Adding 'lux' column to PlantReadings table\n2026-02-19 19:20:43,602 - migration_mod - INFO - \u2713 Migration add_lux_to_plant_readings completed successfully\n2026-02-19 19:20:43,603 - migration_mod - INFO - \u2713 Migration add_ph_ec_to_plant_readings completed successfully\n2026-02-19 19:20:43,604 - migration_mod - INFO - \u2713 Migration backfill_plant_soil_moisture_overrides completed successfully (15 plants updated)\n2026-02-19 19:20:43,608 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:43,608 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:43,609 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:43,609 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:43,609 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:43,609 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:43,610 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:43,610 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:43,610 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:43,610 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:43,610 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:43,610 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:43,611 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:43,611 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:43,611 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:43,611 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:43,611 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:43,611 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:43,611 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:43,611 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:43,612 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:43,612 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:48,629 - app.services.ai.model_registry - WARNING - No production version set for plant_health_regressor\n2026-02-19 19:20:48,629 - app.services.ai.model_registry - WARNING - No production version set for plant_health_classifier\n2026-02-19 19:20:48,629 - app.services.ai.model_registry - WARNING - No production version set for irrigation_threshold\n2026-02-19 19:20:48,630 - app.services.ai.model_registry - WARNING - No production version set for irrigation_response\n2026-02-19 19:20:48,630 - app.services.ai.model_registry - WARNING - No production version set for irrigation_duration\n2026-02-19 19:20:48,630 - app.services.ai.model_registry - WARNING - No production version set for irrigation_timing\n2026-02-19 19:20:48,630 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:48,631 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:48,631 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:48,631 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:48,631 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:48,631 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:48,632 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:48,632 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:48,632 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:48,632 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:48,632 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:48,633 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:48,633 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:48,633 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:48,633 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:48,633 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:48,633 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:48,633 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:48,634 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:48,634 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:48,634 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:48,634 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:48,638 - activity_log - INFO - [INFO] system_startup: Smart Agriculture System started\n2026-02-19 19:20:48,639 - app.workers.unified_scheduler - WARNING - Scheduler already running\n2026-02-19 19:20:48,721 - root - INFO -  Registered blueprint: auth\n2026-02-19 19:20:48,721 - root - INFO -  Registered blueprint: ui\n2026-02-19 19:20:48,721 - root - INFO -  Registered blueprint: plants_api\n2026-02-19 19:20:48,721 - root - INFO -  Registered blueprint: disease\n2026-02-19 19:20:48,721 - root - INFO -  Registered blueprint: settings_api\n2026-02-19 19:20:48,721 - root - INFO -  Registered blueprint: growth_api\n2026-02-19 19:20:48,721 - root - INFO -  Registered blueprint: devices_api\n2026-02-19 19:20:48,721 - root - INFO -  Registered blueprint: dashboard_api\n2026-02-19 19:20:48,721 - root - INFO -  Registered blueprint: harvest\n2026-02-19 19:20:48,721 - root - INFO -  Registered blueprint: ml_base\n2026-02-19 19:20:48,721 - root - INFO -  Registered blueprint: ml_predictions\n2026-02-19 19:20:48,721 - root - INFO -  Registered blueprint: ml_models\n2026-02-19 19:20:48,721 - root - INFO -  Registered blueprint: ml_monitoring\n2026-02-19 19:20:48,721 - root - INFO -  Registered blueprint: ml_analytics\n2026-02-19 19:20:48,721 - root - INFO -  Registered blueprint: ml_retraining\n2026-02-19 19:20:48,722 - root - INFO -  Registered blueprint: ml_analysis\n2026-02-19 19:20:48,722 - root - INFO -  Registered blueprint: ml_readiness\n2026-02-19 19:20:48,722 - root - INFO -  Registered blueprint: ml_ab_testing\n2026-02-19 19:20:48,722 - root - INFO -  Registered blueprint: ml_continuous\n2026-02-19 19:20:48,722 - root - INFO -  Registered blueprint: ml_personalized\n2026-02-19 19:20:48,722 - root - INFO -  Registered blueprint: ml_training_data\n2026-02-19 19:20:48,722 - root - INFO -  Registered blueprint: health_api\n2026-02-19 19:20:48,722 - root - INFO -  Registered blueprint: help_api\n2026-02-19 19:20:48,722 - root - INFO -  Registered blueprint: blog_api\n2026-02-19 19:20:48,722 - root - INFO -  Registered blueprint: docs_api\n2026-02-19 19:20:48,731 - root - INFO - Skipping hardware bootstrap (bootstrap_runtime=False)
----------------------------- Captured log setup ------------------------------
INFO     root:extensions.py:80 \u2705 Socket.IO initialized with CORS origins: *\nINFO     root:sqlite_handler.py:1652 Seeded DeviceEnergyProfiles table with 16 default profiles.\nINFO     root:sqlite_handler.py:1615 Seeded Plants table with 15 catalog entries.\nINFO     migration_mod:028_irrigation_ml_context.py:97 Migration 28 (irrigation_ml_context) completed successfully\nINFO     migration_mod:029_bayesian_threshold_columns.py:57 \u2705 Migration 029 (bayesian_threshold_columns) completed successfully\nINFO     migration_mod:029_disease_tracking.py:80 \u2713 Created DiseaseOccurrence table\nINFO     migration_mod:029_disease_tracking.py:119 \u2713 Created DiseasePredictionFeedback table\nINFO     migration_mod:029_disease_tracking.py:134 \u2713 Created disease tracking indexes\nINFO     migration_mod:029_disease_tracking.py:137 \u2705 Migration 30 (disease_tracking) completed successfully\nERROR    infrastructure.database.sqlite_handler:sqlite_handler.py:109 Failed to run migration 029_disease_tracking.py: UNIQUE constraint failed: Migrations.migration_id\nINFO     migration_mod:030_add_light_mode_column.py:44 Adding light_mode column to GrowthUnits...\nINFO     migration_mod:030_add_light_mode_column.py:49 \u2713 Added light_mode column to GrowthUnits\nINFO     migration_mod:031_add_plant_threshold_overrides.py:44 Added column aqi_threshold_override to Plants\nINFO     migration_mod:031_add_plant_threshold_overrides.py:47 \u2713 Migration add_plant_threshold_overrides completed successfully\nINFO     migration_mod:032_add_plant_actuators.py:39 \u2713 Migration add_plant_actuators completed successfully\nINFO     migration_mod:033_rename_light_intensity_threshold_to_lux_threshold.py:79 \u2713 Migration rename_light_intensity_threshold_to_lux_threshold completed successfully\nINFO     migration_mod:034_standardize_sensor_columns.py:41 Column air_quality_threshold already exists in GrowthUnits\nINFO     migration_mod:034_standardize_sensor_columns.py:41 Column air_quality_threshold_override already exists in Plants\nINFO     migration_mod:034_standardize_sensor_columns.py:45 Old column co2_ppm not found in PlantReadings, adding co2\nINFO     migration_mod:034_standardize_sensor_columns.py:45 Old column voc_ppb not found in PlantReadings, adding voc\nINFO     migration_mod:034_standardize_sensor_columns.py:45 Old column aqi not found in PlantReadings, adding air_quality\nINFO     migration_mod:034_standardize_sensor_columns.py:45 Old column co2_ppm not found in MLTrainingData, adding co2\nERROR    migration_mod:034_standardize_sensor_columns.py:93 Migration standardize_sensor_columns failed: no such table: MLTrainingData\nTraceback (most recent call last):\n  File "E:\\Work\\SYSGrow\\backend\\infrastructure\\database\\migrations\\034_standardize_sensor_columns.py", line 82, in migrate\n    _rename_or_copy(cursor, "MLTrainingData", old_name="co2_ppm", new_name="co2", column_type="REAL")\n    ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "E:\\Work\\SYSGrow\\backend\\infrastructure\\database\\migrations\\034_standardize_sensor_columns.py", line 46, in _rename_or_copy\n    cursor.execute(\n    ~~~~~~~~~~~~~~^\n        f"ALTER TABLE {table} ADD COLUMN {new_name} {column_type} {default_clause}"\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\nsqlite3.OperationalError: no such table: MLTrainingData\nERROR    infrastructure.database.sqlite_handler:sqlite_handler.py:107 \u274c Migration 034_standardize_sensor_columns.py failed\nERROR    infrastructure.database.sqlite_handler:sqlite_handler.py:109 Failed to run migration 051_add_actuator_config_unique_index.py: expected str, bytes or os.PathLike object, not SQLiteDatabaseHandler\nERROR    infrastructure.database.sqlite_handler:sqlite_handler.py:109 Failed to run migration 052_add_recovery_codes.py: expected str, bytes or os.PathLike object, not SQLiteDatabaseHandler\nINFO     migration_mod:053_irrigation_reliability_tables.py:185 Migration 53 (irrigation_reliability_tables) completed successfully\nINFO     migration_mod:057_add_lux_to_plant_readings.py:31 Adding 'lux' column to PlantReadings table\nINFO     migration_mod:057_add_lux_to_plant_readings.py:35 \u2713 Migration add_lux_to_plant_readings completed successfully\nINFO     migration_mod:059_add_ph_ec_to_plant_readings.py:36 \u2713 Migration add_ph_ec_to_plant_readings completed successfully\nINFO     migration_mod:060_backfill_plant_soil_moisture_overrides.py:81 \u2713 Migration backfill_plant_soil_moisture_overrides completed successfully (15 plants updated)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for plant_health_regressor\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for plant_health_classifier\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for irrigation_threshold\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for irrigation_response\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for irrigation_duration\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for irrigation_timing\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nINFO     activity_log:activity_logger.py:128 [INFO] system_startup: Smart Agriculture System started\nWARNING  app.workers.unified_scheduler:unified_scheduler.py:607 Scheduler already running\nINFO     root:__init__.py:283  Registered blueprint: auth\nINFO     root:__init__.py:283  Registered blueprint: ui\nINFO     root:__init__.py:283  Registered blueprint: plants_api\nINFO     root:__init__.py:283  Registered blueprint: disease\nINFO     root:__init__.py:283  Registered blueprint: settings_api\nINFO     root:__init__.py:283  Registered blueprint: growth_api\nINFO     root:__init__.py:283  Registered blueprint: devices_api\nINFO     root:__init__.py:283  Registered blueprint: dashboard_api\nINFO     root:__init__.py:283  Registered blueprint: harvest\nINFO     root:__init__.py:283  Registered blueprint: ml_base\nINFO     root:__init__.py:283  Registered blueprint: ml_predictions\nINFO     root:__init__.py:283  Registered blueprint: ml_models\nINFO     root:__init__.py:283  Registered blueprint: ml_monitoring\nINFO     root:__init__.py:283  Registered blueprint: ml_analytics\nINFO     root:__init__.py:283  Registered blueprint: ml_retraining\nINFO     root:__init__.py:283  Registered blueprint: ml_analysis\nINFO     root:__init__.py:283  Registered blueprint: ml_readiness\nINFO     root:__init__.py:283  Registered blueprint: ml_ab_testing\nINFO     root:__init__.py:283  Registered blueprint: ml_continuous\nINFO     root:__init__.py:283  Registered blueprint: ml_personalized\nINFO     root:__init__.py:283  Registered blueprint: ml_training_data\nINFO     root:__init__.py:283  Registered blueprint: health_api\nINFO     root:__init__.py:283  Registered blueprint: help_api\nINFO     root:__init__.py:283  Registered blueprint: blog_api\nINFO     root:__init__.py:283  Registered blueprint: docs_api\nINFO     root:__init__.py:308 Skipping hardware bootstrap (bootstrap_runtime=False)
---------------------------- Captured stdout call -----------------------------
2026-02-19 19:20:48,733 - app.middleware.api_auth - WARNING - Blocked unauthenticated POST to /api/v1/growth/v3/units/1/schedules from 127.0.0.1
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.api_auth:api_auth.py:85 Blocked unauthenticated POST to /api/v1/growth/v3/units/1/schedules from 127.0.0.1
___________________ test_environment_thresholds_validation ____________________
tests\test_settings_api.py:141: in test_environment_thresholds_validation
    assert bad_response.status_code == 200
E   assert 401 == 200
E    +  where 401 = <WrapperTestResponse streamed [401 UNAUTHORIZED]>.status_code
---------------------------- Captured stdout setup ----------------------------
2026-02-19 19:20:48,740 - root - INFO - \u2705 Socket.IO initialized with CORS origins: *\n2026-02-19 19:20:48,767 - root - INFO - Seeded DeviceEnergyProfiles table with 16 default profiles.\n2026-02-19 19:20:48,768 - root - INFO - Seeded Plants table with 15 catalog entries.\n2026-02-19 19:20:48,769 - migration_mod - INFO - Migration 28 (irrigation_ml_context) completed successfully\n2026-02-19 19:20:48,769 - migration_mod - INFO - \u2705 Migration 029 (bayesian_threshold_columns) completed successfully\n2026-02-19 19:20:48,770 - migration_mod - INFO - \u2713 Created DiseaseOccurrence table\n2026-02-19 19:20:48,770 - migration_mod - INFO - \u2713 Created DiseasePredictionFeedback table\n2026-02-19 19:20:48,771 - migration_mod - INFO - \u2713 Created disease tracking indexes\n2026-02-19 19:20:48,771 - migration_mod - INFO - \u2705 Migration 30 (disease_tracking) completed successfully\n2026-02-19 19:20:48,771 - infrastructure.database.sqlite_handler - ERROR - Failed to run migration 029_disease_tracking.py: UNIQUE constraint failed: Migrations.migration_id\n2026-02-19 19:20:48,771 - migration_mod - INFO - Adding light_mode column to GrowthUnits...\n2026-02-19 19:20:48,772 - migration_mod - INFO - \u2713 Added light_mode column to GrowthUnits\n2026-02-19 19:20:48,773 - migration_mod - INFO - Added column aqi_threshold_override to Plants\n2026-02-19 19:20:48,773 - migration_mod - INFO - \u2713 Migration add_plant_threshold_overrides completed successfully\n2026-02-19 19:20:48,773 - migration_mod - INFO - \u2713 Migration add_plant_actuators completed successfully\n2026-02-19 19:20:48,774 - migration_mod - INFO - \u2713 Migration rename_light_intensity_threshold_to_lux_threshold completed successfully\n2026-02-19 19:20:48,774 - migration_mod - INFO - Column air_quality_threshold already exists in GrowthUnits\n2026-02-19 19:20:48,774 - migration_mod - INFO - Column air_quality_threshold_override already exists in Plants\n2026-02-19 19:20:48,774 - migration_mod - INFO - Old column co2_ppm not found in PlantReadings, adding co2\n2026-02-19 19:20:48,775 - migration_mod - INFO - Old column voc_ppb not found in PlantReadings, adding voc\n2026-02-19 19:20:48,775 - migration_mod - INFO - Old column aqi not found in PlantReadings, adding air_quality\n2026-02-19 19:20:48,776 - migration_mod - INFO - Old column co2_ppm not found in MLTrainingData, adding co2\n2026-02-19 19:20:48,776 - migration_mod - ERROR - Migration standardize_sensor_columns failed: no such table: MLTrainingData\nTraceback (most recent call last):\n  File "E:\\Work\\SYSGrow\\backend\\infrastructure\\database\\migrations\\034_standardize_sensor_columns.py", line 82, in migrate\n    _rename_or_copy(cursor, "MLTrainingData", old_name="co2_ppm", new_name="co2", column_type="REAL")\n    ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "E:\\Work\\SYSGrow\\backend\\infrastructure\\database\\migrations\\034_standardize_sensor_columns.py", line 46, in _rename_or_copy\n    cursor.execute(\n    ~~~~~~~~~~~~~~^\n        f"ALTER TABLE {table} ADD COLUMN {new_name} {column_type} {default_clause}"\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\nsqlite3.OperationalError: no such table: MLTrainingData\n2026-02-19 19:20:48,776 - infrastructure.database.sqlite_handler - ERROR - \u274c Migration 034_standardize_sensor_columns.py failed\nRunning migration 051 on <infrastructure.database.sqlite_handler.SQLiteDatabaseHandler object at 0x000002131F179630>\n2026-02-19 19:20:48,777 - infrastructure.database.sqlite_handler - ERROR - Failed to run migration 051_add_actuator_config_unique_index.py: expected str, bytes or os.PathLike object, not SQLiteDatabaseHandler\nRunning migration 052 on <infrastructure.database.sqlite_handler.SQLiteDatabaseHandler object at 0x000002131F179630>\n2026-02-19 19:20:48,777 - infrastructure.database.sqlite_handler - ERROR - Failed to run migration 052_add_recovery_codes.py: expected str, bytes or os.PathLike object, not SQLiteDatabaseHandler\n2026-02-19 19:20:48,778 - migration_mod - INFO - Migration 53 (irrigation_reliability_tables) completed successfully\n2026-02-19 19:20:48,779 - migration_mod - INFO - Adding 'lux' column to PlantReadings table\n2026-02-19 19:20:48,779 - migration_mod - INFO - \u2713 Migration add_lux_to_plant_readings completed successfully\n2026-02-19 19:20:48,780 - migration_mod - INFO - \u2713 Migration add_ph_ec_to_plant_readings completed successfully\n2026-02-19 19:20:48,781 - migration_mod - INFO - \u2713 Migration backfill_plant_soil_moisture_overrides completed successfully (15 plants updated)\n2026-02-19 19:20:48,785 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:48,785 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:48,785 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:48,785 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:48,785 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:48,785 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:48,786 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:48,786 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:48,786 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:48,786 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:48,786 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:48,787 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:48,787 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:48,787 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:48,787 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:48,787 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:48,787 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:48,787 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:48,787 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:48,788 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:48,788 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:48,788 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:48,788 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:53,800 - app.services.ai.model_registry - WARNING - No production version set for plant_health_regressor\n2026-02-19 19:20:53,800 - app.services.ai.model_registry - WARNING - No production version set for plant_health_classifier\n2026-02-19 19:20:53,800 - app.services.ai.model_registry - WARNING - No production version set for irrigation_threshold\n2026-02-19 19:20:53,800 - app.services.ai.model_registry - WARNING - No production version set for irrigation_response\n2026-02-19 19:20:53,800 - app.services.ai.model_registry - WARNING - No production version set for irrigation_duration\n2026-02-19 19:20:53,800 - app.services.ai.model_registry - WARNING - No production version set for irrigation_timing\n2026-02-19 19:20:53,801 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:53,801 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:53,802 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:53,802 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:53,802 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:53,802 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:53,802 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:53,803 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:53,803 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:53,803 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:53,803 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:53,803 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:53,803 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:53,803 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:53,804 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:53,806 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:53,806 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:53,806 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:53,806 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:53,806 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:53,807 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:53,807 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:53,807 - app.services.hardware.mqtt_sensor_service - ERROR - Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\n2026-02-19 19:20:53,810 - activity_log - INFO - [INFO] system_startup: Smart Agriculture System started\n2026-02-19 19:20:53,812 - app.workers.unified_scheduler - WARNING - Scheduler already running\n2026-02-19 19:20:53,894 - root - INFO -  Registered blueprint: auth\n2026-02-19 19:20:53,895 - root - INFO -  Registered blueprint: ui\n2026-02-19 19:20:53,895 - root - INFO -  Registered blueprint: plants_api\n2026-02-19 19:20:53,895 - root - INFO -  Registered blueprint: disease\n2026-02-19 19:20:53,895 - root - INFO -  Registered blueprint: settings_api\n2026-02-19 19:20:53,895 - root - INFO -  Registered blueprint: growth_api\n2026-02-19 19:20:53,895 - root - INFO -  Registered blueprint: devices_api\n2026-02-19 19:20:53,895 - root - INFO -  Registered blueprint: dashboard_api\n2026-02-19 19:20:53,895 - root - INFO -  Registered blueprint: harvest\n2026-02-19 19:20:53,895 - root - INFO -  Registered blueprint: ml_base\n2026-02-19 19:20:53,895 - root - INFO -  Registered blueprint: ml_predictions\n2026-02-19 19:20:53,895 - root - INFO -  Registered blueprint: ml_models\n2026-02-19 19:20:53,895 - root - INFO -  Registered blueprint: ml_monitoring\n2026-02-19 19:20:53,895 - root - INFO -  Registered blueprint: ml_analytics\n2026-02-19 19:20:53,895 - root - INFO -  Registered blueprint: ml_retraining\n2026-02-19 19:20:53,895 - root - INFO -  Registered blueprint: ml_analysis\n2026-02-19 19:20:53,895 - root - INFO -  Registered blueprint: ml_readiness\n2026-02-19 19:20:53,896 - root - INFO -  Registered blueprint: ml_ab_testing\n2026-02-19 19:20:53,896 - root - INFO -  Registered blueprint: ml_continuous\n2026-02-19 19:20:53,896 - root - INFO -  Registered blueprint: ml_personalized\n2026-02-19 19:20:53,896 - root - INFO -  Registered blueprint: ml_training_data\n2026-02-19 19:20:53,896 - root - INFO -  Registered blueprint: health_api\n2026-02-19 19:20:53,896 - root - INFO -  Registered blueprint: help_api\n2026-02-19 19:20:53,896 - root - INFO -  Registered blueprint: blog_api\n2026-02-19 19:20:53,896 - root - INFO -  Registered blueprint: docs_api\n2026-02-19 19:20:53,905 - root - INFO - Skipping hardware bootstrap (bootstrap_runtime=False)
----------------------------- Captured log setup ------------------------------
INFO     root:extensions.py:80 \u2705 Socket.IO initialized with CORS origins: *\nINFO     root:sqlite_handler.py:1652 Seeded DeviceEnergyProfiles table with 16 default profiles.\nINFO     root:sqlite_handler.py:1615 Seeded Plants table with 15 catalog entries.\nINFO     migration_mod:028_irrigation_ml_context.py:97 Migration 28 (irrigation_ml_context) completed successfully\nINFO     migration_mod:029_bayesian_threshold_columns.py:57 \u2705 Migration 029 (bayesian_threshold_columns) completed successfully\nINFO     migration_mod:029_disease_tracking.py:80 \u2713 Created DiseaseOccurrence table\nINFO     migration_mod:029_disease_tracking.py:119 \u2713 Created DiseasePredictionFeedback table\nINFO     migration_mod:029_disease_tracking.py:134 \u2713 Created disease tracking indexes\nINFO     migration_mod:029_disease_tracking.py:137 \u2705 Migration 30 (disease_tracking) completed successfully\nERROR    infrastructure.database.sqlite_handler:sqlite_handler.py:109 Failed to run migration 029_disease_tracking.py: UNIQUE constraint failed: Migrations.migration_id\nINFO     migration_mod:030_add_light_mode_column.py:44 Adding light_mode column to GrowthUnits...\nINFO     migration_mod:030_add_light_mode_column.py:49 \u2713 Added light_mode column to GrowthUnits\nINFO     migration_mod:031_add_plant_threshold_overrides.py:44 Added column aqi_threshold_override to Plants\nINFO     migration_mod:031_add_plant_threshold_overrides.py:47 \u2713 Migration add_plant_threshold_overrides completed successfully\nINFO     migration_mod:032_add_plant_actuators.py:39 \u2713 Migration add_plant_actuators completed successfully\nINFO     migration_mod:033_rename_light_intensity_threshold_to_lux_threshold.py:79 \u2713 Migration rename_light_intensity_threshold_to_lux_threshold completed successfully\nINFO     migration_mod:034_standardize_sensor_columns.py:41 Column air_quality_threshold already exists in GrowthUnits\nINFO     migration_mod:034_standardize_sensor_columns.py:41 Column air_quality_threshold_override already exists in Plants\nINFO     migration_mod:034_standardize_sensor_columns.py:45 Old column co2_ppm not found in PlantReadings, adding co2\nINFO     migration_mod:034_standardize_sensor_columns.py:45 Old column voc_ppb not found in PlantReadings, adding voc\nINFO     migration_mod:034_standardize_sensor_columns.py:45 Old column aqi not found in PlantReadings, adding air_quality\nINFO     migration_mod:034_standardize_sensor_columns.py:45 Old column co2_ppm not found in MLTrainingData, adding co2\nERROR    migration_mod:034_standardize_sensor_columns.py:93 Migration standardize_sensor_columns failed: no such table: MLTrainingData\nTraceback (most recent call last):\n  File "E:\\Work\\SYSGrow\\backend\\infrastructure\\database\\migrations\\034_standardize_sensor_columns.py", line 82, in migrate\n    _rename_or_copy(cursor, "MLTrainingData", old_name="co2_ppm", new_name="co2", column_type="REAL")\n    ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "E:\\Work\\SYSGrow\\backend\\infrastructure\\database\\migrations\\034_standardize_sensor_columns.py", line 46, in _rename_or_copy\n    cursor.execute(\n    ~~~~~~~~~~~~~~^\n        f"ALTER TABLE {table} ADD COLUMN {new_name} {column_type} {default_clause}"\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\nsqlite3.OperationalError: no such table: MLTrainingData\nERROR    infrastructure.database.sqlite_handler:sqlite_handler.py:107 \u274c Migration 034_standardize_sensor_columns.py failed\nERROR    infrastructure.database.sqlite_handler:sqlite_handler.py:109 Failed to run migration 051_add_actuator_config_unique_index.py: expected str, bytes or os.PathLike object, not SQLiteDatabaseHandler\nERROR    infrastructure.database.sqlite_handler:sqlite_handler.py:109 Failed to run migration 052_add_recovery_codes.py: expected str, bytes or os.PathLike object, not SQLiteDatabaseHandler\nINFO     migration_mod:053_irrigation_reliability_tables.py:185 Migration 53 (irrigation_reliability_tables) completed successfully\nINFO     migration_mod:057_add_lux_to_plant_readings.py:31 Adding 'lux' column to PlantReadings table\nINFO     migration_mod:057_add_lux_to_plant_readings.py:35 \u2713 Migration add_lux_to_plant_readings completed successfully\nINFO     migration_mod:059_add_ph_ec_to_plant_readings.py:36 \u2713 Migration add_ph_ec_to_plant_readings completed successfully\nINFO     migration_mod:060_backfill_plant_soil_moisture_overrides.py:81 \u2713 Migration backfill_plant_soil_moisture_overrides completed successfully (15 plants updated)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (state): Expecting value: line 1 column 1 (char 0)\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for plant_health_regressor\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for plant_health_classifier\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for irrigation_threshold\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for irrigation_response\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for irrigation_duration\nWARNING  app.services.ai.model_registry:model_registry.py:371 No production version set for irrigation_timing\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nERROR    app.services.hardware.mqtt_sensor_service:mqtt_sensor_service.py:679 Invalid JSON from zigbee2mqtt (devices): Expecting value: line 1 column 1 (char 0)\nINFO     activity_log:activity_logger.py:128 [INFO] system_startup: Smart Agriculture System started\nWARNING  app.workers.unified_scheduler:unified_scheduler.py:607 Scheduler already running\nINFO     root:__init__.py:283  Registered blueprint: auth\nINFO     root:__init__.py:283  Registered blueprint: ui\nINFO     root:__init__.py:283  Registered blueprint: plants_api\nINFO     root:__init__.py:283  Registered blueprint: disease\nINFO     root:__init__.py:283  Registered blueprint: settings_api\nINFO     root:__init__.py:283  Registered blueprint: growth_api\nINFO     root:__init__.py:283  Registered blueprint: devices_api\nINFO     root:__init__.py:283  Registered blueprint: dashboard_api\nINFO     root:__init__.py:283  Registered blueprint: harvest\nINFO     root:__init__.py:283  Registered blueprint: ml_base\nINFO     root:__init__.py:283  Registered blueprint: ml_predictions\nINFO     root:__init__.py:283  Registered blueprint: ml_models\nINFO     root:__init__.py:283  Registered blueprint: ml_monitoring\nINFO     root:__init__.py:283  Registered blueprint: ml_analytics\nINFO     root:__init__.py:283  Registered blueprint: ml_retraining\nINFO     root:__init__.py:283  Registered blueprint: ml_analysis\nINFO     root:__init__.py:283  Registered blueprint: ml_readiness\nINFO     root:__init__.py:283  Registered blueprint: ml_ab_testing\nINFO     root:__init__.py:283  Registered blueprint: ml_continuous\nINFO     root:__init__.py:283  Registered blueprint: ml_personalized\nINFO     root:__init__.py:283  Registered blueprint: ml_training_data\nINFO     root:__init__.py:283  Registered blueprint: health_api\nINFO     root:__init__.py:283  Registered blueprint: help_api\nINFO     root:__init__.py:283  Registered blueprint: blog_api\nINFO     root:__init__.py:283  Registered blueprint: docs_api\nINFO     root:__init__.py:308 Skipping hardware bootstrap (bootstrap_runtime=False)
---------------------------- Captured stdout call -----------------------------
2026-02-19 19:20:53,908 - app.middleware.api_auth - WARNING - Blocked unauthenticated PUT to /api/v1/settings/environment from 127.0.0.1
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.api_auth:api_auth.py:85 Blocked unauthenticated PUT to /api/v1/settings/environment from 127.0.0.1
___________ test_startup_critical_modules_avoid_datetime_utc_import ___________
tests\test_startup_regressions.py:125: in test_startup_critical_modules_avoid_datetime_utc_import
    assert "from datetime import UTC" not in source
E   assert 'from datetime import UTC' not in '"""Utility ...urn parsed\n'
E
E     'from datetime import UTC' is contained here:
E       otations
E
E       from datetime import UTC, datetime
E       from typing import Any
E       ...
E
E     ...Full output truncated (72 lines hidden), use '-vv' to show
============================== warnings summary ===============================
tests/test_api.py: 3 warnings
tests/test_api_devices_v2.py: 4 warnings
tests/test_api_thresholds_recommended.py: 2 warnings
tests/test_comprehensive_devices.py: 1 warning
tests/test_connectivity_history.py: 2 warnings
tests/test_connectivity_seeded.py: 2 warnings
tests/test_consolidated_apis.py: 1 warning
tests/test_efficiency_score_api.py: 1 warning
tests/test_growth_unit_apis.py: 1 warning
tests/test_mqtt_client_factory.py: 1 warning
tests/test_plant_journal_watering_endpoint.py: 1 warning
tests/test_service_integration.py: 1 warning
tests/test_settings_api.py: 5 warnings
tests/test_state_history_csv.py: 2 warnings
  E:\Work\SYSGrow\backend\app\hardware\mqtt\client_factory.py:48: DeprecationWarning: Callback API version 1 is deprecated, update to latest version
    return mqtt.Client(**client_kwargs)

tests/test_api.py::test_sensor_history_endpoint
  E:\Work\SYSGrow\backend\tests\test_api.py:74: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    now = datetime.utcnow()

tests/test_api_updates.py::test_dimensions_serialization
  E:\Work\SYSGrow\backend\.venv\Lib\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_api_updates.py::test_dimensions_serialization returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_api_updates.py::test_device_schedules_serialization
  E:\Work\SYSGrow\backend\.venv\Lib\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_api_updates.py::test_device_schedules_serialization returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_api_updates.py::test_complete_unit_creation_payload
  E:\Work\SYSGrow\backend\.venv\Lib\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_api_updates.py::test_complete_unit_creation_payload returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_api_updates.py::test_api_field_extraction
  E:\Work\SYSGrow\backend\.venv\Lib\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_api_updates.py::test_api_field_extraction returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_architecture_refactor.py::test_unit_runtime_is_domain_only
  E:\Work\SYSGrow\backend\.venv\Lib\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_architecture_refactor.py::test_unit_runtime_is_domain_only returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_architecture_refactor.py::test_growth_service_loads_plants
  E:\Work\SYSGrow\backend\.venv\Lib\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_architecture_refactor.py::test_growth_service_loads_plants returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_architecture_refactor.py::test_climate_service_no_duplicate_managers
  E:\Work\SYSGrow\backend\.venv\Lib\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_architecture_refactor.py::test_climate_service_no_duplicate_managers returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_architecture_refactor.py::test_full_integration
  E:\Work\SYSGrow\backend\.venv\Lib\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_architecture_refactor.py::test_full_integration returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_consolidated_apis.py::test_consolidated_apis
  E:\Work\SYSGrow\backend\.venv\Lib\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_consolidated_apis.py::test_consolidated_apis returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_efficiency_score_api.py::test_efficiency_score_filters_anomalies_and_includes_grade_trend
  E:\Work\SYSGrow\backend\tests\test_efficiency_score_api.py:28: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    now = datetime.utcnow()

tests/test_enhanced_handler.py::test_get_plant_by_id
  E:\Work\SYSGrow\backend\.venv\Lib\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_enhanced_handler.py::test_get_plant_by_id returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_enhanced_handler.py::test_validate_plant_structure
  E:\Work\SYSGrow\backend\.venv\Lib\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_enhanced_handler.py::test_validate_plant_structure returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_enhanced_handler.py::test_update_automation
  E:\Work\SYSGrow\backend\.venv\Lib\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_enhanced_handler.py::test_update_automation returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_enhanced_handler.py::test_search_plants
  E:\Work\SYSGrow\backend\.venv\Lib\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_enhanced_handler.py::test_search_plants returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_enhanced_handler.py::test_get_plants_by_difficulty
  E:\Work\SYSGrow\backend\.venv\Lib\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_enhanced_handler.py::test_get_plants_by_difficulty returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_enhanced_handler.py::test_get_plants_requiring_automation
  E:\Work\SYSGrow\backend\.venv\Lib\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_enhanced_handler.py::test_get_plants_requiring_automation returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_enhanced_handler.py::test_export_plant_summary
  E:\Work\SYSGrow\backend\.venv\Lib\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_enhanced_handler.py::test_export_plant_summary returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_enhanced_handler.py::test_all_plants_complete
  E:\Work\SYSGrow\backend\.venv\Lib\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_enhanced_handler.py::test_all_plants_complete returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_growth_unit_apis.py::test_growth_unit_apis
  E:\Work\SYSGrow\backend\.venv\Lib\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_growth_unit_apis.py::test_growth_unit_apis returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_harvest_cleanup.py: 10 warnings
  E:\Work\SYSGrow\backend\tests\test_harvest_cleanup.py:75: DeprecationWarning: The default datetime adapter is deprecated as of Python 3.12; see the sqlite3 documentation for suggested replacement recipes
    conn.execute(

tests/test_harvest_cleanup.py: 10 warnings
  E:\Work\SYSGrow\backend\tests\test_harvest_cleanup.py:86: DeprecationWarning: The default datetime adapter is deprecated as of Python 3.12; see the sqlite3 documentation for suggested replacement recipes
    conn.execute(

tests/test_harvest_cleanup.py::test_harvest_cleanup
  E:\Work\SYSGrow\backend\tests\test_harvest_cleanup.py:97: DeprecationWarning: The default datetime adapter is deprecated as of Python 3.12; see the sqlite3 documentation for suggested replacement recipes
    conn.execute(

tests/test_harvest_cleanup.py::test_harvest_cleanup
  E:\Work\SYSGrow\backend\.venv\Lib\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_harvest_cleanup.py::test_harvest_cleanup returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_harvest_complete.py: 30 warnings
  E:\Work\SYSGrow\backend\tests\test_harvest_complete.py:52: DeprecationWarning: The default datetime adapter is deprecated as of Python 3.12; see the sqlite3 documentation for suggested replacement recipes
    conn.execute(

tests/test_harvest_complete.py::test_harvest
  E:\Work\SYSGrow\backend\.venv\Lib\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_harvest_complete.py::test_harvest returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_plant_thresholds.py::test_get_generic_thresholds
  E:\Work\SYSGrow\backend\.venv\Lib\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_plant_thresholds.py::test_get_generic_thresholds returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_plant_thresholds.py::test_get_plant_specific_thresholds
  E:\Work\SYSGrow\backend\.venv\Lib\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_plant_thresholds.py::test_get_plant_specific_thresholds returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_plant_thresholds.py::test_get_stage_specific_thresholds
  E:\Work\SYSGrow\backend\.venv\Lib\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_plant_thresholds.py::test_get_stage_specific_thresholds returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_plant_thresholds.py::test_domain_object_methods
  E:\Work\SYSGrow\backend\.venv\Lib\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_plant_thresholds.py::test_domain_object_methods returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_plant_thresholds.py::test_growth_stages
  E:\Work\SYSGrow\backend\.venv\Lib\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_plant_thresholds.py::test_growth_stages returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_plant_thresholds.py::test_ai_integration
  E:\Work\SYSGrow\backend\.venv\Lib\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_plant_thresholds.py::test_ai_integration returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_plant_thresholds.py::test_validation_methods
  E:\Work\SYSGrow\backend\.venv\Lib\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_plant_thresholds.py::test_validation_methods returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_plant_thresholds.py::test_adjustment_recommendations
  E:\Work\SYSGrow\backend\.venv\Lib\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_plant_thresholds.py::test_adjustment_recommendations returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_plant_thresholds.py::test_caching
  E:\Work\SYSGrow\backend\.venv\Lib\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_plant_thresholds.py::test_caching returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_plant_thresholds.py::test_all
  E:\Work\SYSGrow\backend\.venv\Lib\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_plant_thresholds.py::test_all returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_refactored_architecture.py::test_imports
  E:\Work\SYSGrow\backend\.venv\Lib\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_refactored_architecture.py::test_imports returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_refactored_architecture.py::test_unit_runtime_creation
  E:\Work\SYSGrow\backend\.venv\Lib\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_refactored_architecture.py::test_unit_runtime_creation returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_refactored_architecture.py::test_plant_profile_enhancement
  E:\Work\SYSGrow\backend\.venv\Lib\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_refactored_architecture.py::test_plant_profile_enhancement returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_service_integration.py::test_service_container
  E:\Work\SYSGrow\backend\.venv\Lib\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_service_integration.py::test_service_container returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_service_integration.py::test_ui_helpers
  E:\Work\SYSGrow\backend\.venv\Lib\site-packages\_pytest\python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_service_integration.py::test_ui_helpers returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/unit/services/test_auth_service_regressions.py::test_reset_password_with_token_fails_when_repo_atomic_write_fails
  E:\Work\SYSGrow\backend\app\services\application\auth_service.py:247: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    used_at = datetime.utcnow().isoformat()

tests/unit/services/test_auth_service_regressions.py::test_generate_recovery_codes_returns_none_when_repo_persistence_fails
  E:\Work\SYSGrow\backend\app\services\application\auth_service.py:337: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    created_at = datetime.utcnow().isoformat()

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ===========================
FAILED tests/test_api.py::test_growth_unit_lifecycle - assert 401 == 201
FAILED tests/test_api.py::test_sensor_history_endpoint - assert 500 == 200
FAILED tests/test_api.py::test_status_endpoint - werkzeug.exceptions.NotFound...
FAILED tests/test_api_devices_v2.py::test_create_sensor_v2_happy_path - asser...
FAILED tests/test_api_devices_v2.py::test_create_sensor_v2_validation_error
FAILED tests/test_api_devices_v2.py::test_create_actuator_v2_happy_path - ass...
FAILED tests/test_api_devices_v2.py::test_create_actuator_v2_validation_error
FAILED tests/test_plant_journal_watering_endpoint.py::test_journal_watering_endpoint_creates_entry
FAILED tests/test_settings_api.py::test_hotspot_settings_roundtrip - assert 4...
FAILED tests/test_settings_api.py::test_camera_settings_roundtrip - assert 40...
FAILED tests/test_settings_api.py::test_device_schedule_roundtrip - assert 40...
FAILED tests/test_settings_api.py::test_environment_thresholds_validation - a...
FAILED tests/test_startup_regressions.py::test_startup_critical_modules_avoid_datetime_utc_import
ERROR tests/test_dashboard_summary_regressions.py::test_build_devices_summary_counts_active_from_is_active_and_sensors
ERROR tests/test_dashboard_summary_regressions.py::test_dashboard_summary_preserves_actuators_and_passes_them_to_unit_settings
= 13 failed, 401 passed, 3 skipped, 117 warnings, 2 errors in 304.99s (0:05:04) =
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 125, in _graceful_shutdown
    logging.info("Graceful shutdown initiated (%s)", reason)
Message: 'Graceful shutdown initiated (%s)'
Arguments: ('atexit',)
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 127, in _graceful_shutdown
    container.shutdown()
  File "E:\Work\SYSGrow\backend\app\services\container.py", line 167, in shutdown
    self.activity_logger.log_activity(
  File "E:\Work\SYSGrow\backend\app\services\application\activity_logger.py", line 128, in log_activity
    activity_file_logger.info(log_message)
Message: '[INFO] system_shutdown: Smart Agriculture System shutting down'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 125, in _graceful_shutdown
    logging.info("Graceful shutdown initiated (%s)", reason)
Message: 'Graceful shutdown initiated (%s)'
Arguments: ('atexit',)
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 127, in _graceful_shutdown
    container.shutdown()
  File "E:\Work\SYSGrow\backend\app\services\container.py", line 167, in shutdown
    self.activity_logger.log_activity(
  File "E:\Work\SYSGrow\backend\app\services\application\activity_logger.py", line 128, in log_activity
    activity_file_logger.info(log_message)
Message: '[INFO] system_shutdown: Smart Agriculture System shutting down'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 125, in _graceful_shutdown
    logging.info("Graceful shutdown initiated (%s)", reason)
Message: 'Graceful shutdown initiated (%s)'
Arguments: ('atexit',)
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 127, in _graceful_shutdown
    container.shutdown()
  File "E:\Work\SYSGrow\backend\app\services\container.py", line 167, in shutdown
    self.activity_logger.log_activity(
  File "E:\Work\SYSGrow\backend\app\services\application\activity_logger.py", line 128, in log_activity
    activity_file_logger.info(log_message)
Message: '[INFO] system_shutdown: Smart Agriculture System shutting down'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 125, in _graceful_shutdown
    logging.info("Graceful shutdown initiated (%s)", reason)
Message: 'Graceful shutdown initiated (%s)'
Arguments: ('atexit',)
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 127, in _graceful_shutdown
    container.shutdown()
  File "E:\Work\SYSGrow\backend\app\services\container.py", line 167, in shutdown
    self.activity_logger.log_activity(
  File "E:\Work\SYSGrow\backend\app\services\application\activity_logger.py", line 128, in log_activity
    activity_file_logger.info(log_message)
Message: '[INFO] system_shutdown: Smart Agriculture System shutting down'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 125, in _graceful_shutdown
    logging.info("Graceful shutdown initiated (%s)", reason)
Message: 'Graceful shutdown initiated (%s)'
Arguments: ('atexit',)
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 127, in _graceful_shutdown
    container.shutdown()
  File "E:\Work\SYSGrow\backend\app\services\container.py", line 167, in shutdown
    self.activity_logger.log_activity(
  File "E:\Work\SYSGrow\backend\app\services\application\activity_logger.py", line 128, in log_activity
    activity_file_logger.info(log_message)
Message: '[INFO] system_shutdown: Smart Agriculture System shutting down'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 125, in _graceful_shutdown
    logging.info("Graceful shutdown initiated (%s)", reason)
Message: 'Graceful shutdown initiated (%s)'
Arguments: ('atexit',)
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 127, in _graceful_shutdown
    container.shutdown()
  File "E:\Work\SYSGrow\backend\app\services\container.py", line 167, in shutdown
    self.activity_logger.log_activity(
  File "E:\Work\SYSGrow\backend\app\services\application\activity_logger.py", line 128, in log_activity
    activity_file_logger.info(log_message)
Message: '[INFO] system_shutdown: Smart Agriculture System shutting down'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 125, in _graceful_shutdown
    logging.info("Graceful shutdown initiated (%s)", reason)
Message: 'Graceful shutdown initiated (%s)'
Arguments: ('atexit',)
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 127, in _graceful_shutdown
    container.shutdown()
  File "E:\Work\SYSGrow\backend\app\services\container.py", line 167, in shutdown
    self.activity_logger.log_activity(
  File "E:\Work\SYSGrow\backend\app\services\application\activity_logger.py", line 128, in log_activity
    activity_file_logger.info(log_message)
Message: '[INFO] system_shutdown: Smart Agriculture System shutting down'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 125, in _graceful_shutdown
    logging.info("Graceful shutdown initiated (%s)", reason)
Message: 'Graceful shutdown initiated (%s)'
Arguments: ('atexit',)
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 127, in _graceful_shutdown
    container.shutdown()
  File "E:\Work\SYSGrow\backend\app\services\container.py", line 167, in shutdown
    self.activity_logger.log_activity(
  File "E:\Work\SYSGrow\backend\app\services\application\activity_logger.py", line 128, in log_activity
    activity_file_logger.info(log_message)
Message: '[INFO] system_shutdown: Smart Agriculture System shutting down'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 125, in _graceful_shutdown
    logging.info("Graceful shutdown initiated (%s)", reason)
Message: 'Graceful shutdown initiated (%s)'
Arguments: ('atexit',)
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 127, in _graceful_shutdown
    container.shutdown()
  File "E:\Work\SYSGrow\backend\app\services\container.py", line 167, in shutdown
    self.activity_logger.log_activity(
  File "E:\Work\SYSGrow\backend\app\services\application\activity_logger.py", line 128, in log_activity
    activity_file_logger.info(log_message)
Message: '[INFO] system_shutdown: Smart Agriculture System shutting down'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 125, in _graceful_shutdown
    logging.info("Graceful shutdown initiated (%s)", reason)
Message: 'Graceful shutdown initiated (%s)'
Arguments: ('atexit',)
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 127, in _graceful_shutdown
    container.shutdown()
  File "E:\Work\SYSGrow\backend\app\services\container.py", line 167, in shutdown
    self.activity_logger.log_activity(
  File "E:\Work\SYSGrow\backend\app\services\application\activity_logger.py", line 128, in log_activity
    activity_file_logger.info(log_message)
Message: '[INFO] system_shutdown: Smart Agriculture System shutting down'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 125, in _graceful_shutdown
    logging.info("Graceful shutdown initiated (%s)", reason)
Message: 'Graceful shutdown initiated (%s)'
Arguments: ('atexit',)
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 127, in _graceful_shutdown
    container.shutdown()
  File "E:\Work\SYSGrow\backend\app\services\container.py", line 167, in shutdown
    self.activity_logger.log_activity(
  File "E:\Work\SYSGrow\backend\app\services\application\activity_logger.py", line 128, in log_activity
    activity_file_logger.info(log_message)
Message: '[INFO] system_shutdown: Smart Agriculture System shutting down'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 125, in _graceful_shutdown
    logging.info("Graceful shutdown initiated (%s)", reason)
Message: 'Graceful shutdown initiated (%s)'
Arguments: ('atexit',)
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 127, in _graceful_shutdown
    container.shutdown()
  File "E:\Work\SYSGrow\backend\app\services\container.py", line 167, in shutdown
    self.activity_logger.log_activity(
  File "E:\Work\SYSGrow\backend\app\services\application\activity_logger.py", line 128, in log_activity
    activity_file_logger.info(log_message)
Message: '[INFO] system_shutdown: Smart Agriculture System shutting down'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 125, in _graceful_shutdown
    logging.info("Graceful shutdown initiated (%s)", reason)
Message: 'Graceful shutdown initiated (%s)'
Arguments: ('atexit',)
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 127, in _graceful_shutdown
    container.shutdown()
  File "E:\Work\SYSGrow\backend\app\services\container.py", line 167, in shutdown
    self.activity_logger.log_activity(
  File "E:\Work\SYSGrow\backend\app\services\application\activity_logger.py", line 128, in log_activity
    activity_file_logger.info(log_message)
Message: '[INFO] system_shutdown: Smart Agriculture System shutting down'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 125, in _graceful_shutdown
    logging.info("Graceful shutdown initiated (%s)", reason)
Message: 'Graceful shutdown initiated (%s)'
Arguments: ('atexit',)
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 127, in _graceful_shutdown
    container.shutdown()
  File "E:\Work\SYSGrow\backend\app\services\container.py", line 167, in shutdown
    self.activity_logger.log_activity(
  File "E:\Work\SYSGrow\backend\app\services\application\activity_logger.py", line 128, in log_activity
    activity_file_logger.info(log_message)
Message: '[INFO] system_shutdown: Smart Agriculture System shutting down'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 125, in _graceful_shutdown
    logging.info("Graceful shutdown initiated (%s)", reason)
Message: 'Graceful shutdown initiated (%s)'
Arguments: ('atexit',)
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 127, in _graceful_shutdown
    container.shutdown()
  File "E:\Work\SYSGrow\backend\app\services\container.py", line 167, in shutdown
    self.activity_logger.log_activity(
  File "E:\Work\SYSGrow\backend\app\services\application\activity_logger.py", line 128, in log_activity
    activity_file_logger.info(log_message)
Message: '[INFO] system_shutdown: Smart Agriculture System shutting down'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 125, in _graceful_shutdown
    logging.info("Graceful shutdown initiated (%s)", reason)
Message: 'Graceful shutdown initiated (%s)'
Arguments: ('atexit',)
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 127, in _graceful_shutdown
    container.shutdown()
  File "E:\Work\SYSGrow\backend\app\services\container.py", line 167, in shutdown
    self.activity_logger.log_activity(
  File "E:\Work\SYSGrow\backend\app\services\application\activity_logger.py", line 128, in log_activity
    activity_file_logger.info(log_message)
Message: '[INFO] system_shutdown: Smart Agriculture System shutting down'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 125, in _graceful_shutdown
    logging.info("Graceful shutdown initiated (%s)", reason)
Message: 'Graceful shutdown initiated (%s)'
Arguments: ('atexit',)
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 127, in _graceful_shutdown
    container.shutdown()
  File "E:\Work\SYSGrow\backend\app\services\container.py", line 167, in shutdown
    self.activity_logger.log_activity(
  File "E:\Work\SYSGrow\backend\app\services\application\activity_logger.py", line 128, in log_activity
    activity_file_logger.info(log_message)
Message: '[INFO] system_shutdown: Smart Agriculture System shutting down'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 125, in _graceful_shutdown
    logging.info("Graceful shutdown initiated (%s)", reason)
Message: 'Graceful shutdown initiated (%s)'
Arguments: ('atexit',)
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 127, in _graceful_shutdown
    container.shutdown()
  File "E:\Work\SYSGrow\backend\app\services\container.py", line 167, in shutdown
    self.activity_logger.log_activity(
  File "E:\Work\SYSGrow\backend\app\services\application\activity_logger.py", line 128, in log_activity
    activity_file_logger.info(log_message)
Message: '[INFO] system_shutdown: Smart Agriculture System shutting down'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 125, in _graceful_shutdown
    logging.info("Graceful shutdown initiated (%s)", reason)
Message: 'Graceful shutdown initiated (%s)'
Arguments: ('atexit',)
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 127, in _graceful_shutdown
    container.shutdown()
  File "E:\Work\SYSGrow\backend\app\services\container.py", line 167, in shutdown
    self.activity_logger.log_activity(
  File "E:\Work\SYSGrow\backend\app\services\application\activity_logger.py", line 128, in log_activity
    activity_file_logger.info(log_message)
Message: '[INFO] system_shutdown: Smart Agriculture System shutting down'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 125, in _graceful_shutdown
    logging.info("Graceful shutdown initiated (%s)", reason)
Message: 'Graceful shutdown initiated (%s)'
Arguments: ('atexit',)
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 127, in _graceful_shutdown
    container.shutdown()
  File "E:\Work\SYSGrow\backend\app\services\container.py", line 167, in shutdown
    self.activity_logger.log_activity(
  File "E:\Work\SYSGrow\backend\app\services\application\activity_logger.py", line 128, in log_activity
    activity_file_logger.info(log_message)
Message: '[INFO] system_shutdown: Smart Agriculture System shutting down'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 125, in _graceful_shutdown
    logging.info("Graceful shutdown initiated (%s)", reason)
Message: 'Graceful shutdown initiated (%s)'
Arguments: ('atexit',)
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 127, in _graceful_shutdown
    container.shutdown()
  File "E:\Work\SYSGrow\backend\app\services\container.py", line 167, in shutdown
    self.activity_logger.log_activity(
  File "E:\Work\SYSGrow\backend\app\services\application\activity_logger.py", line 128, in log_activity
    activity_file_logger.info(log_message)
Message: '[INFO] system_shutdown: Smart Agriculture System shutting down'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 125, in _graceful_shutdown
    logging.info("Graceful shutdown initiated (%s)", reason)
Message: 'Graceful shutdown initiated (%s)'
Arguments: ('atexit',)
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 127, in _graceful_shutdown
    container.shutdown()
  File "E:\Work\SYSGrow\backend\app\services\container.py", line 167, in shutdown
    self.activity_logger.log_activity(
  File "E:\Work\SYSGrow\backend\app\services\application\activity_logger.py", line 128, in log_activity
    activity_file_logger.info(log_message)
Message: '[INFO] system_shutdown: Smart Agriculture System shutting down'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 125, in _graceful_shutdown
    logging.info("Graceful shutdown initiated (%s)", reason)
Message: 'Graceful shutdown initiated (%s)'
Arguments: ('atexit',)
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 127, in _graceful_shutdown
    container.shutdown()
  File "E:\Work\SYSGrow\backend\app\services\container.py", line 167, in shutdown
    self.activity_logger.log_activity(
  File "E:\Work\SYSGrow\backend\app\services\application\activity_logger.py", line 128, in log_activity
    activity_file_logger.info(log_message)
Message: '[INFO] system_shutdown: Smart Agriculture System shutting down'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 125, in _graceful_shutdown
    logging.info("Graceful shutdown initiated (%s)", reason)
Message: 'Graceful shutdown initiated (%s)'
Arguments: ('atexit',)
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 127, in _graceful_shutdown
    container.shutdown()
  File "E:\Work\SYSGrow\backend\app\services\container.py", line 167, in shutdown
    self.activity_logger.log_activity(
  File "E:\Work\SYSGrow\backend\app\services\application\activity_logger.py", line 128, in log_activity
    activity_file_logger.info(log_message)
Message: '[INFO] system_shutdown: Smart Agriculture System shutting down'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 125, in _graceful_shutdown
    logging.info("Graceful shutdown initiated (%s)", reason)
Message: 'Graceful shutdown initiated (%s)'
Arguments: ('atexit',)
--- Logging error ---
Traceback (most recent call last):
  File "C:\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "E:\Work\SYSGrow\backend\app\__init__.py", line 127, in _graceful_shutdown
    container.shutdown()
  File "E:\Work\SYSGrow\backend\app\services\container.py", line 167, in shutdown
    self.activity_logger.log_activity(
  File "E:\Work\SYSGrow\backend\app\services\application\activity_logger.py", line 128, in log_activity
    activity_file_logger.info(log_message)
Message: '[INFO] system_shutdown: Smart Agriculture System shutting down'
Arguments: ()
Exception ignored in atexit callback <function cleanup_numbered_dir at 0x000002136EB6B4C0>:
Traceback (most recent call last):
  File "E:\Work\SYSGrow\backend\.venv\Lib\site-packages\_pytest\pathlib.py", line 374, in cleanup_numbered_dir
    cleanup_dead_symlinks(root)
  File "E:\Work\SYSGrow\backend\.venv\Lib\site-packages\_pytest\pathlib.py", line 359, in cleanup_dead_symlinks
    if not left_dir.resolve().exists():
  File "C:\Python313\Lib\pathlib\_abc.py", line 450, in exists
    self.stat(follow_symlinks=follow_symlinks)
  File "C:\Python313\Lib\pathlib\_local.py", line 515, in stat
    return os.stat(self, follow_symlinks=follow_symlinks)
PermissionError: [WinError 5] Access is denied: 'C:\\Users\\soyse.TIBURON\\AppData\\Local\\Temp\\pytest-of-Seba\\pytest-current'
